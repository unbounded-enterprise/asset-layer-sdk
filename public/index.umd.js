!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).AssetLayer={})}(this,function(e){function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.apply(this,arguments)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e,t,r){return s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var s=new(Function.bind.apply(e,n));return r&&o(s,r.prototype),s},s.apply(null,arguments)}function i(e){var t="function"==typeof Map?new Map:void 0;return i=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,n(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,e)},i(e)}var u={__proto__:null,default:function(e,t){return t=t||{},new Promise(function(r,n){var o=new XMLHttpRequest,s=[],i=[],u={},c=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:c,headers:{keys:function(){return s},entries:function(){return i},get:function(e){return u[e.toLowerCase()]},has:function(e){return e.toLowerCase()in u}}}};for(var a in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,r){s.push(t=t.toLowerCase()),i.push([t,r]),u[t]=u[t]?u[t]+","+r:r}),r(c())},o.onerror=n,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(a,t.headers[a]);o.send(t.body||null)})}},c=self.fetch||(self.fetch=u.default||u),a=/*#__PURE__*/function(e){function t(t,r){var n;return(n=e.call(this,t)||this).status=void 0,n.status=r,n}return r(t,e),t}(/*#__PURE__*/i(Error));function l(e,t){var r,n,o,s,i,u,c,l,f,h;if(void 0===t&&(t=500),!e)return new a("Unknown Error",t);var d=(null==(r=e.response)||null==(r=r.data)?void 0:r.error)||(null==(n=e.response)||null==(n=n.data)?void 0:n.message)||(null==(o=e.response)?void 0:o.data)||(null==(s=e.data)?void 0:s.error)||(null==(i=e.data)?void 0:i.message)||(null==(u=e.data)?void 0:u.errorMessage)||e.data||e.message||e.error||"Unknown Error Message",m=(null==(c=e.response)||null==(c=c.data)?void 0:c.statusCode)||(null==(l=e.response)?void 0:l.status)||(null==(f=e.data)?void 0:f.status)||(null==(h=e.data)?void 0:h.statusCode)||e.status||t;return new a(d,m)}var f=/*#__PURE__*/function(){function e(e,t){this.parent=void 0,this.baseUrl=void 0,this.appSecret=void 0,this.parent=e,this.baseUrl=(null==t?void 0:t.baseUrl)||"https://api-v2.assetlayer.com/api/v1",this.appSecret=(null==t?void 0:t.appSecret)||""}return e.prototype.request=function(e,r){var n=""+this.baseUrl+e,o=t({"Content-Type":"application/json",appsecret:this.appSecret,didtoken:this.parent.didToken},(null==r?void 0:r.headers)||{}),s=t({},r,{headers:o});return c(n,s).then(function(t){try{return Promise.resolve(t.json()).then(function(r){if(t.ok)return r;var n=l(r);throw console.warn("[AssetLayer@"+e.split("?")[0]+"]: "+t.statusText+" ("+t.status+") // "+n.message),new a(n.message,t.status)})}catch(e){return Promise.reject(e)}})},e}();function h(e){if(!e)return"";var t=new URLSearchParams,r=function(r){if(void 0===e[r])return 1;Array.isArray(e[r])?e[r].forEach(function(e){e&&t.append(r+"[]",e)}):t.append(r,e[r])};for(var n in e)r(n);return"?"+t.toString()}function d(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var m=/*#__PURE__*/function(e){function n(){for(var r,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(r=e.call.apply(e,[this].concat(o))||this).getApp=function(e,t){try{return Promise.resolve(r.raw.getApp(e,t)).then(function(e){return e.body.app})}catch(e){return Promise.reject(e)}},r.getApps=function(e,t){try{return Promise.resolve(r.raw.getApps(e,t)).then(function(e){return e.body.app})}catch(e){return Promise.reject(e)}},r.getAppSlots=function(e,t){try{return Promise.resolve(r.raw.getAppSlots(e,t)).then(function(e){return e.body.app.slots})}catch(e){return Promise.reject(e)}},r.getAppSlotIds=function(e,t){try{return Promise.resolve(r.raw.getAppSlotIds(e,t)).then(function(e){return e.body.app.slots})}catch(e){return Promise.reject(e)}},r.getAppsWithListings=function(e){try{return Promise.resolve(r.raw.getAppsWithListings(e)).then(function(e){return e.body.apps})}catch(e){return Promise.reject(e)}},r.getAppIdsWithListings=function(e){try{return Promise.resolve(r.raw.getAppIdsWithListings(e)).then(function(e){return e.body.apps})}catch(e){return Promise.reject(e)}},r.raw={info:function(e,t){try{return Promise.resolve(r.request("/app/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getApp:function(e,t){try{return Promise.resolve(r.request("/app/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getApps:function(e,t){try{return Promise.resolve(r.request("/app/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},slots:function(e,t){try{return Promise.resolve(r.request("/app/slots"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getAppSlots:function(e,t){try{return Promise.resolve(r.request("/app/slots"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getAppSlotIds:function(e,n){try{return Promise.resolve(r.request("/app/slots"+h(t({},e,{idOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},listings:function(e,t){try{return Promise.resolve(r.request("/app/listings"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getAppsWithListings:function(e){try{return Promise.resolve(r.request("/app/listings",{headers:e}))}catch(e){return Promise.reject(e)}},getAppIdsWithListings:function(e){try{return Promise.resolve(r.request("/app/listings"+h({idOnly:!0}),{headers:e}))}catch(e){return Promise.reject(e)}}},r.safe={info:function(e,t){try{return Promise.resolve(d(function(){return Promise.resolve(r.info(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getApp:function(e,t){try{return Promise.resolve(d(function(){return Promise.resolve(r.getApp(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getApps:function(e,t){try{return Promise.resolve(d(function(){return Promise.resolve(r.getApps(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},slots:function(e,t){try{return Promise.resolve(d(function(){return Promise.resolve(r.slots(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppSlots:function(e,t){try{return Promise.resolve(d(function(){return Promise.resolve(r.getAppSlots(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppSlotIds:function(e,t){try{return Promise.resolve(d(function(){return Promise.resolve(r.getAppSlotIds(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},listings:function(e,t){try{return Promise.resolve(d(function(){return Promise.resolve(r.listings(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppsWithListings:function(e){try{return Promise.resolve(d(function(){return Promise.resolve(r.getAppsWithListings(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppIdsWithListings:function(e){try{return Promise.resolve(d(function(){return Promise.resolve(r.getAppIdsWithListings(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},r}r(n,e);var o=n.prototype;return o.info=function(e,t){try{return Promise.resolve(this.raw.info(e,t)).then(function(e){return e.body.app})}catch(e){return Promise.reject(e)}},o.slots=function(e,t){try{return Promise.resolve(this.raw.slots(e,t)).then(function(e){return e.body.app.slots})}catch(e){return Promise.reject(e)}},o.listings=function(e,t){try{return Promise.resolve(this.raw.listings(e,t)).then(function(e){return e.body.apps})}catch(e){return Promise.reject(e)}},n}(f);function p(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var y=/*#__PURE__*/function(e){function n(){for(var r,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(r=e.call.apply(e,[this].concat(o))||this).info=function(e,t){try{return Promise.resolve(r.raw.info(e,t)).then(function(t){return e.assetIds?t.body.assets:t.body.assets[0]})}catch(e){return Promise.reject(e)}},r.getAsset=function(e,t){try{return Promise.resolve(r.raw.getAsset(e,t)).then(function(e){return e.body.assets[0]})}catch(e){return Promise.reject(e)}},r.getAssets=function(e,t){try{return Promise.resolve(r.raw.getAssets(e,t)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},r.user=function(e,t){try{return Promise.resolve(r.raw.user(e,t)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},r.getUserAssets=function(e,t){try{return Promise.resolve(r.raw.getUserAssets(e,t)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},r.getUserAssetIds=function(e,t){try{return Promise.resolve(r.raw.getUserAssetIds(e,t)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},r.getUserAssetsCounts=function(e,t){try{return Promise.resolve(r.raw.getUserAssetsCounts(e,t)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},r.getUserCollectionAssets=function(e,t){try{return Promise.resolve(r.raw.getUserCollectionAssets(e,t)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},r.getUserCollectionsAssets=function(e,t){try{return Promise.resolve(r.raw.getUserCollectionsAssets(e,t)).then(function(e){return e.body.collections})}catch(e){return Promise.reject(e)}},r.getUserSlotAssets=function(e,t){try{return Promise.resolve(r.raw.getUserSlotAssets(e,t)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},r.getUserSlotsAssets=function(e,t){try{return Promise.resolve(r.raw.getUserSlotsAssets(e,t)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},r.getAssetHistory=function(e,t){try{return Promise.resolve(r.raw.getAssetHistory(e,t)).then(function(e){return e.body.history})}catch(e){return Promise.reject(e)}},r.getAssetMarketHistory=function(e,t){try{return Promise.resolve(r.raw.getAssetMarketHistory(e,t)).then(function(e){return e.body.history})}catch(e){return Promise.reject(e)}},r.getAssetOwnershipHistory=function(e,t){try{return Promise.resolve(r.raw.getAssetOwnershipHistory(e,t)).then(function(e){return e.body.history})}catch(e){return Promise.reject(e)}},r.send=function(e,t){try{return Promise.resolve(r.raw.send(e,t)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},r.sendAsset=function(e,t){try{return Promise.resolve(r.raw.sendAsset(e,t)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},r.sendAssets=function(e,t){try{return Promise.resolve(r.raw.sendAssets(e,t)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},r.sendCollectionAssets=function(e,t){try{return Promise.resolve(r.raw.sendCollectionAssets(e,t)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},r.sendLowestAsset=function(e,t){try{return Promise.resolve(r.raw.sendLowestAsset(e,t)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},r.sendRandomAsset=function(e,t){try{return Promise.resolve(r.raw.sendRandomAsset(e,t)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},r.update=function(e,t){try{return Promise.resolve(r.raw.update(e,t)).then(function(t){return e.collectionId?t.body.collectionId:e.assetIds?t.body.assetIds:t.body.assetId})}catch(e){return Promise.reject(e)}},r.updateAsset=function(e,t){try{return Promise.resolve(r.raw.updateAsset(e,t)).then(function(e){return e.body.assetId})}catch(e){return Promise.reject(e)}},r.updateAssets=function(e,t){try{return Promise.resolve(r.raw.updateAssets(e,t)).then(function(e){return e.body.assetIds})}catch(e){return Promise.reject(e)}},r.updateCollectionAssets=function(e,t){try{return Promise.resolve(r.raw.updateCollectionAssets(e,t)).then(function(e){return e.body.collectionId})}catch(e){return Promise.reject(e)}},r.expressionValues=function(e,t){try{return Promise.resolve(r.raw.expressionValues(e,t)).then(function(t){return e.collectionId?t.success:e.assetIds?t.body.assetIds:t.body.expressionValueId})}catch(e){return Promise.reject(e)}},r.updateAssetExpressionValue=function(e,t){try{return Promise.resolve(r.raw.updateAssetExpressionValue(e,t)).then(function(e){return e.body.expressionValueId})}catch(e){return Promise.reject(e)}},r.updateAssetsExpressionValue=function(e,t){try{return Promise.resolve(r.raw.updateAssetsExpressionValue(e,t)).then(function(e){return e.body.assetIds})}catch(e){return Promise.reject(e)}},r.updateCollectionAssetsExpressionValue=function(e,t){try{return Promise.resolve(r.raw.updateCollectionAssetsExpressionValue(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.updateBulkExpressionValues=function(e,t){try{return Promise.resolve(r.raw.updateBulkExpressionValues(e,t)).then(function(e){return e.body.log})}catch(e){return Promise.reject(e)}},r.raw={info:function(e,t){try{return Promise.resolve(r.request("/asset/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getAsset:function(e,t){try{return Promise.resolve(r.request("/asset/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getAssets:function(e,t){try{return Promise.resolve(r.request("/asset/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},user:function(e,t){try{return Promise.resolve(r.request("/asset/user"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getUserAssets:function(e,t){try{return Promise.resolve(r.request("/asset/user"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getUserAssetIds:function(e,n){try{return Promise.resolve(r.request("/asset/user"+h(t({},e,{idOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserAssetsCounts:function(e,n){try{return Promise.resolve(r.request("/asset/user"+h(t({},e,{countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserCollectionAssets:function(e,t){try{return Promise.resolve(r.request("/asset/collection"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getUserCollectionsAssets:function(e,t){try{return Promise.resolve(r.request("/asset/collections"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getUserSlotAssets:function(e,t){try{return Promise.resolve(r.request("/asset/slot"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getUserSlotsAssets:function(e,t){try{return Promise.resolve(r.request("/asset/slots"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getAssetHistory:function(e,t){try{return Promise.resolve(r.request("/asset/history"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getAssetMarketHistory:function(e,t){try{return Promise.resolve(r.request("/asset/marketHistory"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getAssetOwnershipHistory:function(e,t){try{return Promise.resolve(r.request("/asset/ownershipHistory"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},mint:function(e,t){try{return Promise.resolve(r.request("/asset/mint",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},send:function(e,t){try{return Promise.resolve(r.request("/asset/send",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},sendAsset:function(e,t){try{return Promise.resolve(r.request("/asset/send",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},sendAssets:function(e,t){try{return Promise.resolve(r.request("/asset/send",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},sendCollectionAssets:function(e,t){try{return Promise.resolve(r.request("/asset/send",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},sendLowestAsset:function(e,t){try{return Promise.resolve(r.request("/asset/sendLowest",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},sendRandomAsset:function(e,t){try{return Promise.resolve(r.request("/asset/sendRandom",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},update:function(e,t){try{return Promise.resolve(r.request("/asset/update",{method:"PUT",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateAsset:function(e,t){try{return Promise.resolve(r.request("/asset/update",{method:"PUT",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateAssets:function(e,t){try{return Promise.resolve(r.request("/asset/update",{method:"PUT",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateCollectionAssets:function(e,t){try{return Promise.resolve(r.request("/asset/update",{method:"PUT",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},expressionValues:function(e,t){try{return Promise.resolve(r.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateAssetExpressionValue:function(e,t){return r.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:t})},updateAssetsExpressionValue:function(e,t){return r.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:t})},updateCollectionAssetsExpressionValue:function(e,t){return r.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:t})},updateBulkExpressionValues:function(e,t){return r.request("/asset/expressionValuesBulk",{method:"POST",body:JSON.stringify(e),headers:t})}},r.safe={info:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.info(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAsset:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getAsset(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAssets:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},user:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.user(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserAssets:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getUserAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserAssetIds:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getUserAssetIds(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserAssetsCounts:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getUserAssetsCounts(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserCollectionAssets:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getUserCollectionAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserCollectionsAssets:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getUserCollectionsAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserSlotAssets:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getUserSlotAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserSlotsAssets:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getUserSlotsAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAssetHistory:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getAssetHistory(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAssetMarketHistory:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getAssetMarketHistory(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAssetOwnershipHistory:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.getAssetOwnershipHistory(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},mint:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.mint(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},send:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.send(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},sendAsset:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.sendAsset(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},sendAssets:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.sendAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},sendCollectionAssets:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.sendCollectionAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},sendLowestAsset:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.sendLowestAsset(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},sendRandomAsset:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.sendRandomAsset(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},update:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.update(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAsset:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.updateAsset(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAssets:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.updateAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateCollectionAssets:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.updateCollectionAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},expressionValues:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.expressionValues(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAssetExpressionValue:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.updateAssetExpressionValue(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAssetsExpressionValue:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.updateAssetsExpressionValue(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateCollectionAssetsExpressionValue:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.updateCollectionAssetsExpressionValue(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateBulkExpressionValues:function(e,t){try{return Promise.resolve(p(function(){return Promise.resolve(r.updateBulkExpressionValues(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},r}return r(n,e),n.prototype.mint=function(e,t){try{return Promise.resolve(this.raw.mint(e,t)).then(function(t){return e.includeAssetIds?t.body.assetIds:t.success})}catch(e){return Promise.reject(e)}},n}(f);function v(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var g=/*#__PURE__*/function(e){function n(){for(var r,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(r=e.call.apply(e,[this].concat(o))||this).info=function(e,t){try{return Promise.resolve(r.raw.info(e,t)).then(function(t){return e.collectionIds?t.body.collections:t.body.collections[0]})}catch(e){return Promise.reject(e)}},r.getCollection=function(e,t){try{return Promise.resolve(r.raw.getCollection(e,t)).then(function(e){return e.body.collections[0]})}catch(e){return Promise.reject(e)}},r.getCollections=function(e,t){try{return Promise.resolve(r.raw.getCollections(e,t)).then(function(e){return e.body.collections})}catch(e){return Promise.reject(e)}},r.assets=function(e,t){try{return Promise.resolve(r.raw.getCollectionAssets(e,t)).then(function(e){return e.body.collection.assets})}catch(e){return Promise.reject(e)}},r.getCollectionAssets=function(e,t){try{return Promise.resolve(r.raw.getCollectionAssets(e,t)).then(function(e){return e.body.collection.assets})}catch(e){return Promise.reject(e)}},r.getCollectionAssetIds=function(e,t){try{return Promise.resolve(r.raw.getCollectionAssetIds(e,t)).then(function(e){return e.body.collection.assets})}catch(e){return Promise.reject(e)}},r.createCollection=function(e,t){try{return Promise.resolve(r.raw.createCollection(e,t)).then(function(e){return e.body.collectionId})}catch(e){return Promise.reject(e)}},r.updateCollection=function(e,t){try{return Promise.resolve(r.raw.updateCollection(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.updateCollectionImage=function(e,t){try{return Promise.resolve(r.raw.updateCollectionImage(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.updateDefaultProperties=function(e,t){try{return Promise.resolve(r.raw.updateDefaultProperties(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.activateCollection=function(e,t){try{return Promise.resolve(r.raw.activateCollection(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.deactivateCollection=function(e,t){try{return Promise.resolve(r.raw.deactivateCollection(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.raw={info:function(e,t){try{return Promise.resolve(r.request("/collection/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getCollection:function(e,t){try{return Promise.resolve(r.request("/collection/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getCollections:function(e,t){try{return Promise.resolve(r.request("/collection/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},assets:function(e,t){try{return Promise.resolve(r.request("/collection/assets"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getCollectionAssets:function(e,t){try{return Promise.resolve(r.request("/collection/assets"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getCollectionAssetIds:function(e,n){try{return Promise.resolve(r.request("/collection/assets"+h(t({},e,{idOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},createCollection:function(e,t){try{return Promise.resolve(r.request("/collection/new",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateCollection:function(e,t){try{return Promise.resolve(r.request("/collection/update",{method:"PUT",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateCollectionImage:function(e,t){try{return Promise.resolve(r.request("/collection/image",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateDefaultProperties:function(e,t){try{return Promise.resolve(r.request("/collection/defaultProperties",{method:"PUT",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},activateCollection:function(e,t){try{return Promise.resolve(r.request("/collection/activate",{method:"PUT",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},deactivateCollection:function(e,t){try{return Promise.resolve(r.request("/collection/deactivate",{method:"PUT",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}}},r.safe={info:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.info(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollection:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.getCollection(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollections:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.getCollections(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},assets:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.assets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionAssets:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.getCollectionAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionAssetIds:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.getCollectionAssetIds(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},createCollection:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.createCollection(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateCollection:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.updateCollection(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateCollectionImage:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.updateCollectionImage(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateDefaultProperties:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.updateDefaultProperties(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},activateCollection:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.activateCollection(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},deactivateCollection:function(e,t){try{return Promise.resolve(v(function(){return Promise.resolve(r.deactivateCollection(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},r}return r(n,e),n}(f);function P(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var b=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).getEquips=function(e,r){try{return Promise.resolve(t.raw.getEquips(e,r)).then(function(e){return e.body.equip})}catch(e){return Promise.reject(e)}},t.setEquip=function(e,r){try{return Promise.resolve(t.raw.setEquip(e,r)).then(function(e){return e.body.equipId})}catch(e){return Promise.reject(e)}},t.removeEquip=function(e,r){try{return Promise.resolve(t.raw.removeEquip(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.raw={getEquips:function(e,r){try{return Promise.resolve(t.request("/equip/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},setEquip:function(e,r){try{return Promise.resolve(t.request("/equip/new",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},removeEquip:function(e,r){try{return Promise.resolve(t.request("/equip",{method:"DELETE",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}}},t.safe={getEquips:function(e,r){try{return Promise.resolve(P(function(){return Promise.resolve(t.getEquips(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},setEquip:function(e,r){try{return Promise.resolve(P(function(){return Promise.resolve(t.setEquip(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},removeEquip:function(e,r){try{return Promise.resolve(P(function(){return Promise.resolve(t.removeEquip(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},t}return r(t,e),t}(f);function A(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var E=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).getExpressionTypes=function(){try{return Promise.resolve(t.raw.getExpressionTypes()).then(function(e){return e.body.expressionTypes})}catch(e){return Promise.reject(e)}},t.getSlotExpressions=function(e,r){try{return Promise.resolve(t.raw.getSlotExpressions(e,r)).then(function(e){return e.body.expressions})}catch(e){return Promise.reject(e)}},t.createExpression=function(e,r){try{return Promise.resolve(t.raw.createExpression(e,r)).then(function(e){return e.body.expressionId})}catch(e){return Promise.reject(e)}},t.updateExpression=function(e,r){try{return Promise.resolve(t.raw.updateExpression(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.updateExpressionValues=function(e,r){try{return Promise.resolve(t.raw.updateExpressionValues(e,r)).then(function(t){return e.collectionId?t.success:e.assetIds?t.body.assetIds:t.body.expressionValueId})}catch(e){return Promise.reject(e)}},t.updateAssetExpressionValue=function(e,r){try{return Promise.resolve(t.raw.updateAssetExpressionValue(e,r)).then(function(e){return e.body.expressionValueId})}catch(e){return Promise.reject(e)}},t.updateAssetsExpressionValue=function(e,r){try{return Promise.resolve(t.raw.updateAssetsExpressionValue(e,r)).then(function(e){return e.body.assetIds})}catch(e){return Promise.reject(e)}},t.updateCollectionAssetsExpressionValue=function(e,r){try{return Promise.resolve(t.raw.updateCollectionAssetsExpressionValue(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.updateBulkExpressionValues=function(e,r){try{return Promise.resolve(t.raw.updateBulkExpressionValues(e,r)).then(function(e){return e.body.log})}catch(e){return Promise.reject(e)}},t.raw={getExpressionTypes:function(){try{return Promise.resolve(t.request("/slot/expressions/types"))}catch(e){return Promise.reject(e)}},getSlotExpressions:function(e,r){try{return Promise.resolve(t.request("/slot/expressions"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},createExpression:function(e,r){try{return Promise.resolve(t.request("/slot/expressions/new",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateExpression:function(e,r){try{return Promise.resolve(t.request("/slot/expressions/update",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateExpressionValues:function(e,r){try{return Promise.resolve(t.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateAssetExpressionValue:function(e,r){try{return Promise.resolve(t.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateAssetsExpressionValue:function(e,r){try{return Promise.resolve(t.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateCollectionAssetsExpressionValue:function(e,r){try{return Promise.resolve(t.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateBulkExpressionValues:function(e,r){try{return Promise.resolve(t.request("/asset/expressionValuesBulk",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}}},t.safe={getExpressionTypes:function(){try{return Promise.resolve(A(function(){return Promise.resolve(t.getExpressionTypes()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getSlotExpressions:function(e,r){try{return Promise.resolve(A(function(){return Promise.resolve(t.getSlotExpressions(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},createExpression:function(e,r){try{return Promise.resolve(A(function(){return Promise.resolve(t.createExpression(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateExpression:function(e,r){try{return Promise.resolve(A(function(){return Promise.resolve(t.updateExpression(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateExpressionValues:function(e,r){try{return Promise.resolve(A(function(){return Promise.resolve(t.updateExpressionValues(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAssetExpressionValue:function(e,r){try{return Promise.resolve(A(function(){return Promise.resolve(t.updateAssetExpressionValue(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAssetsExpressionValue:function(e,r){try{return Promise.resolve(A(function(){return Promise.resolve(t.updateAssetsExpressionValue(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateCollectionAssetsExpressionValue:function(e,r){try{return Promise.resolve(A(function(){return Promise.resolve(t.updateCollectionAssetsExpressionValue(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateBulkExpressionValues:function(e,r){try{return Promise.resolve(A(function(){return Promise.resolve(t.updateBulkExpressionValues(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},t}return r(t,e),t}(f);function w(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var I=/*#__PURE__*/function(e){function n(){for(var r,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(r=e.call.apply(e,[this].concat(o))||this).getListing=function(e,t){try{return Promise.resolve(r.raw.getListing(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.user=function(e,t){try{return Promise.resolve(r.raw.user(e,t)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},r.getUserListings=function(e,t){try{return Promise.resolve(r.raw.getUserListings(e,t)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},r.getUserListingsCounts=function(e,t){try{return Promise.resolve(r.raw.getUserListingsCounts(e,t)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},r.getUserCollectionListings=function(e,t){try{return Promise.resolve(r.raw.getUserCollectionListings(e,t)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},r.getUserCollectionListingsCounts=function(e,t){try{return Promise.resolve(r.raw.getUserCollectionListingsCounts(e,t)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},r.getUserSales=function(e,t){try{return Promise.resolve(r.raw.getUserSales(e,t)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},r.getUserSalesCounts=function(e,t){try{return Promise.resolve(r.raw.getUserSalesCounts(e,t)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},r.getUserPurchases=function(e,t){try{return Promise.resolve(r.raw.getUserPurchases(e,t)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},r.getUserPurchasesCounts=function(e,t){try{return Promise.resolve(r.raw.getUserPurchasesCounts(e,t)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},r.collection=function(e,t){try{return Promise.resolve(r.raw.collection(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.getCollectionListings=function(e,t){try{return Promise.resolve(r.raw.getCollectionListings(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.getCollectionsListings=function(e,t){try{return Promise.resolve(r.raw.getCollectionsListings(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.getCollectionListingsCounts=function(e,t){try{return Promise.resolve(r.raw.getCollectionListingsCounts(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.getCollectionsListingsCounts=function(e,t){try{return Promise.resolve(r.raw.getCollectionsListingsCounts(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.getCollectionListingsStats=function(e,t){try{return Promise.resolve(r.raw.getCollectionListingsStats(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.getCollectionsListingsStats=function(e,t){try{return Promise.resolve(r.raw.getCollectionsListingsStats(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.app=function(e,t){try{return Promise.resolve(r.raw.app(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.getAppListings=function(e,t){try{return Promise.resolve(r.raw.getAppListings(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.getAppListingsCounts=function(e,t){try{return Promise.resolve(r.raw.getAppListingsCounts(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.getAppListingsStats=function(e,t){try{return Promise.resolve(r.raw.getAppListingsStats(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.new=function(e,t){try{return Promise.resolve(r.raw.new(e,t)).then(function(t){return t.body[e.collectionId||e.assetIds?"assetIds":"listing"]})}catch(e){return Promise.reject(e)}},r.listAsset=function(e,t){try{return Promise.resolve(r.raw.listAsset(e,t)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},r.listAssets=function(e,t){try{return Promise.resolve(r.raw.listAssets(e,t)).then(function(e){return e.body.assetIds})}catch(e){return Promise.reject(e)}},r.listCollectionAssets=function(e,t){try{return Promise.resolve(r.raw.listCollectionAssets(e,t)).then(function(e){return e.body.assetIds})}catch(e){return Promise.reject(e)}},r.updateListing=function(e,t){try{return Promise.resolve(r.raw.updateListing(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.buyListing=function(e,t){try{return Promise.resolve(r.raw.buyListing(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.removeListing=function(e,t){try{return Promise.resolve(r.raw.removeListing(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.raw={getListing:function(e,t){try{return Promise.resolve(r.request("/listing/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},user:function(e,t){try{return Promise.resolve(r.request("/listing/user"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getUserListings:function(e,n){try{return Promise.resolve(r.request("/listing/user"+h(t({status:"active"},e,{sellerOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserListingsCounts:function(e,n){try{return Promise.resolve(r.request("/listing/user"+h(t({status:"active"},e,{sellerOnly:!0,countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserCollectionListings:function(e,n){try{return Promise.resolve(r.request("/listing/user"+h(t({status:"active"},e,{sellerOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserCollectionListingsCounts:function(e,n){try{return Promise.resolve(r.request("/listing/user"+h(t({status:"active"},e,{sellerOnly:!0,countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserSales:function(e,n){try{return Promise.resolve(r.request("/listing/user"+h(t({},e,{sellerOnly:!0,status:"sold"})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserSalesCounts:function(e,n){try{return Promise.resolve(r.request("/listing/user"+h(t({},e,{sellerOnly:!0,status:"sold",countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserPurchases:function(e,n){try{return Promise.resolve(r.request("/listing/user"+h(t({},e,{buyerOnly:!0,status:"sold"})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserPurchasesCounts:function(e,n){try{return Promise.resolve(r.request("/listing/user"+h(t({},e,{buyerOnly:!0,status:"sold",countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},collection:function(e,t){try{return Promise.resolve(r.request("/listing/collection"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getCollectionListings:function(e,t){try{return Promise.resolve(r.request("/listing/collection"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getCollectionsListings:function(e,t){try{return Promise.resolve(r.request("/listing/collection"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getCollectionListingsCounts:function(e,n){try{return Promise.resolve(r.request("/listing/collection"+h(t({},e,{countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getCollectionsListingsCounts:function(e,n){try{return Promise.resolve(r.request("/listing/collection"+h(t({},e,{countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getCollectionListingsStats:function(e,n){try{return Promise.resolve(r.request("/listing/collection"+h(t({},e,{countsOnly:!0,collectionStats:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getCollectionsListingsStats:function(e,n){try{return Promise.resolve(r.request("/listing/collection"+h(t({},e,{countsOnly:!0,collectionStats:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},app:function(e,t){try{return Promise.resolve(r.request("/listing/app"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getAppListings:function(e,t){try{return Promise.resolve(r.request("/listing/app"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getAppListingsCounts:function(e,n){try{return Promise.resolve(r.request("/listing/app"+h(t({},e,{countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getAppListingsStats:function(e,n){try{return Promise.resolve(r.request("/listing/app"+h(t({},e,{countsOnly:!0,collectionStats:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},new:function(e,t){try{return Promise.resolve(r.request("/listing/new",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},listAsset:function(e,t){try{return Promise.resolve(r.request("/listing/new",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},listAssets:function(e,t){try{return Promise.resolve(r.request("/listing/new",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},listCollectionAssets:function(e,t){try{return Promise.resolve(r.request("/listing/new",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateListing:function(e,t){try{return Promise.resolve(r.request("/listing/update",{method:"PUT",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},buyListing:function(e,t){try{return Promise.resolve(r.request("/listing/buy",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},removeListing:function(e,t){try{return Promise.resolve(r.request("/listing",{method:"DELETE",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}}},r.safe={getListing:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getListing(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},user:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.user(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserListings:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getUserListings(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserListingsCounts:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getUserListingsCounts(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserCollectionListings:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getUserCollectionListings(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserCollectionListingsCounts:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getUserCollectionListingsCounts(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserSales:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getUserSales(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserSalesCounts:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getUserSalesCounts(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserPurchases:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getUserPurchases(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserPurchasesCounts:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getUserPurchasesCounts(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},collection:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.collection(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionListings:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getCollectionListings(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionsListings:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getCollectionsListings(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionListingsCounts:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getCollectionListingsCounts(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionsListingsCounts:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getCollectionsListingsCounts(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionListingsStats:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getCollectionListingsStats(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionsListingsStats:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getCollectionsListingsStats(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},app:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.app(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppListings:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getAppListings(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppListingsCounts:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getAppListingsCounts(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppListingsStats:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.getAppListingsStats(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},new:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.new(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},listAsset:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.listAsset(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},listAssets:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.listAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},listCollectionAssets:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.listCollectionAssets(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateListing:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.updateListing(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},buyListing:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.buyListing(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},removeListing:function(e,t){try{return Promise.resolve(w(function(){return Promise.resolve(r.removeListing(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},r}return r(n,e),n}(f);function j(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var _=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).buyItem=function(e,r){try{return Promise.resolve(t.raw.buyItem(e,r)).then(function(e){return e.body.assetId})}catch(e){return Promise.reject(e)}},t.summary=function(e){try{return Promise.resolve(t.raw.summary(e)).then(function(e){return e.body.summary})}catch(e){return Promise.reject(e)}},t.raw={buyItem:function(e,r){try{return Promise.resolve(t.request("/shop/buy",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},summary:function(e){try{return Promise.resolve(t.request("/shop/summary",{headers:e}))}catch(e){return Promise.reject(e)}}},t.safe={buyItem:function(e,r){try{return Promise.resolve(j(function(){return Promise.resolve(t.buyItem(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},summary:function(e){try{return Promise.resolve(j(function(){return Promise.resolve(t.summary(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},t}return r(t,e),t}(f);function S(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var O=/*#__PURE__*/function(e){function n(){for(var r,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(r=e.call.apply(e,[this].concat(o))||this).getSlot=function(e,t){try{return Promise.resolve(r.raw.getSlot(e,t)).then(function(e){return e.body.slot})}catch(e){return Promise.reject(e)}},r.collections=function(e,t){try{return Promise.resolve(r.raw.collections(e,t)).then(function(e){return e.body.slot.collections})}catch(e){return Promise.reject(e)}},r.getSlotCollections=function(e,t){try{return Promise.resolve(r.raw.getSlotCollections(e,t)).then(function(e){return e.body.slot.collections})}catch(e){return Promise.reject(e)}},r.getSlotCollectionIds=function(e,t){try{return Promise.resolve(r.raw.getSlotCollectionIds(e,t)).then(function(e){return e.body.slot.collections})}catch(e){return Promise.reject(e)}},r.getExpressionTypes=function(){try{return Promise.resolve(r.raw.getExpressionTypes()).then(function(e){return e.body.expressionTypes})}catch(e){return Promise.reject(e)}},r.getSlotExpressions=function(e,t){try{return Promise.resolve(r.raw.getSlotExpressions(e,t)).then(function(e){return e.body.expressions})}catch(e){return Promise.reject(e)}},r.createExpression=function(e,t){try{return Promise.resolve(r.raw.createExpression(e,t)).then(function(e){return e.body.expressionId})}catch(e){return Promise.reject(e)}},r.updateExpression=function(e,t){try{return Promise.resolve(r.raw.updateExpression(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.raw={getSlot:function(e,t){try{return Promise.resolve(r.request("/slot/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},collections:function(e,t){try{return Promise.resolve(r.request("/slot/collections"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getSlotCollections:function(e,t){try{return Promise.resolve(r.request("/slot/collections"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getSlotCollectionIds:function(e,n){try{return Promise.resolve(r.request("/slot/collections"+h(t({},e,{idOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getExpressionTypes:function(){try{return Promise.resolve(r.request("/slot/expressions/types"))}catch(e){return Promise.reject(e)}},getSlotExpressions:function(e,t){try{return Promise.resolve(r.request("/slot/expressions"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},createExpression:function(e,t){try{return Promise.resolve(r.request("/slot/expressions/new",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateExpression:function(e,t){try{return Promise.resolve(r.request("/slot/expressions/update",{method:"PUT",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}}},r.safe={getSlot:function(e,t){try{return Promise.resolve(S(function(){return Promise.resolve(r.getSlot(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},collections:function(e,t){try{return Promise.resolve(S(function(){return Promise.resolve(r.collections(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getSlotCollections:function(e,t){try{return Promise.resolve(S(function(){return Promise.resolve(r.getSlotCollections(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getSlotCollectionIds:function(e,t){try{return Promise.resolve(S(function(){return Promise.resolve(r.getSlotCollectionIds(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getExpressionTypes:function(){try{return Promise.resolve(S(function(){return Promise.resolve(r.getExpressionTypes()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getSlotExpressions:function(e,t){try{return Promise.resolve(S(function(){return Promise.resolve(r.getSlotExpressions(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},createExpression:function(e,t){try{return Promise.resolve(S(function(){return Promise.resolve(r.createExpression(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateExpression:function(e,t){try{return Promise.resolve(S(function(){return Promise.resolve(r.updateExpression(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},r}return r(n,e),n}(f);function C(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var T,N,L,R,x,k,M,U=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).getUser=function(e){try{return Promise.resolve(t.raw.getUser(e)).then(function(e){return e.body.user})}catch(e){return Promise.reject(e)}},t.register=function(e,r){try{return Promise.resolve(t.raw.register(e,r)).then(function(t){return null!=e&&e.otp?t.body.otp:t.body})}catch(e){return Promise.reject(e)}},t.getOTP=function(e){try{return Promise.resolve(t.raw.getOTP(e)).then(function(e){return e.body.otp})}catch(e){return Promise.reject(e)}},t.registerDid=function(e,r){try{return Promise.resolve(t.raw.registerDid(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.raw={getUser:function(e){try{return Promise.resolve(t.request("/user/info",{headers:e}))}catch(e){return Promise.reject(e)}},register:function(e,r){try{return Promise.resolve(t.request("/user/register",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},getOTP:function(e){try{return Promise.resolve(t.request("/user/register",{method:"POST",headers:e}))}catch(e){return Promise.reject(e)}},registerDid:function(e,r){try{return Promise.resolve(t.request("/user/register",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}}},t.safe={getUser:function(e){try{return Promise.resolve(C(function(){return Promise.resolve(t.getUser(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},register:function(e,r){try{return Promise.resolve(C(function(){return Promise.resolve(t.register(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getOTP:function(e){try{return Promise.resolve(C(function(){return Promise.resolve(t.getOTP(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},registerDid:function(e,r){try{return Promise.resolve(C(function(){return Promise.resolve(t.registerDid(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},t}return r(t,e),t}(f),D=((L=D||{}).MissingApiKey="MISSING_API_KEY",L.ModalNotReady="MODAL_NOT_READY",L.MalformedResponse="MALFORMED_RESPONSE",L.InvalidArgument="INVALID_ARGUMENT",L.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",L.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",L),q=((N=q||{}).SyncWeb3Method="SYNC_WEB3_METHOD",N.DuplicateIframe="DUPLICATE_IFRAME",N.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",N.DeprecationNotice="DEPRECATION_NOTICE",N),$=((T=$||{})[T.ParseError=-32700]="ParseError",T[T.InvalidRequest=-32600]="InvalidRequest",T[T.MethodNotFound=-32601]="MethodNotFound",T[T.InvalidParams=-32602]="InvalidParams",T[T.InternalError=-32603]="InternalError",T[T.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",T[T.MagicLinkExpired=-10001]="MagicLinkExpired",T[T.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",T[T.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",T[T.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",T[T.UpdateEmailFailed=-10004]="UpdateEmailFailed",T[T.UserRequestEditEmail=-10005]="UserRequestEditEmail",T[T.InactiveRecipient=-10010]="InactiveRecipient",T[T.AccessDeniedToUser=-10011]="AccessDeniedToUser",T[T.RedirectLoginComplete=-10015]="RedirectLoginComplete",T),B=((k=B||{}).MetaMask="metamask",k.CoinbaseWallet="coinbase_wallet",k),F=((x=F||{}).WalletSelected="wallet_selected",x.WalletConnected="wallet_connected",x.WalletRejected="wallet_rejected",x),W=((R=W||{}).LoginWithSms="magic_auth_login_with_sms",R.LoginWithEmailOTP="magic_auth_login_with_email_otp",R.LoginWithMagicLink="magic_auth_login_with_magic_link",R.LoginWithCredential="magic_auth_login_with_credential",R.SetAuthorizationToken="magic_auth_set_authorization_token",R.GetIdToken="magic_auth_get_id_token",R.GenerateIdToken="magic_auth_generate_id_token",R.GetMetadata="magic_auth_get_metadata",R.IsLoggedIn="magic_is_logged_in",R.Logout="magic_auth_logout",R.UpdateEmail="magic_auth_update_email",R.UserSettings="magic_auth_settings",R.UserSettingsTestMode="magic_auth_settings_testing_mode",R.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",R.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",R.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",R.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",R.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",R.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",R.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",R.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",R.LogoutTestMode="magic_auth_logout_testing_mode",R.UpdateEmailTestMode="magic_auth_update_email_testing_mode",R.IntermediaryEvent="magic_intermediary_event",R.RequestAccounts="eth_requestAccounts",R.GetInfo="magic_get_info",R.ShowUI="magic_wallet",R.NFTPurchase="magic_nft_purchase",R.NFTCheckout="magic_nft_checkout",R.NFTTransfer="magic_nft_transfer",R.RequestUserInfoWithUI="mc_request_user_info",R.Disconnect="mc_disconnect",R.UpdatePhoneNumber="magic_auth_update_phone_number",R.UpdatePhoneNumberTestMode="magic_auth_update_phone_number_testing_mode",R.RecoverAccount="magic_auth_recover_account",R.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",R.MagicBoxHeartBeat="magic_box_heart_beat",R.AutoConnect="mc_auto_connect",R.Login="mc_login",R.EncryptV1="magic_auth_encrypt_v1",R.DecryptV1="magic_auth_decrypt_v1",R.ShowNFTs="magic_show_nfts",R.ShowOnRamp="magic_show_fiat_onramp",R.ShowSendTokensUI="magic_show_send_tokens_ui",R.ShowAddress="magic_show_address",R.ShowBalances="magic_show_balances",R.SendGaslessTransaction="eth_sendGaslessTransaction",R),V=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e.MAGIC_MG_BOX_SEND_RECEIPT="MAGIC_MG_BOX_SEND_RECEIPT",e))(V||{}),G=((M=G||{}).MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",M),z=(e=>(e.UpdateEmail="update-email",e.MFA="mfa",e.Recovery="recovery",e))(z||{}),H=(e=>(e.Retry="retry",e))(H||{}),J=(e=>(e.EmailSent="email-sent",e.EmailNotDeliverable="email-not-deliverable",e))(J||{}),X=(e=>(e.VerifyEmailOtp="verify-email-otp",e.Cancel="cancel",e))(X||{}),K=(e=>(e.EmailOTPSent="email-otp-sent",e.InvalidEmailOtp="invalid-email-otp",e))(K||{}),Y=(e=>(e.Retry="device-retry",e))(Y||{}),Q=(e=>(e.DeviceApproved="device-approved",e.DeviceNeedsApproval="device-needs-approval",e.DeviceVerificationLinkExpired="device-verification-link-expired",e.DeviceVerificationEmailSent="device-verification-email-sent",e))(Q||{}),Z=(e=>(e.Harmony="HARMONY",e))(Z||{}),ee=(e=>(e.PhoneNumber="phone_number",e))(ee||{}),te=Object.create,re=Object.defineProperty,ne=Object.defineProperties,oe=Object.getOwnPropertyDescriptor,se=Object.getOwnPropertyDescriptors,ie=Object.getOwnPropertyNames,ue=Object.getOwnPropertySymbols,ce=Object.getPrototypeOf,ae=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,fe=(e,t,r)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,he=(e,t)=>{for(var r in t||(t={}))ae.call(t,r)&&fe(e,r,t[r]);if(ue)for(var r of ue(t))le.call(t,r)&&fe(e,r,t[r]);return e},de=(e,t)=>ne(e,se(t)),me=(e,t,r)=>new Promise((n,o)=>{var s=e=>{try{u(r.next(e))}catch(e){o(e)}},i=e=>{try{u(r.throw(e))}catch(e){o(e)}},u=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,i);u((r=r.apply(e,t)).next())}),pe=((e,t)=>()=>(t||e(t={exports:{}},t),t.exports))((e,t)=>{var r=Object.prototype.hasOwnProperty,n="~";function o(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,r,o,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var u=new s(r,o||e,i),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],u]:e._events[c].push(u):(e._events[c]=u,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),c.prototype.eventNames=function(){var e,t,o=[];if(0===this._eventsCount)return o;for(t in e=this._events)r.call(e,t)&&o.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},c.prototype.listeners=function(e){var t=this._events[n?n+e:e];if(!t)return[];if(t.fn)return[t.fn];for(var r=0,o=t.length,s=new Array(o);r<o;r++)s[r]=t[r].fn;return s},c.prototype.listenerCount=function(e){var t=this._events[n?n+e:e];return t?t.fn?1:t.length:0},c.prototype.emit=function(e,t,r,o,s,i){var u=n?n+e:e;if(!this._events[u])return!1;var c,a,l=this._events[u],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,s),!0;case 6:return l.fn.call(l.context,t,r,o,s,i),!0}for(a=1,c=new Array(f-1);a<f;a++)c[a-1]=arguments[a];l.fn.apply(l.context,c)}else{var h,d=l.length;for(a=0;a<d;a++)switch(l[a].once&&this.removeListener(e,l[a].fn,void 0,!0),f){case 1:l[a].fn.call(l[a].context);break;case 2:l[a].fn.call(l[a].context,t);break;case 3:l[a].fn.call(l[a].context,t,r);break;case 4:l[a].fn.call(l[a].context,t,r,o);break;default:if(!c)for(h=1,c=new Array(f-1);h<f;h++)c[h-1]=arguments[h];l[a].fn.apply(l[a].context,c)}}return!0},c.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},c.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},c.prototype.removeListener=function(e,t,r,o){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return u(this,s),this;var i=this._events[s];if(i.fn)i.fn===t&&(!o||i.once)&&(!r||i.context===r)&&u(this,s);else{for(var c=0,a=[],l=i.length;c<l;c++)(i[c].fn!==t||o&&!i[c].once||r&&i[c].context!==r)&&a.push(i[c]);a.length?this._events[s]=1===a.length?a[0]:a:u(this,s)}return this},c.prototype.removeAllListeners=function(e){var t;return e?this._events[t=n?n+e:e]&&u(this,t):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,typeof t<"u"&&(t.exports=c)}),ye={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},ve="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},ge=ve,Pe=function(e){let t={exports:{}};return function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r}=ye,n=(t=e.exports={}).re=[],o=t.src=[],s=t.t={},i=0,u=(e,t,r)=>{let u=i++;ge(u,t),s[e]=u,o[u]=t,n[u]=new RegExp(t,r?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),u("FULL",`^${o[s.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),u("LOOSE",`^${o[s.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),u("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),u("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),u("COERCERTL",o[s.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",u("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",u("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0.0.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(t,t.exports),t.exports}(),be=/^[0-9]+$/,Ae=(e,t)=>{let r=be.test(e),n=be.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},Ee={compareIdentifiers:Ae,rcompareIdentifiers:(e,t)=>Ae(t,e)},{MAX_LENGTH:we,MAX_SAFE_INTEGER:Ie}=ye,{re:je,t:_e}=Pe,{compareIdentifiers:Se}=Ee,Oe=class{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Oe){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>we)throw new TypeError(`version is longer than ${we} characters`);ge("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?je[_e.LOOSE]:je[_e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ie||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ie||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ie||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=r[4]?r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<Ie)return t}return e}):[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ge("SemVer.compare",this.version,this.options,e),!(e instanceof Oe)){if("string"==typeof e&&e===this.version)return 0;e=new Oe(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Oe||(e=new Oe(e,this.options)),Se(this.major,e.major)||Se(this.minor,e.minor)||Se(this.patch,e.patch)}comparePre(e){if(e instanceof Oe||(e=new Oe(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],n=e.prerelease[t];if(ge("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return Se(r,n)}while(++t)}compareBuild(e){e instanceof Oe||(e=new Oe(e,this.options));let t=0;do{let r=this.build[t],n=e.build[t];if(ge("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return Se(r,n)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},Ce=(e,t,r)=>new Oe(e,r).compare(new Oe(t,r)),Te=(e,t,r,n)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return((e,t,r)=>0===Ce(e,t,r))(e,r,n);case"!=":return((e,t,r)=>0!==Ce(e,t,r))(e,r,n);case">":return((e,t,r)=>Ce(e,t,r)>0)(e,r,n);case">=":return((e,t,r)=>Ce(e,t,r)>=0)(e,r,n);case"<":return((e,t,r)=>Ce(e,t,r)<0)(e,r,n);case"<=":return((e,t,r)=>Ce(e,t,r)<=0)(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}},Ne=Symbol("SemVer ANY"),Le=class{static get ANY(){return Ne}constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Le){if(e.loose===!!t.loose)return e;e=e.value}ge("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.value=this.semver===Ne?"":this.operator+this.semver.version,ge("comp",this)}parse(e){let t=e.match(this.options.loose?Re[xe.COMPARATORLOOSE]:Re[xe.COMPARATOR]);if(!t)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==t[1]?t[1]:"","="===this.operator&&(this.operator=""),this.semver=t[2]?new Oe(t[2],this.options.loose):Ne}toString(){return this.value}test(e){if(ge("Comparator.test",e,this.options.loose),this.semver===Ne||e===Ne)return!0;if("string"==typeof e)try{e=new Oe(e,this.options)}catch(e){return!1}return Te(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Le))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new ke(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new ke(this.value,t).test(e.semver);let r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),n=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),i=Te(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=Te(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||n||o&&s||i||u}},{re:Re,t:xe}=Pe,ke=class{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ke)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ke(e.raw,t);if(e instanceof Le)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=(e=e.trim()).replace(t?Me[Ue.HYPHENRANGELOOSE]:Me[Ue.HYPHENRANGE],Qe(this.options.includePrerelease)),ge("hyphen replace",e),e=e.replace(Me[Ue.COMPARATORTRIM],De),ge("comparator trim",e,Me[Ue.COMPARATORTRIM]),e=(e=(e=e.replace(Me[Ue.TILDETRIM],qe)).replace(Me[Ue.CARETTRIM],$e)).split(/\s+/).join(" ");let r=t?Me[Ue.COMPARATORLOOSE]:Me[Ue.COMPARATOR];return e.split(" ").map(e=>Fe(e,this.options)).join(" ").split(/\s+/).map(e=>Ye(e,this.options)).filter(this.options.loose?e=>!!e.match(r):()=>!0).map(e=>new Le(e,this.options))}intersects(e,t){if(!(e instanceof ke))throw new TypeError("a Range is required");return this.set.some(r=>Be(r,t)&&e.set.some(e=>Be(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new Oe(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(Ze(this.set[t],e,this.options))return!0;return!1}},{re:Me,t:Ue,comparatorTrimReplace:De,tildeTrimReplace:qe,caretTrimReplace:$e}=Pe,Be=(e,t)=>{let r=!0,n=e.slice(),o=n.pop();for(;r&&n.length;)r=n.every(e=>o.intersects(e,t)),o=n.pop();return r},Fe=(e,t)=>(ge("comp",e,t),e=ze(e,t),ge("caret",e),e=Ve(e,t),ge("tildes",e),e=Je(e,t),ge("xrange",e),e=Ke(e,t),ge("stars",e),e),We=e=>!e||"x"===e.toLowerCase()||"*"===e,Ve=(e,t)=>e.trim().split(/\s+/).map(e=>Ge(e,t)).join(" "),Ge=(e,t)=>e.replace(t.loose?Me[Ue.TILDELOOSE]:Me[Ue.TILDE],(t,r,n,o,s)=>{let i;return ge("tilde",e,t,r,n,o,s),We(r)?i="":We(n)?i=`>=${r}.0.0 <${+r+1}.0.0-0`:We(o)?i=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:s?(ge("replaceTilde pr",s),i=`>=${r}.${n}.${o}-${s} <${r}.${+n+1}.0-0`):i=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,ge("tilde return",i),i}),ze=(e,t)=>e.trim().split(/\s+/).map(e=>He(e,t)).join(" "),He=(e,t)=>{ge("caret",e,t);let r=t.includePrerelease?"-0":"";return e.replace(t.loose?Me[Ue.CARETLOOSE]:Me[Ue.CARET],(t,n,o,s,i)=>{let u;return ge("caret",e,t,n,o,s,i),We(n)?u="":We(o)?u=`>=${n}.0.0${r} <${+n+1}.0.0-0`:We(s)?u="0"===n?`>=${n}.${o}.0${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.0${r} <${+n+1}.0.0-0`:i?(ge("replaceCaret pr",i),u="0"===n?"0"===o?`>=${n}.${o}.${s}-${i} <${n}.${o}.${+s+1}-0`:`>=${n}.${o}.${s}-${i} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${s}-${i} <${+n+1}.0.0-0`):(ge("no pr"),u="0"===n?"0"===o?`>=${n}.${o}.${s}${r} <${n}.${o}.${+s+1}-0`:`>=${n}.${o}.${s}${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${s} <${+n+1}.0.0-0`),ge("caret return",u),u})},Je=(e,t)=>(ge("replaceXRanges",e,t),e.split(/\s+/).map(e=>Xe(e,t)).join(" ")),Xe=(e,t)=>(e=e.trim()).replace(t.loose?Me[Ue.XRANGELOOSE]:Me[Ue.XRANGE],(r,n,o,s,i,u)=>{ge("xRange",e,r,n,o,s,i,u);let c=We(o),a=c||We(s),l=a||We(i);return"="===n&&l&&(n=""),u=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&l?(a&&(s=0),i=0,">"===n?(n=">=",a?(o=+o+1,s=0,i=0):(s=+s+1,i=0)):"<="===n&&(n="<",a?o=+o+1:s=+s+1),"<"===n&&(u="-0"),r=`${n+o}.${s}.${i}${u}`):a?r=`>=${o}.0.0${u} <${+o+1}.0.0-0`:l&&(r=`>=${o}.${s}.0${u} <${o}.${+s+1}.0-0`),ge("xRange return",r),r}),Ke=(e,t)=>(ge("replaceStars",e,t),e.trim().replace(Me[Ue.STAR],"")),Ye=(e,t)=>(ge("replaceGTE0",e,t),e.trim().replace(Me[t.includePrerelease?Ue.GTE0PRE:Ue.GTE0],"")),Qe=e=>(t,r,n,o,s,i,u,c,a,l,f,h,d)=>`${r=We(n)?"":We(o)?`>=${n}.0.0${e?"-0":""}`:We(s)?`>=${n}.${o}.0${e?"-0":""}`:i?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=We(a)?"":We(l)?`<${+a+1}.0.0-0`:We(f)?`<${a}.${+l+1}.0-0`:h?`<=${a}.${l}.${f}-${h}`:e?`<${a}.${l}.${+f+1}-0`:`<=${c}`}`.trim(),Ze=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(ge(e[r].semver),e[r].semver!==Le.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0},et=(e,t,r)=>{try{t=new ke(t,r)}catch(e){return!1}return t.test(e)},{MAX_LENGTH:tt}=ye,{re:rt,t:nt}=Pe,{re:ot,t:st}=Pe,it=(e,t)=>{if(e instanceof Oe)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=ot[st.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),ot[st.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;ot[st.COERCERTL].lastIndex=-1}else r=e.match(ot[st.COERCE]);return null===r?null:((e,t)=>{if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Oe)return e;if("string"!=typeof e||e.length>tt||!(t.loose?rt[nt.LOOSE]:rt[nt.FULL]).test(e))return null;try{return new Oe(e,t)}catch(e){return null}})(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function ut(e){return String.fromCharCode(parseInt(e.slice(1),16))}function ct(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function at(e){return function(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,ut))}(JSON.stringify(e))}function lt(e){return JSON.parse(function(e){return decodeURIComponent(Array.from(atob(e),ct).join(""))}(e))}function ft(e){return void 0===e}function ht(e){return function(e){return null===e}(e)||ft(e)}function dt(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var mt={},pt={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},yt=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,yt.prototype)}},vt=class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(null==e?void 0:e.code);this.rawMessage=(null==e?void 0:e.message)||"Internal error",this.code=function(e){return!ht(e)&&"number"==typeof e&&Object.values($).includes(e)}(t)?t:$.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(null==e?void 0:e.data)||void 0,Object.setPrototypeOf(this,vt.prototype)}},gt=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},Pt=class extends Error{constructor(e,t,r,n){super(`Magic Extension Error (${e.name}): [${t}] ${r}`),this.code=t,this.rawMessage=r,this.data=n,this.__proto__=Error,Object.setPrototypeOf(this,Pt.prototype)}},bt=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}log(){console.warn(this.message)}};function At(){return new yt(D.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function Et(){return new yt(D.MalformedResponse,"Response from the Magic iframe is malformed.")}function wt(e){return new yt(D.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function It(e){let t=`Some extensions are incompatible with \`${mt.sdkName}@${mt.version}\`:`;return e.filter(e=>null!=e.compat).forEach(e=>{let r=e.compat[mt.sdkName];"string"==typeof r?t+=`\n  - Extension \`${e.name}\` supports version(s) \`${r}\``:r||(t+=`\n  - Extension \`${e.name}\` does not support ${mt.platform} environments.`)}),new yt(D.IncompatibleExtensions,t)}function jt(e){let{method:t,removalVersions:r,useInstead:n}=e;return new gt(q.DeprecationNotice,`\`${t}\` will be removed from \`${mt.sdkName}\` in version \`${r[mt.sdkName]}\`.${n?` Use \`${n}\` instead.`:""}`)}var _t=function*(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}();function St(){return _t.next().value}var Ot=Symbol("Payload pre-processed by Magic SDK");function Ct(e){return Object.defineProperty(e,Ot,{value:!0,enumerable:!1}),e}function Tt(e){var t,r,n;return function(e){return!!e[Ot]}(e)||(e.jsonrpc=null!=(t=e.jsonrpc)?t:"2.0",e.id=St(),e.method=null!=(r=e.method)?r:"noop",e.params=null!=(n=e.params)?n:[],Ct(e)),e}function Nt(e,t=[]){return Ct({params:t,method:e,jsonrpc:"2.0",id:St()})}var Lt=class{constructor(e){e instanceof Lt?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):function(e){return!ht(e)&&!(ft(e.jsonrpc)||ft(e.id)||ft(e.result)&&ft(e.error))}(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return null!=this._error}get hasResult(){return void 0!==this._result}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},Rt=((e,t,r)=>(r=null!=e?te(ce(e)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of ie(t))!ae.call(e,r)&&void 0!==r&&re(e,r,{get:()=>t[r],enumerable:!(n=oe(t,r))||n.enumerable});return e})(e&&e.__esModule?r:re(r,"default",{value:e,enumerable:!0}),e)))(pe()),xt=class extends Rt.default{};function kt(){let e=new xt;return{emitter:e,createChainingEmitterMethod:(t,r)=>(...n)=>(e[t].apply(e,n),r),createBoundEmitterMethod:t=>(...r)=>e[t].apply(e,r)}}var Mt=Symbol("isPromiEvent");function Ut(e){return!!e[Mt]}function Dt(e){let t=qt(e),{createBoundEmitterMethod:r,createChainingEmitterMethod:n}=kt(),o=Symbol("Promise.then"),s=Symbol("Promise.catch"),i=Symbol("Promise.finally"),u=(e,t)=>(...r)=>{let n=t[e].apply(t,r);return c(n)},c=e=>Object.assign(e,{[Mt]:!0,[o]:e[o]||e.then,[s]:e[s]||e.catch,[i]:e[i]||e.finally,then:u(o,e),catch:u(s,e),finally:u(i,e),on:n("on",e),once:n("once",e),addListener:n("addListener",e),off:n("off",e),removeListener:n("removeListener",e),removeAllListeners:n("removeAllListeners",e),emit:r("emit"),eventNames:r("eventNames"),listeners:r("listeners"),listenerCount:r("listenerCount")}),a=c(t.then(e=>(a.emit("done",e),a.emit("settled"),e),e=>{throw a.emit("error",e),a.emit("settled"),e}));return a}function qt(e){return new Promise((t,r)=>{let n=e(t,r);Promise.resolve(n).catch(r)})}var $t,Bt=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(G.MAGIC_HANDLE_REQUEST,Tt(e)),r=Dt((e,r)=>{t.then(t=>{if(n(),t.hasError)r(new vt(t.payload.error));else{if(!t.hasResult)throw Et();e(t.payload.result)}}).catch(e=>{n(),r(e)})}),n=this.overlay.on(V.MAGIC_HANDLE_EVENT,t=>{var n;let{response:o}=t.data;if(o.id===e.id&&(null==(n=o.result)?void 0:n.event)){let{event:e,params:t=[]}=o.result;r.emit(e,...t)}});return r}createIntermediaryEvent(e,t){return r=>{let n=Nt(W.IntermediaryEvent,[{payloadId:t,eventType:e,args:r}]);this.request(n)}}},Ft={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},Wt=class extends Bt{loginWithMagicLink(e){let t="@magic-sdk/react-native"===mt.sdkName||"@magic-sdk/react-native-bare"===mt.sdkName||"@magic-sdk/react-native-expo"===mt.sdkName;if(t&&function(e,t){let[r]=e.split(".").map(Number);return r>=19}(mt.version))throw new Error("loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.");jt({method:"auth.loginWithMagicLink()",removalVersions:Ft,useInstead:t?"@magic-ext/auth auth.loginWithEmailOTP()":"@magic-ext/auth auth.loginWithMagicLink()"}).log();let{email:r,showUI:n=!0,redirectURI:o}=e,s=Nt(this.sdk.testMode?W.LoginWithMagicLinkTestMode:W.LoginWithMagicLink,[{email:r,showUI:n,redirectURI:o}]);return this.request(s)}loginWithSMS(e){jt({method:"auth.loginWithSMS()",removalVersions:Ft,useInstead:"@magic-ext/auth auth.loginWithSMS()"}).log();let{phoneNumber:t}=e,r=Nt(this.sdk.testMode?W.LoginWithSmsTestMode:W.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(r)}loginWithEmailOTP(e){let{email:t,showUI:r,deviceCheckUI:n}=e,o=Nt(this.sdk.testMode?W.LoginWithEmailOTPTestMode:W.LoginWithEmailOTP,[{email:t,showUI:r,deviceCheckUI:n}]),s=this.request(o);return!n&&s&&s.on(Y.Retry,()=>{this.createIntermediaryEvent(Y.Retry,o.id)()}),!r&&s&&(s.on(X.VerifyEmailOtp,e=>{this.createIntermediaryEvent(X.VerifyEmailOtp,o.id)(e)}),s.on(X.Cancel,()=>{this.createIntermediaryEvent(X.Cancel,o.id)()})),s}loginWithCredential(e){jt({method:"auth.loginWithCredential()",removalVersions:Ft,useInstead:"@magic-ext/auth auth.loginWithCredential()"}).log();let t=null!=e?e:"";if(!e&&"web"===mt.platform){t=window.location.search;let e=window.location.origin+window.location.pathname;window.history.replaceState(null,"",e)}let r=Nt(this.sdk.testMode?W.LoginWithCredentialTestMode:W.LoginWithCredential,[t]);return this.request(r)}setAuthorizationToken(e){jt({method:"auth.setAuthorizationToken()",removalVersions:Ft,useInstead:"@magic-ext/auth auth.setAuthorizationToken()"}).log();let t=Nt(W.SetAuthorizationToken,[{jwt:e}]);return this.request(t)}updateEmailWithUI(e){jt({method:"auth.updateEmailWithUI()",removalVersions:Ft,useInstead:"@magic-ext/auth auth.updateEmailWithUI()"}).log();let{email:t,showUI:r=!0}=e,n=Nt(this.sdk.testMode?W.UpdateEmailTestMode:W.UpdateEmail,[{email:t,showUI:r}]);return this.request(n)}updatePhoneNumberWithUI(){jt({method:"auth.updatePhoneNumberWithUI()",removalVersions:Ft,useInstead:"@magic-ext/auth auth.updatePhoneNumberWithUI()"}).log();let e=Nt(this.sdk.testMode?W.UpdatePhoneNumberTestMode:W.UpdatePhoneNumber);return this.request(e)}},Vt={};function Gt(e){return(...t)=>me(this,null,function*(){return $t||($t=yield mt.configureStorage()),yield $t.ready(),$t[e](...t)})}((e,t)=>{for(var r in t)re(e,r,{get:t[r],enumerable:!0})})(Vt,{clear:()=>Xt,getItem:()=>zt,iterate:()=>Zt,key:()=>Yt,keys:()=>Qt,length:()=>Kt,removeItem:()=>Jt,setItem:()=>Ht});var zt=Gt("getItem"),Ht=Gt("setItem"),Jt=Gt("removeItem"),Xt=Gt("clear"),Kt=Gt("length"),Yt=Gt("key"),Qt=Gt("keys"),Zt=Gt("iterate"),er=class extends Bt{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}getIdToken(e){let t=Nt(this.sdk.testMode?W.GetIdTokenTestMode:W.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=Nt(this.sdk.testMode?W.GenerateIdTokenTestMode:W.GenerateIdToken,[e]);return this.request(t)}getInfo(){return me(this,null,function*(){let e=yield zt(this.localForageKey),t=Nt(W.GetInfo,[{walletType:e}]);return this.request(t)})}isLoggedIn(){let e=Nt(this.sdk.testMode?W.IsLoggedInTestMode:W.IsLoggedIn);return this.request(e)}logout(){Jt(this.localForageKey);let e=Nt(this.sdk.testMode?W.LogoutTestMode:W.Logout);return this.request(e)}requestInfoWithUI(e){let t=Nt(W.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}showSettings(e){let t=Nt(this.sdk.testMode?W.UserSettingsTestMode:W.UserSettings,[e]);return this.request(t)}recoverAccount(e){let t=Nt(this.sdk.testMode?W.RecoverAccountTestMode:W.RecoverAccount,[e]);return this.request(t)}getMetadata(){jt({method:"user.getMetadata()",removalVersions:Ft,useInstead:"user.getInfo()"}).log();let e=Nt(this.sdk.testMode?W.GetMetadataTestMode:W.GetMetadata);return this.request(e)}updateEmail(e){jt({method:"user.updateEmail()",removalVersions:Ft,useInstead:"auth.updateEmailWithUI()"}).log();let{email:t,showUI:r=!0}=e,n=Nt(this.sdk.testMode?W.UpdateEmailTestMode:W.UpdateEmail,[{email:t,showUI:r}]);return this.request(n)}updatePhoneNumber(){jt({method:"user.updatePhoneNumber()",removalVersions:Ft,useInstead:"auth.updatePhoneNumberWithUI()"}).log();let e=Nt(this.sdk.testMode?W.UpdatePhoneNumberTestMode:W.UpdatePhoneNumber);return this.request(e)}};function tr(e,t){return t?new URL(e,t):new URL(e)}function rr(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=15&e[6]|64,e[8]=191&e[8]|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var nr="STORE_KEY_PRIVATE_KEY",or="STORE_KEY_PUBLIC_JWK",sr="ECDSA",ir="P-256",ur={name:sr,namedCurve:ir},cr={name:sr,namedCurve:ir};function ar(e){return lr(function(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(parseInt(t,16)))}(e))}function lr(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}var fr=class extends Bt{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}connectWithUI(){let e=Dt((t,r)=>me(this,null,function*(){try{if(this.isMetaMaskBrowser()&&(yield this.isWalletEnabled(B.MetaMask))){let e=yield this.autoConnectIfWalletBrowser(B.MetaMask);return void t(e)}if(this.isCoinbaseWalletBrowser()&&(yield this.isWalletEnabled(B.CoinbaseWallet))){let e=yield this.autoConnectIfWalletBrowser(B.CoinbaseWallet);return void t(e)}let n=this.getUserEnv(),o=Nt(W.Login,[n]),s=this.request(o);s.on(F.WalletSelected,e=>this.handleWalletSelected(de(he({},e),{payloadId:o.id}))),s.on("id-token-created",t=>{e.emit("id-token-created",t)});let i=yield s;i.error&&r(i),t(i)}catch(e){r(e)}}));return e}showUI(){return this.request(Nt(W.ShowUI))}showAddress(){return this.request(Nt(W.ShowAddress))}showSendTokensUI(){return this.request(Nt(W.ShowSendTokensUI))}showOnRamp(){return this.request(Nt(W.ShowOnRamp))}showNFTs(){return this.request(Nt(W.ShowNFTs))}showBalances(){return this.request(Nt(W.ShowBalances))}sendGaslessTransaction(e,t){return this.request(Nt(W.SendGaslessTransaction,[[e,t]]))}getInfo(){return me(this,null,function*(){jt({method:"wallet.getInfo()",removalVersions:Ft,useInstead:"user.getInfo()"}).log();let e=yield zt(this.localForageKey),t=Nt(W.GetInfo,[{walletType:e}]);return this.request(t)})}disconnect(){jt({method:"wallet.disconnect()",removalVersions:Ft,useInstead:"user.logout()"}).log(),Jt(this.localForageKey);let e=Nt(W.Disconnect);return this.request(e)}requestUserInfoWithUI(e){jt({method:"wallet.requestUserInfoWithUI()",removalVersions:Ft,useInstead:"user.requestUserInfoWithUI()"}).log();let t=Nt(W.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}getProvider(){return me(this,null,function*(){switch(yield zt(this.localForageKey)){case B.MetaMask:return this.getMetaMaskProvider();case B.CoinbaseWallet:return this.getCoinbaseProvider();default:return this.sdk.rpcProvider}})}isMetaMaskInstalled(){var e,t,r;return(null==(e=window.ethereum)?void 0:e.isMetaMask)||!(null==(r=null==(t=window.ethereum)?void 0:t.providers)||!r.find(e=>null==e?void 0:e.isMetaMask))}isMetaMaskBrowser(){return this.isMobile()&&this.isMetaMaskInstalled()}getMetaMaskProvider(){var e,t;return(null==(t=null==(e=window.ethereum)?void 0:e.providers)?void 0:t.find(e=>null==e?void 0:e.isMetaMask))||window.ethereum}connectToMetaMask(){if(this.isMobile()&&!this.isMetaMaskInstalled()){let e=`https://metamask.app.link/dapp/${window.location.href.replace(/(^\w+:|^)\/\//,"")}`;window.location.href=e}return this.getMetaMaskProvider().request({method:"eth_requestAccounts"})}isCoinbaseWalletInstalled(){var e,t,r;return(null==(e=window.ethereum)?void 0:e.isCoinbaseWallet)||!(null==(r=null==(t=window.ethereum)?void 0:t.providers)||!r.find(e=>null==e?void 0:e.isCoinbaseWallet))}isCoinbaseWalletBrowser(){var e;return!(null==(e=window.ethereum)||!e.isCoinbaseBrowser)}getCoinbaseProvider(){var e,t;return(null==(t=null==(e=window.ethereum)?void 0:e.providers)?void 0:t.find(e=>null==e?void 0:e.isCoinbaseWallet))||window.ethereum}connectToCoinbaseWallet(){if(this.isMobile()&&!this.isCoinbaseWalletBrowser()){let e=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(window.location.href)}`;window.location.href=e}return this.getCoinbaseProvider().request({method:"eth_requestAccounts"})}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Silk|Opera Mini/i.test(navigator.userAgent)}getUserEnv(){return{env:{isMetaMaskInstalled:this.isMetaMaskInstalled(),isCoinbaseWalletInstalled:this.isCoinbaseWalletInstalled()}}}connectToThirdPartyWallet(e){switch(e){case B.MetaMask:return this.connectToMetaMask();case B.CoinbaseWallet:return this.connectToCoinbaseWallet();default:throw new Error(`Invalid provider: ${e}. Must be one of "metamask" or "coinbase_wallet".`)}}isWalletEnabled(e){let t=Nt("mc_is_wallet_enabled",[{wallet:e}]);return this.request(t)}handleWalletSelected(e){return me(this,null,function*(){try{let t=yield this.connectToThirdPartyWallet(e.wallet);yield Ht(this.localForageKey,e.wallet),this.createIntermediaryEvent(F.WalletConnected,e.payloadId)(t)}catch(t){console.error(t),this.createIntermediaryEvent(F.WalletRejected,e.payloadId)()}})}autoConnectIfWalletBrowser(e){return me(this,null,function*(){let t;e===B.MetaMask&&(t=yield this.getMetaMaskProvider().request({method:"eth_requestAccounts"})),e===B.CoinbaseWallet&&(t=yield this.getCoinbaseProvider().request({method:"eth_requestAccounts"})),yield Ht(this.localForageKey,e);let r=Nt(W.AutoConnect,[{wallet:e,address:t}]);return this.request(r)})}},{createBoundEmitterMethod:hr,createChainingEmitterMethod:dr}=kt(),mr=class extends Bt{constructor(){super(...arguments),this.isMagic=!0,this.on=dr("on",this),this.once=dr("once",this),this.addListener=dr("addListener",this),this.off=dr("off",this),this.removeListener=dr("removeListener",this),this.removeAllListeners=dr("removeAllListeners",this),this.emit=hr("emit"),this.eventNames=hr("eventNames"),this.listeners=hr("listeners"),this.listenerCount=hr("listenerCount")}sendAsync(e,t){if(!t)throw function(e){return new yt(D.InvalidArgument,`Invalid ${(e=>{let t=e+1,r=t%10,n=t%100;return 1===r&&11!==n?`${t}st`:2===r&&12!==n?`${t}nd`:3===r&&13!==n?`${t}rd`:`${t}th`})(e.argument)} argument given to \`${e.procedure}\`.\n  Expected: \`${e.expected}\`\n  Received: \`${e.received}\``)}({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:null===t?"null":typeof t});if(Array.isArray(e))this.overlay.post(G.MAGIC_HANDLE_REQUEST,e.map(e=>{let t=Tt(e);return this.prefixPayloadMethodForTestMode(t),t})).then(e=>{t(null,e.map(e=>de(he({},e.payload),{error:e.hasError?new vt(e.payload.error):null})))});else{let r=Tt(e);this.prefixPayloadMethodForTestMode(r),this.overlay.post(G.MAGIC_HANDLE_REQUEST,r).then(e=>{t(e.hasError?new vt(e.payload.error):null,e.payload)})}}send(e,t){if("string"==typeof e){let r=Nt(e,Array.isArray(t)?t:[]);return this.request(r)}if(Array.isArray(e)||t)return void this.sendAsync(e,t);let r=new gt(q.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.");return r.log(),new Lt(e).applyError({code:-32603,message:r.rawMessage}).payload}enable(){let e=Nt(W.Login);return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){this.sdk.testMode&&(e.method=`testMode/eth/${e.method}`)}},pr=["request","overlay","sdk"];function yr(e){let t=Object.getPrototypeOf(e),r=[t];for(;t!==Bt.prototype;)t=Object.getPrototypeOf(t),r.push(t);return r}var vr=class extends Bt{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:Dt,isPromiEvent:Ut,encodeJSON:at,decodeJSON:lt,createJsonRpcRequestPayload:Nt,standardizeJsonRpcRequestPayload:Tt,storage:Vt};let e=[this,...yr(this)];pr.forEach(t=>{let r=e.map(e=>Object.getOwnPropertyDescriptor(e,t)),n=r.findIndex(e=>!!e),o=r[n];o&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:o,isPrototypeField:n>0}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw wt(t)}}))})}init(e){this.__is_initialized__||(pr.forEach(e=>{if(this.__sdk_access_field_descriptors__.has(e)){let{descriptor:t,isPrototypeField:r}=this.__sdk_access_field_descriptors__.get(e);r?delete this[e]:Object.defineProperty(this,e,t)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:r,useInstead:n}=e;return new bt(this,"DEPRECATION_NOTICE",`\`${t}\` will be removed from this Extension in version \`${r}\`.${n?` Use \`${n}\` instead.`:""}`)}createWarning(e,t){return new bt(this,e,t)}createError(e,t,r){return new Pt(this,e,t,r)}},gr=class extends vr{};gr.Internal=class extends vr{},gr.Anonymous="anonymous extension";var Pr=class extends Bt{purchase(e){let t=Nt(W.NFTPurchase,[e]);return this.request(t)}checkout(e){let t=Nt(W.NFTCheckout,[e]);return this.request(t)}transfer(e){let t=Nt(W.NFTTransfer,[e]);return this.request(t)}};function br(e){return!e.compat||null==e.compat[mt.sdkName]||("string"==typeof e.compat[mt.sdkName]?et(it(mt.version),e.compat[mt.sdkName]):!!e.compat[mt.sdkName])}function Ar(e){var t;let r=null!=(t=null==e?void 0:e.extensions)?t:[],n={},o=[];if(Array.isArray(r)?r.forEach(e=>{br(e)?(e.init(this),(e.name||e.name!==gr.Anonymous)&&(this[e.name]=e),e instanceof gr.Internal&&(dt(e.config)||(n[e.name]=e.config))):o.push(e)}):Object.keys(r).forEach(e=>{if(br(r[e])){r[e].init(this);let t=r[e];this[e]=t,t instanceof gr.Internal&&(dt(t.config)||(n[r[e].name]=t.config))}else o.push(r[e])}),o.length)throw It(o);return n}var Er=class{constructor(e,t){var r;if(this.apiKey=e,!e)throw At();"react-native"===mt.platform&&(null==t?void 0:t.endpoint)&&new gt(q.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${mt.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`).log();let{defaultEndpoint:n,version:o}=mt;this.testMode=!(null==t||!t.testMode),this.endpoint=tr(null!=(r=null==t?void 0:t.endpoint)?r:n).origin,this.auth=new Wt(this),this.user=new er(this),this.wallet=new fr(this),this.nft=new Pr(this),this.rpcProvider=new mr(this);let s=Ar.call(this,t);this.parameters=at(he({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:null==t?void 0:t.network,host:tr(this.endpoint).host,sdk:pt[mt.sdkName],version:o,ext:dt(s)?void 0:s,locale:(null==t?void 0:t.locale)||"en_US"},mt.bundleId?{bundleId:mt.bundleId}:{}))}get overlay(){if(!Er.__overlays__.has(this.parameters)){let e=new mt.ViewController(this.endpoint,this.parameters);e.init(),Er.__overlays__.set(this.parameters,e)}return Er.__overlays__.get(this.parameters)}preload(){return me(this,null,function*(){yield this.overlay.ready})}},wr=Er;wr.__overlays__=new Map;var Ir,jr=class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,t){return me(this,null,function*(){return qt(r=>me(this,null,function*(){yield this.ready;let n=[],o=Array.isArray(t)?t.map(e=>e.id):[],s=yield function(e,t){return me(this,null,function*(){let r,n=yield zt("rt");if("web"===mt.platform)try{r=yield function(){return me(this,null,function*(){let e=yield function(){return me(this,null,function*(){if(function(){let e="undefined"!=typeof window&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}())return(yield zt(or))||(yield function(){return me(this,null,function*(){let e=null,{subtle:t}=window.crypto,r=yield t.generateKey(ur,!0,["sign"]),n=yield t.exportKey("jwk",r.privateKey);e=yield t.exportKey("jwk",r.publicKey);let o=yield t.importKey("jwk",n,cr,!1,["sign"]);yield Ht(nr,o),yield Ht(or,e)})}()),zt(or);console.info("webcrypto is not supported")})}();if(!e)return void console.info("unable to create public key or webcrypto is unsupported");let{subtle:t}=window.crypto,r=yield zt(nr);if(!r||!t)return void console.info("unable to find private key or webcrypto unsupported");let n={iat:Math.floor((new Date).getTime()/1e3),jti:rr()},o=ar(JSON.stringify({typ:"dpop+jwt",alg:"ES256",jwk:e})),s=ar(JSON.stringify(n)),i=function(e){return(new TextEncoder).encode(e)}(`${o}.${s}`),u={name:sr,hash:{name:"SHA-256"}},c=function(e){let t="";return e.forEach(e=>{t+=String.fromCharCode(e)}),lr(t)}(new Uint8Array(yield t.sign(u,r,i)));return`${o}.${s}.${c}`})}()}catch(e){console.error("webcrypto error",e)}return r?n?{msgType:e,payload:t,jwt:r,rt:n}:{msgType:e,payload:t,jwt:r}:{msgType:e,payload:t}})}(`${e}-${this.parameters}`,t);yield this._post(s);let i=this.on(V.MAGIC_HANDLE_RESPONSE,(e=>s=>{let{id:i,response:u}=function(e,t){var r;let n=null==(r=t.data.response)?void 0:r.id,o=function(e,t){return t&&Array.isArray(e)?e.find(e=>e.id===t):e}(e,n);return n&&o?{id:n,response:new Lt(o).applyResult(t.data.response.result).applyError(t.data.response.error)}:{}}(t,s);(function(e){me(this,null,function*(){!e.data.rt||(yield Ht("rt",e.data.rt))})})(s),i&&u&&Array.isArray(t)&&o.includes(i)?(n.push(u),n.length===t.length&&(e(),r(n))):i&&u&&!Array.isArray(t)&&i===t.id&&(e(),r(u))})(()=>i()))}))})}on(e,t){let r=t.bind(window),n=t=>{t.data.msgType===`${e}-${this.parameters}`&&r(t)};return this.messageHandlers.add(n),()=>this.messageHandlers.delete(n)}waitForReady(){return new Promise(e=>{this.on(V.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(V.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(V.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}},_r=Object.create,Sr=Object.defineProperty,Or=Object.getOwnPropertyDescriptor,Cr=Object.getOwnPropertyNames,Tr=Object.getPrototypeOf,Nr=Object.prototype.hasOwnProperty,Lr=(Ir=function(e){if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')},"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(Ir,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):Ir),Rr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),xr=(e,t,r)=>(r=null!=e?_r(Tr(e)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of Cr(t))!Nr.call(e,r)&&void 0!==r&&Sr(e,r,{get:()=>t[r],enumerable:!(n=Or(t,r))||n.enumerable});return e})(!t&&e&&e.__esModule?r:Sr(r,"default",{value:e,enumerable:!0}),e)),kr=(e,t,r)=>new Promise((n,o)=>{var s=e=>{try{u(r.next(e))}catch(e){o(e)}},i=e=>{try{u(r.throw(e))}catch(e){o(e)}},u=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,i);u((r=r.apply(e,t)).next())}),Mr=Rr((e,t)=>{!function(r){"object"==typeof e&&typeof t<"u"?t.exports=r():"function"==typeof define&&define.amd?define([],r):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).localforage=r()}(function(){return function e(t,r,n){function o(i,u){if(!r[i]){if(!t[i]){var c="function"==typeof Lr&&Lr;if(!u&&c)return c(i,!0);if(s)return s(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){return o(t[i][1][e]||e)},l,l.exports,e,t,r,n)}return r[i].exports}for(var s="function"==typeof Lr&&Lr,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){(function(e){var r,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var o=0,s=new n(l),i=e.document.createTextNode("");s.observe(i,{characterData:!0}),r=function(){i.data=o=++o%2}}else if(!e.setImmediate&&typeof e.MessageChannel<"u"){var u=new e.MessageChannel;u.port1.onmessage=l,r=function(){u.port2.postMessage(0)}}else r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};var c,a=[];function l(){c=!0;for(var e,t,r=a.length;r;){for(t=a,a=[],e=-1;++e<r;)t[e]();r=a.length}c=!1}t.exports=function(e){1===a.push(e)&&!c&&r()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,t,r){var n=e(1);function o(){}var s={},i=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function a(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&d(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,t,r){n(function(){var n;try{n=t(r)}catch(t){return s.reject(e,t)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var r=!1;function n(t){r||(r=!0,s.reject(e,t))}function o(t){r||(r=!0,s.resolve(e,t))}var i=m(function(){t(o,n)});"error"===i.status&&n(i.value)}function m(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}t.exports=a,a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){if("function"!=typeof e&&this.state===u||"function"!=typeof t&&this.state===i)return this;var r=new this.constructor(o);return this.state!==c?f(r,this.state===u?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){s.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},s.resolve=function(e,t){var r=m(h,t);if("error"===r.status)return s.reject(e,r.value);var n=r.value;if(n)d(e,n);else{e.state=u,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},s.reject=function(e,t){e.state=i,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},a.resolve=function(e){return e instanceof this?e:s.resolve(new this(o),e)},a.reject=function(e){var t=new this(o);return s.reject(t,e)},a.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i=new Array(r),u=0,c=-1,a=new this(o);++c<r;)l(e[c],c);return a;function l(e,o){t.resolve(e).then(function(e){i[o]=e,++u===r&&!n&&(n=!0,s.resolve(a,i))},function(e){n||(n=!0,s.reject(a,e))})}},a.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i=-1,u=new this(o);++i<r;)c(e[i]);return u;function c(e){t.resolve(e).then(function(e){n||(n=!0,s.resolve(u,e))},function(e){n||(n=!0,s.reject(u,e))})}}},{1:1}],3:[function(e,t,r){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function s(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}typeof Promise>"u"&&e(3);var i=Promise;function u(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function c(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function a(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",h=void 0,d={},m=Object.prototype.toString,p="readonly",y="readwrite";function v(e){var t=d[e.name],r={};r.promise=new i(function(e,t){r.resolve=e,r.reject=t}),t.deferredOperations.push(r),t.dbReady=t.dbReady?t.dbReady.then(function(){return r.promise}):r.promise}function g(e){var t=d[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function P(e,t){var r=d[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function b(e,t){return new i(function(r,n){if(d[e.name]=d[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);v(e),e.db.close()}var s=[e.name];t&&s.push(e.version);var i=o.open.apply(o,s);t&&(i.onupgradeneeded=function(t){var r=i.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(f)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),n(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},r(t),g(e)}})}function A(e){return b(e,!1)}function E(e){return b(e,!0)}function w(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version>e.db.version;if(e.version<e.db.version&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),n||r){if(r){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function I(e){var t=function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}(atob(e.data));return s([t],{type:e.type})}function j(e){return e&&e.__local_forage_encoded_blob}function _(e){var t=this,r=t._initReady().then(function(){var e=d[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(r,e,e),r}function S(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(o){if(n>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return i.resolve().then(function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),E(e)}).then(function(){return function(e){v(e);for(var t=d[e.name],r=t.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,A(e).then(function(t){return e.db=t,w(e)?E(e):t}).then(function(n){e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n}).catch(function(t){throw P(e,t),t})}(e).then(function(){S(e,t,r,n-1)})}).catch(r);r(o)}}var O={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=d[r.name];o||(d[r.name]=o={forages:[],db:null,dbReady:null,deferredOperations:[]}),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=_);var s=[];function u(){return i.resolve()}for(var c=0;c<o.forages.length;c++){var a=o.forages[c];a!==t&&s.push(a._initReady().catch(u))}var l=o.forages.slice(0);return i.all(s).then(function(){return r.db=o.db,A(r)}).then(function(e){return r.db=e,w(r,t._defaultConfig.version)?E(r):e}).then(function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<l.length;n++){var s=l[n];s!==t&&(s._dbInfo.db=r.db,s._dbInfo.version=r.version)}})},_support:function(){try{if(!o||!o.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function(e,t){var r=this,n=new i(function(t,n){r.ready().then(function(){S(r._dbInfo,p,function(o,s){if(o)return n(o);try{var i=s.objectStore(r._dbInfo.storeName).openCursor(),u=1;i.onsuccess=function(){var r=i.result;if(r){var n=r.value;j(n)&&(n=I(n));var o=e(n,r.key,u++);void 0!==o?t(o):r.continue()}else t()},i.onerror=function(){n(i.error)}}catch(e){n(e)}})}).catch(n)});return u(n,t),n},getItem:function(e,t){var r=this;e=a(e);var n=new i(function(t,n){r.ready().then(function(){S(r._dbInfo,p,function(o,s){if(o)return n(o);try{var i=s.objectStore(r._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),j(e)&&(e=I(e)),t(e)},i.onerror=function(){n(i.error)}}catch(e){n(e)}})}).catch(n)});return u(n,t),n},setItem:function(e,t,r){var n=this;e=a(e);var o=new i(function(r,o){var u;n.ready().then(function(){return u=n._dbInfo,"[object Blob]"===m.call(t)?function(e){return"boolean"==typeof h?i.resolve(h):function(e){return new i(function(t){var r=e.transaction(f,y),n=s([""]);r.objectStore(f).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(e){return h=e})}(u.db).then(function(e){return e?t:function(e){return new i(function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)})}(t)}):t}).then(function(t){S(n._dbInfo,y,function(s,i){if(s)return o(s);try{var u=i.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=u.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),r(t)},i.onabort=i.onerror=function(){o(c.error?c.error:c.transaction.error)}}catch(e){o(e)}})}).catch(o)});return u(o,r),o},removeItem:function(e,t){var r=this;e=a(e);var n=new i(function(t,n){r.ready().then(function(){S(r._dbInfo,y,function(o,s){if(o)return n(o);try{var i=s.objectStore(r._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){n(i.error)},s.onabort=function(){n(i.error?i.error:i.transaction.error)}}catch(e){n(e)}})}).catch(n)});return u(n,t),n},clear:function(e){var t=this,r=new i(function(e,r){t.ready().then(function(){S(t._dbInfo,y,function(n,o){if(n)return r(n);try{var s=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){r(s.error?s.error:s.transaction.error)}}catch(e){r(e)}})}).catch(r)});return u(r,e),r},length:function(e){var t=this,r=new i(function(e,r){t.ready().then(function(){S(t._dbInfo,p,function(n,o){if(n)return r(n);try{var s=o.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){r(s.error)}}catch(e){r(e)}})}).catch(r)});return u(r,e),r},key:function(e,t){var r=this,n=new i(function(t,n){e<0?t(null):r.ready().then(function(){S(r._dbInfo,p,function(o,s){if(o)return n(o);try{var i=s.objectStore(r._dbInfo.storeName),u=!1,c=i.openKeyCursor();c.onsuccess=function(){var r=c.result;r?0===e||u?t(r.key):(u=!0,r.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(e){n(e)}})}).catch(n)});return u(n,t),n},keys:function(e){var t=this,r=new i(function(e,r){t.ready().then(function(){S(t._dbInfo,p,function(n,o){if(n)return r(n);try{var s=o.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];s.onsuccess=function(){var t=s.result;t?(i.push(t.key),t.continue()):e(i)},s.onerror=function(){r(s.error)}}catch(e){r(e)}})}).catch(r)});return u(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r,n=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName),e.name){var s=e.name===n.name&&this._dbInfo.db?i.resolve(this._dbInfo.db):A(e).then(function(t){var r=d[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t});r=s.then(e.storeName?function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;v(e);var n=d[e.name],s=n.forages;t.close();for(var u=0;u<s.length;u++){var c=s[u];c._dbInfo.db=null,c._dbInfo.version=r}var a=new i(function(t,n){var s=o.open(e.name,r);s.onerror=function(e){s.result.close(),n(e)},s.onupgradeneeded=function(){s.result.deleteObjectStore(e.storeName)},s.onsuccess=function(){var e=s.result;e.close(),t(e)}});return a.then(function(e){n.db=e;for(var t=0;t<s.length;t++){var r=s[t];r._dbInfo.db=e,g(r._dbInfo)}}).catch(function(t){throw(P(e,t)||i.resolve()).catch(function(){}),t})}}:function(t){v(e);var r=d[e.name],n=r.forages;t.close();for(var s=0;s<n.length;s++)n[s]._dbInfo.db=null;var u=new i(function(t,r){var n=o.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}});return u.then(function(e){r.db=e;for(var t=0;t<n.length;t++)g(n[t]._dbInfo)}).catch(function(t){throw(P(e,t)||i.resolve()).catch(function(){}),t})})}else r=i.reject("Invalid arguments");return u(r,t),r}},C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=/^~~local_forage_type~([^~]+)~/,N="__lfsc__:",L="arbf",R="blob",x="si08",k="ui08",M="uic8",U="si16",D="si32",q="ur16",$="ui32",B="fl32",F="fl64",W=Object.prototype.toString;function V(e){var t,r,n,o,s,i=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var a=new ArrayBuffer(i),l=new Uint8Array(a);for(t=0;t<u;t+=4)r=C.indexOf(e[t]),n=C.indexOf(e[t+1]),o=C.indexOf(e[t+2]),s=C.indexOf(e[t+3]),l[c++]=r<<2|n>>4,l[c++]=(15&n)<<4|o>>2,l[c++]=(3&o)<<6|63&s;return a}function G(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=C[r[t]>>2],n+=C[(3&r[t])<<4|r[t+1]>>4],n+=C[(15&r[t+1])<<2|r[t+2]>>6],n+=C[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var z={serialize:function(e,t){var r="";if(e&&(r=W.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===W.call(e.buffer))){var n,o=N;e instanceof ArrayBuffer?(n=e,o+=L):(n=e.buffer,"[object Int8Array]"===r?o+=x:"[object Uint8Array]"===r?o+=k:"[object Uint8ClampedArray]"===r?o+=M:"[object Int16Array]"===r?o+=U:"[object Uint16Array]"===r?o+=q:"[object Int32Array]"===r?o+=D:"[object Uint32Array]"===r?o+=$:"[object Float32Array]"===r?o+=B:"[object Float64Array]"===r?o+=F:t(new Error("Failed to get type for BinaryArray"))),t(o+G(n))}else if("[object Blob]"===r){var s=new FileReader;s.onload=function(){var r="~~local_forage_type~"+e.type+"~"+G(this.result);t(N+R+r)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},deserialize:function(e){if(e.substring(0,9)!==N)return JSON.parse(e);var t,r=e.substring(13),n=e.substring(9,13);if(n===R&&T.test(r)){var o=r.match(T);t=o[1],r=r.substring(o[0].length)}var i=V(r);switch(n){case L:return i;case R:return s([i],{type:t});case x:return new Int8Array(i);case k:return new Uint8Array(i);case M:return new Uint8ClampedArray(i);case U:return new Int16Array(i);case q:return new Uint16Array(i);case D:return new Int32Array(i);case $:return new Uint32Array(i);case B:return new Float32Array(i);case F:return new Float64Array(i);default:throw new Error("Unkown type: "+n)}},stringToBuffer:V,bufferToString:G};function H(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function J(e,t,r,n,o,s){e.executeSql(r,n,o,function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,u){u.rows.length?s(e,i):H(e,t,function(){e.executeSql(r,n,o,s)},s)},s):s(e,i)},s)}function X(e,t,r,n){var o=this;e=a(e);var s=new i(function(s,i){o.ready().then(function(){void 0===t&&(t=null);var u=t,c=o._dbInfo;c.serializer.serialize(t,function(t,a){a?i(a):c.db.transaction(function(r){J(r,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){s(u)},function(e,t){i(t)})},function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void s(X.apply(o,[e,u,r,n-1]));i(t)}})})}).catch(i)});return u(s,r),s}var K={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new i(function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction(function(o){H(o,r,function(){t._dbInfo=r,e()},function(e,t){n(t)})},n)});return r.serializer=z,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,n=new i(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){J(r,o,"SELECT * FROM "+o.storeName,[],function(r,n){for(var s=n.rows,i=s.length,u=0;u<i;u++){var c=s.item(u),a=c.value;if(a&&(a=o.serializer.deserialize(a)),void 0!==(a=e(a,c.key,u+1)))return void t(a)}t()},function(e,t){n(t)})})}).catch(n)});return u(n,t),n},getItem:function(e,t){var r=this;e=a(e);var n=new i(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){J(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)},function(e,t){n(t)})})}).catch(n)});return u(n,t),n},setItem:function(e,t,r){return X.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this;e=a(e);var n=new i(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){J(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){n(t)})})}).catch(n)});return u(n,t),n},clear:function(e){var t=this,r=new i(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){J(t,n,"DELETE FROM "+n.storeName,[],function(){e()},function(e,t){r(t)})})}).catch(r)});return u(r,e),r},length:function(e){var t=this,r=new i(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){J(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(t,r){var n=r.rows.item(0).c;e(n)},function(e,t){r(t)})})}).catch(r)});return u(r,e),r},key:function(e,t){var r=this,n=new i(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){J(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)},function(e,t){n(t)})})}).catch(n)});return u(n,t),n},keys:function(e){var t=this,r=new i(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){J(t,n,"SELECT key FROM "+n.storeName,[],function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)},function(e,t){r(t)})})}).catch(r)});return u(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;return n=e.name?new i(function(t){var n;n=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),t(e.storeName?{db:n,storeNames:[e.storeName]}:function(e){return new i(function(t,r){e.transaction(function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(r,n){for(var o=[],s=0;s<n.rows.length;s++)o.push(n.rows.item(s).name);t({db:e,storeNames:o})},function(e,t){r(t)})},function(e){r(e)})})}(n))}).then(function(e){return new i(function(t,r){e.db.transaction(function(n){function o(e){return new i(function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){r(t)})})}for(var s=[],u=0,c=e.storeNames.length;u<c;u++)s.push(o(e.storeNames[u]));i.all(s).then(function(){t()}).catch(function(e){r(e)})},function(e){r(e)})})}):i.reject("Invalid arguments"),u(n,t),n}};function Y(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}var Q={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=Y(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}()||localStorage.length>0?(this._dbInfo=t,t.serializer=z,i.resolve()):i.reject()},_support:function(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then(function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,s=localStorage.length,i=1,u=0;u<s;u++){var c=localStorage.key(u);if(0===c.indexOf(n)){var a=localStorage.getItem(c);if(a&&(a=t.serializer.deserialize(a)),void 0!==(a=e(a,c.substring(o),i++)))return a}}});return u(n,t),n},getItem:function(e,t){var r=this;e=a(e);var n=r.ready().then(function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n});return u(n,t),n},setItem:function(e,t,r){var n=this;e=a(e);var o=n.ready().then(function(){void 0===t&&(t=null);var r=t;return new i(function(o,s){var i=n._dbInfo;i.serializer.serialize(t,function(t,n){if(n)s(n);else try{localStorage.setItem(i.keyPrefix+e,t),o(r)}catch(e){("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&s(e),s(e)}})})});return u(o,r),o},removeItem:function(e,t){var r=this;e=a(e);var n=r.ready().then(function(){localStorage.removeItem(r._dbInfo.keyPrefix+e)});return u(n,t),n},clear:function(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}});return u(r,e),r},length:function(e){var t=this.keys().then(function(e){return e.length});return u(t,e),t},key:function(e,t){var r=this,n=r.ready().then(function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch{t=null}return t&&(t=t.substring(n.keyPrefix.length)),t});return u(n,t),n},keys:function(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var s=localStorage.key(o);0===s.indexOf(e.keyPrefix)&&n.push(s.substring(e.keyPrefix.length))}return n});return u(r,e),r},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,o=this;return n=e.name?new i(function(t){t(e.storeName?Y(e,o._defaultConfig):e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}}):i.reject("Invalid arguments"),u(n,t),n}},Z=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},ee=function(e,t){for(var r=e.length,n=0;n<r;){if(Z(e[n],t))return!0;n++}return!1},te=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},re={},ne={},oe={INDEXEDDB:O,WEBSQL:K,LOCALSTORAGE:Q},se=[oe.INDEXEDDB._driver,oe.WEBSQL._driver,oe.LOCALSTORAGE._driver],ie=["dropInstance"],ue=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ie),ce={description:"",driver:se.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ae(e,t){e[t]=function(){var r=arguments;return e.ready().then(function(){return e[t].apply(e,r)})}}function le(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(arguments[0][r]=te(t[r])?t[r].slice():t[r])}return arguments[0]}var fe=function(){function e(t){for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oe)if(oe.hasOwnProperty(r)){var n=oe[r],o=n._driver;this[r]=o,re[o]||this.defineDriver(n)}this._defaultConfig=le({},ce),this._config=le({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(typeof e>"u"?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new i(function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);for(var s=ue.concat("_initStorage"),c=0,a=s.length;c<a;c++){var l=s[c];if((!ee(ie,l)||e[l])&&"function"!=typeof e[l])return void r(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=i.reject(t);return u(r,arguments[arguments.length-1]),r}},r=0,n=ie.length;r<n;r++){var o=ie[r];e[o]||(e[o]=t(o))}}();var f=function(r){re[n]&&console.info("Redefining LocalForage driver: "+n),re[n]=e,ne[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,r):f(!!e._support):f(!0)}catch(e){r(e)}});return c(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=re[e]?i.resolve(re[e]):i.reject(new Error("Driver not found."));return c(n,t,r),n},e.prototype.getSerializer=function(e){var t=i.resolve(z);return c(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return c(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;te(e)||(e=[e]);var o=this._getSupportedDrivers(e);function s(){n._config.driver=n.driver()}function u(e){return n._extend(e),s(),n._ready=n._initStorage(n._config),n._ready}var a=null!==this._driverSet?this._driverSet.catch(function(){return i.resolve()}):i.resolve();return this._driverSet=a.then(function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then(function(e){n._driver=e._driver,s(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){var t=0;return function r(){for(;t<e.length;){var o=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(u).catch(r)}s();var c=new Error("No available storage method found.");return n._driverSet=i.reject(c),n._driverSet}()}}(o)})}).catch(function(){s();var e=new Error("No available storage method found.");return n._driverSet=i.reject(e),n._driverSet}),c(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!ne[e]},e.prototype._extend=function(e){le(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=ue.length;e<t;e++)ae(this,ue[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),he=new fe;t.exports=he},{3:3}]},{},[4])(4)})}),Ur=Rr((e,t)=>{!function(r,n){"object"==typeof e&&typeof t<"u"?n(e):"function"==typeof define&&define.amd?define("localforage-driver-memory",["exports"],n):n(r.LocalforageDriverMemory={})}(typeof self<"u"?self:e,function(e){var t=/^~~local_forage_type~([^~]+)~/,r=Object.prototype.toString;function n(e){var t=.75*e.length,r=e.length;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);for(var n=new ArrayBuffer(t),o=new Uint8Array(n),s=0,i=0;s<r;s+=4){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[s]),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[s+1]),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[s+2]),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[s+3]);o[i++]=u<<2|c>>4,o[i++]=(15&c)<<4|a>>2,o[i++]=(3&a)<<6|63&l}return n}function o(e){for(var t=new Uint8Array(e),r="",n=0;n<t.length;n+=3)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t[n]>>2],r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&t[n])<<4|t[n+1]>>4],r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&t[n+1])<<2|t[n+2]>>6],r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&t[n+2]];return t.length%3==2?r=r.substring(0,r.length-1)+"=":t.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function s(e){var t,r;if(null===e||"object"!=typeof e||"isActiveClone"in e)return e;var n=e instanceof Date?new Date(e):e.constructor();try{for(var o=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}(Object.keys(e)),i=o.next();!i.done;i=o.next()){var u=i.value;Object.prototype.hasOwnProperty.call(e,u)&&(e.isActiveClone=null,n[u]=s(e[u]),delete e.isActiveClone)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}function i(e,t){return(e.name||t.name)+"/"+(e.storeName||t.storeName)+"/"}function u(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function a(e,t){var r,n=this;if(t=c.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var o=this.config();e.name=e.name||o.name,e.storeName=e.storeName||o.storeName}return r=e.name?new Promise(function(t){t(e.storeName?i(e,n._defaultConfig):e.name+"/")}):Promise.reject("Invalid arguments"),{promise:r,callback:t}}function l(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}var f={bufferToString:o,deserialize:function(e){if("__lfsc__:"!==e.substring(0,9))return JSON.parse(e);var r,o=e.substring(13),s=e.substring(9,13);if("blob"===s&&t.test(o)){var i=o.match(t);r=i[1],o=o.substring(i[0].length)}var u=n(o);switch(s){case"arbf":return u;case"blob":return function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}([u],{type:r});case"si08":return new Int8Array(u);case"ui08":return new Uint8Array(u);case"uic8":return new Uint8ClampedArray(u);case"si16":return new Int16Array(u);case"ur16":return new Uint16Array(u);case"si32":return new Int32Array(u);case"ui32":return new Uint32Array(u);case"fl32":return new Float32Array(u);case"fl64":return new Float64Array(u);default:throw new Error("Unkown type: "+s)}},serialize:function(e,t){var n="";if(e&&(n=r.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===r.call(e.buffer))){var s=void 0,i="__lfsc__:";e instanceof ArrayBuffer?(s=e,i+="arbf"):(s=e.buffer,"[object Int8Array]"===n?i+="si08":"[object Uint8Array]"===n?i+="ui08":"[object Uint8ClampedArray]"===n?i+="uic8":"[object Int16Array]"===n?i+="si16":"[object Uint16Array]"===n?i+="ur16":"[object Int32Array]"===n?i+="si32":"[object Uint32Array]"===n?i+="ui32":"[object Float32Array]"===n?i+="fl32":"[object Float64Array]"===n?i+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(i+o(s))}else if("[object Blob]"===n){var u=new FileReader;u.onload=function(){var r="~~local_forage_type~"+e.type+"~"+o(this.result);t("__lfsc__:blob"+r)},u.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},stringToBuffer:n},h={},d=function(){function e(e){this.kp=e,this.data={}}return e.resolve=function(t){return h[t]||(h[t]=new e(t)),h[t]},e.prototype.clear=function(){this.data={}},e.prototype.drop=function(){this.clear(),delete h[this.kp]},e.prototype.get=function(e){return this.data[e]},e.prototype.key=function(e){return this.keys()[e]},e.prototype.keys=function(){return Object.keys(this.data)},e.prototype.rm=function(e){delete this.data[e]},e.prototype.set=function(e,t){this.data[e]=t},e}();e._support=!0,e._driver="localforage-driver-memory",e._initStorage=function(e){var t=e?s(e):{},r=i(t,this._defaultConfig),n=d.resolve(r);return this._dbInfo=t,this._dbInfo.serializer=f,this._dbInfo.keyPrefix=r,this._dbInfo.mStore=n,Promise.resolve()},e.clear=function(e){var t=this,r=this.ready().then(function(){t._dbInfo.mStore.clear()});return u(r,e),r},e.dropInstance=function(e,t){var r=a.apply(this,arguments),n=r.promise,o=r.callback,s=n.then(function(e){d.resolve(e).drop()});return u(s,o),n},e.getItem=function(e,t){var r=this;e=l(e);var n=this.ready().then(function(){var t=r._dbInfo.mStore.get(e);return null==t?null:r._dbInfo.serializer.deserialize(t)});return u(n,t),n},e.iterate=function(e,t){var r=this,n=this.ready().then(function(){for(var t=r._dbInfo.mStore,n=t.keys(),o=0;o<n.length;o++){var s=t.get(n[o]);if(s&&(s=r._dbInfo.serializer.deserialize(s)),void 0!==(s=e(s,n[o],o+1)))return s}});return u(n,t),n},e.key=function(e,t){var r=this,n=this.ready().then(function(){var t;try{void 0===(t=r._dbInfo.mStore.key(e))&&(t=null)}catch{t=null}return t});return u(n,t),n},e.keys=function(e){var t=this,r=this.ready().then(function(){return t._dbInfo.mStore.keys()});return u(r,e),r},e.length=function(e){var t=this.keys().then(function(e){return e.length});return u(t,e),t},e.removeItem=function(e,t){var r=this;e=l(e);var n=this.ready().then(function(){r._dbInfo.mStore.rm(e)});return u(n,t),n},e.setItem=function(e,t,r){var n=this;e=l(e);var o=this.ready().then(function(){void 0===t&&(t=null);var r=t;return new Promise(function(o,s){n._dbInfo.serializer.serialize(t,function(t,i){if(i)s(i);else try{n._dbInfo.mStore.set(e,t),o(r)}catch(e){s(e)}})})});return u(o,r),o},Object.defineProperty(e,"__esModule",{value:!0})})}),Dr=xr(Mr()),qr=xr(Ur()),$r={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"},Br=function(e,t){return Object.assign(mt,t),e}(wr,{platform:"web",sdkName:"magic-sdk",version:"19.4.0",defaultEndpoint:"https://auth.magic.link/",ViewController:class extends jr{constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(e=>{let t=()=>{if(function(e){let t=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(t.find(t=>t.src.includes(e)))}(encodeURIComponent(this.parameters)))new gt(q.DuplicateIframe,"Duplicate iframes found.").log();else{let t=document.createElement("iframe");t.classList.add("magic-iframe"),t.dataset.magicIframeLabel=tr(this.endpoint).host,t.title="Secure Modal",t.src=tr(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,function(e){for(let[t,r]of Object.entries($r))e.style[t]=r}(t),document.body.appendChild(t),e(t)}};["loaded","interactive","complete"].includes(document.readyState)?t():window.addEventListener("load",t,!1)}),window.addEventListener("message",e=>{var t;if(e.origin===this.endpoint&&e.data&&e.data.msgType&&this.messageHandlers.size){e.data.response=null!=(t=e.data.response)?t:{};for(let t of this.messageHandlers.values())t(e)}})}showOverlay(){return kr(this,null,function*(){let e=yield this.iframe;e.style.display="block",this.activeElement=document.activeElement,e.focus()})}hideOverlay(){return kr(this,null,function*(){var e;(yield this.iframe).style.display="none",null!=(e=this.activeElement)&&e.focus&&this.activeElement.focus(),this.activeElement=null})}_post(e){return kr(this,null,function*(){let t=yield this.iframe;if(!t||!t.contentWindow)throw new yt(D.ModalNotReady,"Modal is not ready.");t.contentWindow.postMessage(e,this.endpoint)})}},configureStorage:()=>kr(void 0,null,function*(){let e=Dr.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(qr),yield e.setDriver([Dr.default.INDEXEDDB,Dr.default.LOCALSTORAGE,qr._driver]),e})});function Fr(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var Wr=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).info=function(e,r){try{return Promise.resolve(t.raw.info(e,r)).then(function(e){return e.body.currency})}catch(e){return Promise.reject(e)}},t.getCurrency=function(e,r){try{return Promise.resolve(t.raw.getCurrency(e,r)).then(function(e){return e.body.currency})}catch(e){return Promise.reject(e)}},t.balance=function(e,r){try{return Promise.resolve(t.raw.balance(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.getCurrencyBalance=function(e,r){try{return Promise.resolve(t.raw.getCurrencyBalance(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.getCurrencySummary=function(e,r){try{return Promise.resolve(t.raw.getCurrencySummary(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.increaseCurrencyBalance=function(e,r){try{return Promise.resolve(t.raw.increaseCurrencyBalance(e,r)).then(function(e){return e.body.balance})}catch(e){return Promise.reject(e)}},t.decreaseCurrencyBalance=function(e,r){try{return Promise.resolve(t.raw.decreaseCurrencyBalance(e,r)).then(function(e){return e.body.balance})}catch(e){return Promise.reject(e)}},t.transferCurrency=function(e,r){try{return Promise.resolve(t.raw.transferCurrency(e,r)).then(function(e){return e.body.balance})}catch(e){return Promise.reject(e)}},t.raw={info:function(e,r){try{return Promise.resolve(t.request("/currency/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getCurrency:function(e,r){try{return Promise.resolve(t.request("/currency/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},balance:function(e,r){try{return Promise.resolve(t.request("/currency/balance"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getCurrencyBalance:function(e,r){try{return Promise.resolve(t.request("/currency/balance"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getCurrencySummary:function(e,r){try{return Promise.resolve(t.request("/currency/summary"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},increaseCurrencyBalance:function(e,r){try{return Promise.resolve(t.request("/currency/increaseBalance",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},decreaseCurrencyBalance:function(e,r){try{return Promise.resolve(t.request("/currency/decreaseBalance",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},transferCurrency:function(e,r){try{return Promise.resolve(t.request("/currency/transfer",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}}},t.safe={info:function(e,r){try{return Promise.resolve(Fr(function(){return Promise.resolve(t.info(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCurrency:function(e,r){try{return Promise.resolve(Fr(function(){return Promise.resolve(t.getCurrency(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},balance:function(e,r){try{return Promise.resolve(Fr(function(){return Promise.resolve(t.balance(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCurrencyBalance:function(e,r){try{return Promise.resolve(Fr(function(){return Promise.resolve(t.getCurrencyBalance(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCurrencySummary:function(e,r){try{return Promise.resolve(Fr(function(){return Promise.resolve(t.getCurrencySummary(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},increaseCurrencyBalance:function(e,r){try{return Promise.resolve(Fr(function(){return Promise.resolve(t.increaseCurrencyBalance(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},decreaseCurrencyBalance:function(e,r){try{return Promise.resolve(Fr(function(){return Promise.resolve(t.decreaseCurrencyBalance(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},transferCurrency:function(e,r){try{return Promise.resolve(Fr(function(){return Promise.resolve(t.transferCurrency(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},t}return r(t,e),t}(f),Vr="AssetLayerSessionToken",Gr="AssetLayerSessionTokenLastRefresh",zr=/*#__PURE__*/function(){function e(){}return e.initialize=function(){if(!this.initialized)try{var e="__test__";window.sessionStorage.setItem(e,e),window.sessionStorage.removeItem(e),this.available=!0}catch(e){this.available=!1}finally{this.initialized=!0}},e.set=function(e,t){return void 0===t&&(t=Date.now()),this.available?(window.sessionStorage.setItem(Vr,e),window.sessionStorage.setItem(Gr,""+t),!0):(console.warn("Session storage is not available. Token was not stored."),!1)},e.get=function(){if(this.available){var e=window.sessionStorage.getItem(Gr);return e?Date.now()-Number(e)>3e6?(console.warn("Session storage is expired. Token was not retrieved."),null):window.sessionStorage.getItem(Vr)||(console.warn("Session storage is empty. Token cannot be retrieved."),null):(console.warn("Session storage is empty. Timestamp cannot be retrieved."),null)}return console.warn("Session storage is not available. Token cannot be retrieved."),null},e.del=function(){return this.available?(window.sessionStorage.removeItem(Vr),window.sessionStorage.removeItem(Gr),!0):(console.warn("Session storage is not available. Token was not removed."),!1)},e}();function Hr(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}zr.initialized=!1,zr.available=!1,zr.initialize();var Jr="undefined"!=typeof window?new Br("pk_live_8FB965353AF0A346"):void 0,Xr=0,Kr=/*#__PURE__*/function(){function e(e){var t=this,r=this,n=this,o=this,s=this,i=this;this.initialized=void 0,this.didToken=void 0,this.logs=void 0,this.sessionCache=void 0,this.refreshSessionTID=void 0,this.apps=void 0,this.assets=void 0,this.collections=void 0,this.currencies=void 0,this.equips=void 0,this.expressions=void 0,this.listings=void 0,this.shop=void 0,this.slots=void 0,this.users=void 0,this.safe={initialize:function(e){try{return Promise.resolve(Hr(function(){return Promise.resolve(t.initialize(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},isUserLoggedIn:function(){try{return Promise.resolve(Hr(function(){return Promise.resolve(r.isUserLoggedIn()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserDidToken:function(){try{return Promise.resolve(Hr(function(){return Promise.resolve(n.getUserDidToken()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserMetadata:function(){try{return Promise.resolve(Hr(function(){return Promise.resolve(o.getUserMetadata()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},loginUser:function(e){try{return Promise.resolve(Hr(function(){return Promise.resolve(s.loginUser(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},logoutUser:function(){try{return Promise.resolve(Hr(function(){return Promise.resolve(i.logoutUser()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},this.initialized=!1,this.didToken=(null==e?void 0:e.didToken)||"",this.logs=(null==e?void 0:e.logs)||!1,this.sessionCache="boolean"!=typeof(null==e?void 0:e.sessionCache)||e.sessionCache;var u=this;this.apps=new m(u,e),this.assets=new y(u,e),this.collections=new g(u,e),this.currencies=new Wr(u,e),this.equips=new b(u,e),this.expressions=new E(u,e),this.listings=new I(u,e),this.shop=new _(u,e),this.slots=new O(u,e),this.users=new U(u,e),null!=e&&e.initialize&&this.initialize()}var r=e.prototype;return r.initialize=function(e){try{var t=function(){function t(){return r.initialized=!0,e&&e(n),n}var o=function(){if(!n)return Promise.resolve(r.getUserDidToken()).then(function(e){var t=function(){if(e)return Promise.resolve(r.loginUser({didToken:e})).then(function(e){n=!!e})}();if(t&&t.then)return t.then(function(){})})}();return o&&o.then?o.then(t):t()},r=this,n=!1,o=r.sessionCache?zr.get():void 0,s=function(){if(o)return Promise.resolve(r.loginUser({registeredDidToken:o})).then(function(e){n=!!e})}();return Promise.resolve(s&&s.then?s.then(t):t())}catch(e){return Promise.reject(e)}},r.isUserLoggedIn=function(){try{return Promise.resolve(Jr?Jr.user.isLoggedIn():void 0)}catch(e){return Promise.reject(e)}},r.getUserDidToken=function(){try{return Promise.resolve(this.isUserLoggedIn()).then(function(e){if(e)return Promise.resolve(Jr.user.getIdToken())})}catch(e){return Promise.reject(e)}},r.getUserMetadata=function(){try{return Jr?Promise.resolve(this.isUserLoggedIn()).then(function(e){if(e)return Promise.resolve(Jr.user.getMetadata())}):Promise.resolve(void 0)}catch(e){return Promise.reject(e)}},r.loginUser=function(e){try{var t,r,n,o=function(){var t=function t(n){try{var o,s=function(t){var r;if(o)return t;var s=(null==(r=e)?void 0:r.email)||n.data.email,u=Jr.auth.loginWithEmailOTP({email:s});u.on("email-otp-sent",function(){var e=window.prompt("Enter Email OTP");e?u.emit("verify-email-otp",e):console.warn("Invalid OTP")}).on("invalid-email-otp",function(){}).on("done",function(e){try{var t=e;if(!t)throw new Error("Invalid DID Token");return Promise.resolve(i(t)).then(function(){})}catch(e){return Promise.reject(e)}}).on("error",function(e){console.error(e)}).on("settled",function(){}).catch(function(t){var r,n,o=l(t);console.warn("login aborted:",o.message),null!=(r=e)&&r.onError&&e.onError(o.message),null!=(n=e)&&n.onComplete&&e.onComplete(!1)})},i=function(t){try{return Promise.resolve(r.users.safe.getOTP({didtoken:t})).then(function(t){var n=t.result,o=t.error;if(r.logs&&console.log("pre-registered did:",n),!n){var s,i,u="Login Failed [OTP]: "+l(o).message;return null!=(s=e)&&s.onError&&e.onError(u),null!=(i=e)&&i.onComplete&&e.onComplete(!1),!1}return Promise.resolve(Jr.user.generateIdToken({lifespan:86400,attachment:n})).then(function(t){r.logs&&console.log("registered did:",t);var o=Date.now();return Promise.resolve(r.users.safe.registerDid({otp:n},{didtoken:t})).then(function(n){var s,i;if(!n.result){var u,c,a="Login Failed [Reg]: "+l(n.error).message;return null!=(u=e)&&u.onError&&e.onError(a),null!=(c=e)&&c.onComplete&&e.onComplete(!1),!1}return r.sessionCache&&zr.set(t,o),Xr=o,r.didToken=t,r.initialized||(r.initialized=!0),null!=(s=e)&&s.onSuccess&&e.onSuccess(),null!=(i=e)&&i.onComplete&&e.onComplete(!0),r.refreshSessionTID||(r.refreshSessionTID=setTimeout(function e(){try{return r.logs&&console.log("login refresh time elapsed",Date.now()-Xr),Date.now()-Xr<828e5?(r.refreshSessionTID=setTimeout(e,9e5),Promise.resolve()):Promise.resolve(r.safe.getUserDidToken()).then(function(t){var n=t.result;r.logs&&console.log("refreshed did:",n);var o=n?Promise.resolve(r.safe.loginUser({didToken:n})).then(function(){r.refreshSessionTID=setTimeout(e,3e5)}):Promise.resolve(r.safe.isUserLoggedIn()).then(function(e){e.result||r.logoutUser()});if(o&&o.then)return o.then(function(){})})}catch(e){return Promise.reject(e)}},36e5)),!0})})})}catch(e){return Promise.reject(e)}},u=function(){if(!n)return e?e.didToken?Promise.resolve(i(e.didToken)).then(function(e){return o=1,e}):e.email?void 0:(null!=(s=e)&&s.onComplete&&e.onComplete(!1),o=1,!1):(o=1,!1);if(n.origin!==window.location.origin||"assetlayer-login-popup"!==n.data.source)return o=1,!1;window.removeEventListener("message",t);var r,s,u=document.getElementById("assetlayer-login-iframe");return u&&document.body.removeChild(u),"submit"!==n.data.type?(null!=(r=e)&&r.onComplete&&e.onComplete(!1),o=1,!1):void 0}();return Promise.resolve(u&&u.then?u.then(s):s(u))}catch(e){return Promise.reject(e)}},r=s;return function(){if(e&&(e.email||e.didToken))return Promise.resolve(t(void 0));var r=document.createElement("iframe");r.id="assetlayer-login-iframe",r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width="100vw",r.style.height="100vh",document.body.appendChild(r);try{var n,o=(null==(n=r.contentWindow)?void 0:n.document)||r.contentDocument;if(!o)throw new Error("err");o.open(),o.write('\n<!DOCTYPE html>\n<html lang="en-us">\n  <head>\n    <meta charset="utf-8">\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Asset Layer Login</title>\n  </head>\n  <body style="position: absolute; left: 0px; top: 0px; margin: 0px; padding: 0px; background-color: rgba(255,255,255,0.5)">\n    <div id="login-email-container" style="position: absolute; left: 0px; top: 0px; display: flex; justify-content: center; align-items: center; width: 100vw; height: 100vh;">\n      <div style="position: absolute; display: flex; flex-direction: column; justify-content: center; align-items: center; width: 360px; height: 380px; \n          background-color: white; border: 1px solid black; border-radius: 24px; box-shadow: 5px 5px 5px rgba(0,0,0,0.25);">\n        <button id="assetlayer-close-email-popup" \n          onmouseover="this.style.backgroundColor=\'darkgray\';" \n          onmouseout="this.style.backgroundColor=\'\';" \n          style="position: absolute; top: 24px; right: 24px; width: 38px; height: 38px; cursor: pointer; \n            border: 1px solid black; border-radius: 12px;"\n        >\n          X\n        </button>\n        <img src=" data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAMLklEQVR4Ae3d0W8Uxx0H8N/s7tkOBnM0bUpUIZxUqtKosn1tVIknzGtfQt6q1inOX1DzVKV58OUvAP6CmMbQvmH+ApyXpDRRz5gqiloFLkrSkALBwNnYvtmbzu/ODra5uz3bs7szu9+PdLrWXIRtvjf3m9/MzhIBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIDzBIETBn5bGa4HNOZ5wXEK1ZgSoqiEGuM/E4qGd75eCaoKpZb0ny7pP6+SLxZUQ94IAqquzpSqlFEItKWKk5XiciM40wyvR6dJUZEMETrsSokF4Yk536t/kKWAI9AW4RDXpDdF5J3UY+w4JUbpcHszvievuh5uBNoCwcTNcf00nWyIO5pXFF4IZ0tz5CAEOkWFNxcn9dO0alMDp43LEhJeuf6XX1wkhyDQKeibqJxWwj9nY5B3ci3YCHSCCpOVMSWDc5aUFrskFoJAvmF7je0RJCKYuFFW0q+4GWamxqT0bwcTlTJZDCN0zAYmK8Oh9K4oEmOUEVyG+H54ysbRGiN0jAq/vzElQ7+SpTAzrv31aF3hn48sgxE6Jv7EjfOCxB8p88J35WypTJZAoA3jxZHH0uMwn6H8mJNB+BbNlJYoZQi0Qc3lauldy1qJ0Ru1IIPGqbRDjUAbku8wb0o/1Ai0AQjzVumGGl0OA2qh/x7CvEmM+XX/HKUEgd4nXjAhRacJvqf71JPBm4uphBolxz5wH1YJkdpoZDuh1Nn6pdHzlCAEeo94BZAXTUxuvM+gpSAIS0muKKLk2KMw9K8hzJGKUi/7k540U0IQ6D1objRyYOunHcRYIL3EVkxRcuxSs9SQ/m2CXRGNsFS/XFqgmGGE3iUpgysEu6a8ZFp5CPQutC6ZUug37824P1GJvb2JQO/ONMGeeSL+URqB7hGPzpgI7g///gp/+FesuxBzOykcmFbD9TqNe4pGlaBhRdQ6hYi2h1Z/vaq/tkRrT4Zp9WGRlu8T1VeIVh8/fZEQrf9S+K2Hx88Bkd9HsB1f7VJ/f+QlikluAl2cUsXaII3pH/iMDun+TyKqrxKtPCCq3dWPe51f5xV0n2+g9cxhBy08JWdL8xSDzAc6eEeNiwa9rjyajG0hZDPc92+3/ncnzXA/p0fufsq5eTk7copikNlAc5CJJ3GKxilJD7+JDrbQU5fCoA72AOWVDMIjcWwxDShjBv6khkO/eRrRJKXh8IutR7dgqwbRuq7BxTJRfzGXpQivHkqid8mwTHU5Cu+oKRlQRdfIk5Q2DvXxXxMdOdb5NRzs1e906GuUP2KcYpCJkmNjwncl8fKiV4/1xPHuf6LLkJyN1nGUHc6P0IU/q7HlA1SxNszs0I+Ijv1Sf7NdamYerdf0xDJcp7woyMB4T9rpQPe9rU7rHvI1RQ4seHCYuQQ5+MPOr9GFP60/1CP5MuWCMr+NwNlA65F5siGaZYY7e5J9PQf/yQjR0NHur5MruQi1HoyM7+1wMtAcZj2WvUeuevFVhLqlOPC7T4+TQc4Fmmtm/c52/zq+F36mJ4EHu7+GQx2uUpbVSRotO5wKNPeY9ZNbZUYnm+VHIWJxhVt6KqSs8jwxTAY5FWi9YHLFiQlgrzjMR3/e/TU8UVxbaj1nkeGJoTOBDt5W5c0dcZly4Ej3xRfGLT2ZzXpal49GP22dCHSz1BAZ3lz//EvRpYd8QtSoU9boD578jdDSz8AksBuup6NKD5aX/vQ+WB9obtER5eCoLS49DkR8+vIInbFRWgizcyIXRuj8XMf3fA8XcmCU7srqQPOe5kx1NaLkdJQ2yepAC0V5uq1DC0bpfbE20NzZsGJfc9J4lPYirrvgETqrfel9sjbQehFlnPKKLw6IkpElcf2+rJJB1gZaN9zzV25s6rbFdFO4RlkgSOVkg7/NG/bj1n8ouuxQMhtlhxDZD/TGFdv5xQstAxE78TjMHGrHiTyUHLrZPkp5x6N0lIb7gdb/2EaP2LUy0DhDjqL3SrMMBFoJZTTQqZ7LUayo4uN1Gvc8Osk76TjI286WW9GP5QbRd+tEd/T/+VY/r6un58fxSUR8fhyfRCQydmZOoYdDaDKwT1rWwy/IoFRSEHysxvVf/PrGYTC72z546wnR4mO+OeD2rxeeI+o7lJ1jAPjIg1sfdn8N/6wDPyBXKaWq4aVRowc3JjpCD3ykhqVH5/i+fnuen7/8XOuxM9j1J61HVoLt9fJP0yCXCcP1M0ushi78XU1Jnypk6kpfDvVvdL/2lQPbv86hXrnn/vKw30OgHW/b6RF6jgxLZIT2/6HO61+9+Tsh9en342uH9bPfGq03NQ9tedR67uuhWwCpCMPGB2RY7CO0f13NiDjCvNWI7gicaFOKr9da1+OBfZTubvzN/A05Yw10cF2VRVJL2D/VJchrQ89+nUsQHq1dE/bQknO4syOEN0MxiC3QXDMnfh3gK4PP1tSM62nXauqeeszunuRWl/IqxSCW3wh3M5SX0pUmI7pmPtimw7Hu2PkW/MkSRTgb6Pk4yg0Wy2+EDxwnSukwGJ4o/qpN6bE5UXTFag9nRjvamtT/FOcpJsYD3Ryd096Yf0yvsv24zR2o5Ko7x9XKHvY7e6ku9O5JczHl8kgs5QYzHuiN0Tl9xzrcmEc6sjF+623jOnEw0FqZYmQ20BVVtOayqZf15LCvTReAD2xxYUHiSQ/tRt7L4pCNpe6LFCOjgfZDizblcy39Qpuyg2tp28sOvkVcFMfCvKFMMTMaaKHoJNnkaIc7udp++RLfQStK4Not4dRC3KMzM11D23WY4pEOgbb9XIueyg23brssZeMNSoDRQFu3MX+wQ1vL5n40j871iIlr8zbLLvWgVTmuvvNORqfJwrZTjg52CHTD8kBH4dsrO2JjImj8BpudOH9bt0zh1cGocoMXUxy5V7juJS2FYSOWe3p3gkDb5N7t6NcUDpArvARLjad/p0H6HVklm9Q6lBaehUvGfLfZR3e6v6Y5OrvS3VDl+uzoBUqY2badbYFe7rBjzcY9EHzr5Cj9btwrSQ9sc3I2ubp5K7MlhyDj14jty4MO7TnbFiXu3YrubPBE0IXOhtL95lr4FqXEbMkhyPglNftyp8OKoE2TKt6zcb/a/TX8iVLo4ZyOtOkwy2U9CZwrpXaZkNFAhz7N6yd7rnn6X6dAW7IowV2N/97s/hq+KsWFUsOCMDOzn2ElsaTLjhmywecrrUNpduJjDmy4dImvSOEwR5UahSHrSw39yTxjQ5iZ+f2Hkq6ST1OUtsUOG+RtuQr8239Hb+IvDNrzadKJoPPh+yNnyRLG3/ryhJjX01zj5y3sCo/Oy21ads3R2YIOxzefRrfoOMyBvT1nXjQRpKakRWFmsXyWyQbxD5nOxw+XGe1GZy4z0h6ducz4etH5MDc7GTIspdFnjhJPcXZCVEWDUulD0uKj9qNz31C6ozNPAL/8p17sudf5Nc033ZDdYdYLJvLSaCnpFcBexTo7Cj5WfI5dcvU0n57UbnTmkbkvxbYXb9j/+mb3own4zcbdDHsngPOyEZ6lyyW71hp2iH263zw5KYnDZm7puvnDh89+nUe7gcOUCg4wL5o8+Kr763jRJBi08uAY3i1HjcbZ8K+ldOdFPUrkNxhcV9P6bypTXD7To/InbS4q5Vq0f4hSwdtA79/u3pbjFUv+Hi28nKoZZKJyEleZmJTYkMAnKW0cPmNulaA5AdQ182cr27++WYumsTONywveNddtG6jFQSY+BEYPPrp7Ydeqb4+S/Yz7SA37Pk0LE1eGf6lHvk/aTAADvazdfzjZCSCXFkt6RK7ddTXI83pMnpe1xgUbFkf2I52iba/B5hH582Wir9Zat6fYxCMy18p84WhSCxEcYt7yyaXFWq39hI+/LxFs3DbDkhVKavWQPb1WEAqx0KjJi66HeKt0f8MVVfQlndTfxLj+LY/xjeo732NFt73u6CDXE77Hitx44zRPMdWP1YetsqK+pcxp/t2i9X1t/d44zCmFWC9HV5vfmqIF/Vji8ApPVQsyWFi9/OoXBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZ8n8HtzqX8OMEngAAAABJRU5ErkJggg==" alt="" crossorigin="anonymous" style="width: 45px; height: 45px;"/>\n        <input id="assetlayer-enter-email-input" type="text" placeholder="Email" style="margin: 80px 0px; padding: 0px 16px; width: 280px; height: 50px; \n          border: 1px solid darkgray; border-radius: 12px"/>\n        <button id="assetlayer-submit-email-button" \n          onmouseover="this.style.backgroundColor=\'darkgray\';" \n          onmouseout="this.style.backgroundColor=\'\';" \n          style="padding: 16px 24px; cursor: pointer; border: 1px solid black; border-radius: 12px;"\n        >\n          Login with Email\n        </button>\n      </div>\n    </div>\n    <script>\n        const closePopupBtn = document.getElementById(\'assetlayer-close-email-popup\');\n        const submitEmailBtn = document.getElementById(\'assetlayer-submit-email-button\');\n\n        closePopupBtn.addEventListener(\'click\', function() {\n          // Send the close command to the parent window\n          window.parent.postMessage({ source: \'assetlayer-login-popup\', type: \'close\' }, \n            (window.location.href.slice(0,7) === \'file://\') ? \'*\' : window.location.origin);\n        });\n        submitEmailBtn.addEventListener(\'click\', function() {\n            const email = document.getElementById(\'assetlayer-enter-email-input\').value;\n            // Send the email to the parent window\n            window.parent.postMessage({ source: \'assetlayer-login-popup\', type: \'submit\', email }, \n                (window.location.href.slice(0,7) === \'file://\') ? \'*\' : window.location.origin);\n        });\n    <\/script>\n  </body>\n</html>\n'),o.close(),window.addEventListener("message",t)}catch(t){var s,i,u="iFrame error";console.warn(u),null!=(s=e)&&s.onError&&e.onError(u),null!=(i=e)&&i.onComplete&&e.onComplete(!1)}}()},s=this;if(s.logs&&console.log("login props:",e),null!=(t=e)&&t.registeredDidToken)return s.didToken=e.registeredDidToken,s.initialized=!0,null!=(r=e)&&r.onSuccess&&e.onSuccess(),null!=(n=e)&&n.onComplete&&e.onComplete(!0),Promise.resolve(!0);if(!Jr)return Promise.resolve(!1);var i=function(){if(!e||!e.email&&!e.didToken)return Promise.resolve(s.getUserDidToken()).then(function(t){t&&(e?e.didToken=t:e={didToken:t})})}();return Promise.resolve(i&&i.then?i.then(o):o())}catch(e){return Promise.reject(e)}},r.logoutUser=function(){try{var e=this;if(!Jr)return Promise.resolve();var t=Hr(function(){return Promise.resolve(Jr.user.logout()).then(function(){e.didToken="",zr.del(),e.refreshSessionTID&&(clearTimeout(e.refreshSessionTID),e.refreshSessionTID=void 0)})},function(){console.warn("logout err")});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},r.newRegisteredDidToken=function(e){try{var r=this;return Promise.resolve(r.getUserDidToken()).then(function(n){if(n){var o=e?t({},e,{didtoken:n}):{didtoken:n};return Promise.resolve(r.users.safe.getOTP(o)).then(function(n){var o=n.result,s=n.error;if(o)return Promise.resolve(Jr.user.generateIdToken({lifespan:86400,attachment:o})).then(function(n){var s=e?t({},e,{didtoken:n}):{didtoken:n};return Promise.resolve(r.users.safe.registerDid({otp:o},s)).then(function(e){if(e.result)return n;var t="Register Failed [Reg]: "+l(e.error).message;console.warn(t)})});var i="Register Failed [OTP]: "+l(s).message;console.warn(i)})}})}catch(e){return Promise.reject(e)}},e}();e.AssetLayer=Kr,e.BasicError=a});
