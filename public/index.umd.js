!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e||self).AssetLayer={})}(this,function(e){function r(){return r=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r.apply(this,arguments)}function t(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,o(e,r)}function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}function o(e,r){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},o(e,r)}function s(e,r,t){return s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,r,t){var n=[null];n.push.apply(n,r);var s=new(Function.bind.apply(e,n));return t&&o(s,t.prototype),s},s.apply(null,arguments)}function i(e){var r="function"==typeof Map?new Map:void 0;return i=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(r){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},i(e)}var u={__proto__:null,default:function(e,r){return r=r||{},new Promise(function(t,n){var o=new XMLHttpRequest,s=[],i=[],u={},c=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:c,headers:{keys:function(){return s},entries:function(){return i},get:function(e){return u[e.toLowerCase()]},has:function(e){return e.toLowerCase()in u}}}};for(var a in o.open(r.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,r,t){s.push(r=r.toLowerCase()),i.push([r,t]),u[r]=u[r]?u[r]+","+t:t}),t(c())},o.onerror=n,o.withCredentials="include"==r.credentials,r.headers)o.setRequestHeader(a,r.headers[a]);o.send(r.body||null)})}},c=self.fetch||(self.fetch=u.default||u),a=/*#__PURE__*/function(e){function r(r,t){var n;return(n=e.call(this,r)||this).status=void 0,n.status=t,n}return t(r,e),r}(/*#__PURE__*/i(Error));function l(e,r){var t,n,o,s,i,u,c,l,f,h;if(void 0===r&&(r=500),!e)return new a("Unknown Error",r);var d=(null==(t=e.response)||null==(t=t.data)?void 0:t.error)||(null==(n=e.response)||null==(n=n.data)?void 0:n.message)||(null==(o=e.response)?void 0:o.data)||(null==(s=e.data)?void 0:s.error)||(null==(i=e.data)?void 0:i.message)||(null==(u=e.data)?void 0:u.errorMessage)||e.data||e.message||e.error||"Unknown Error Message",m=(null==(c=e.response)||null==(c=c.data)?void 0:c.statusCode)||(null==(l=e.response)?void 0:l.status)||(null==(f=e.data)?void 0:f.status)||(null==(h=e.data)?void 0:h.statusCode)||e.status||r;return new a(d,m)}var f=/*#__PURE__*/function(){function e(e,r){this.parent=void 0,this.baseUrl=void 0,this.appSecret=void 0,this.parent=e,this.baseUrl=(null==r?void 0:r.baseUrl)||"https://api-v2.assetlayer.com/api/v1",this.appSecret=(null==r?void 0:r.appSecret)||""}return e.prototype.request=function(e,t){var n=""+this.baseUrl+e,o=r({"Content-Type":"application/json",appsecret:this.appSecret,didtoken:this.parent.didToken},(null==t?void 0:t.headers)||{}),s=r({},t,{headers:o});return c(n,s).then(function(r){try{return Promise.resolve(r.json()).then(function(t){if(r.ok)return t;var n=l(t);throw console.warn("[AssetLayer@"+e.split("?")[0]+"]: "+r.statusText+" ("+r.status+") // "+n.message),new a(n.message,r.status)})}catch(e){return Promise.reject(e)}})},e}();function h(e){if(!e)return"";var r=new URLSearchParams,t=function(t){if(void 0===e[t])return 1;Array.isArray(e[t])?e[t].forEach(function(e){e&&r.append(t+"[]",e)}):r.append(t,e[t])};for(var n in e)t(n);return"?"+r.toString()}function d(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var m=/*#__PURE__*/function(e){function n(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).getApp=function(e,r){try{return Promise.resolve(t.raw.getApp(e,r)).then(function(e){return e.body.app})}catch(e){return Promise.reject(e)}},t.getApps=function(e,r){try{return Promise.resolve(t.raw.getApps(e,r)).then(function(e){return e.body.app})}catch(e){return Promise.reject(e)}},t.getAppSlots=function(e,r){try{return Promise.resolve(t.raw.getAppSlots(e,r)).then(function(e){return e.body.app.slots})}catch(e){return Promise.reject(e)}},t.getAppSlotIds=function(e,r){try{return Promise.resolve(t.raw.getAppSlotIds(e,r)).then(function(e){return e.body.app.slots})}catch(e){return Promise.reject(e)}},t.getAppsWithListings=function(e){try{return Promise.resolve(t.raw.getAppsWithListings(e)).then(function(e){return e.body.apps})}catch(e){return Promise.reject(e)}},t.getAppIdsWithListings=function(e){try{return Promise.resolve(t.raw.getAppIdsWithListings(e)).then(function(e){return e.body.apps})}catch(e){return Promise.reject(e)}},t.raw={info:function(e,r){try{return Promise.resolve(t.request("/app/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getApp:function(e,r){try{return Promise.resolve(t.request("/app/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getApps:function(e,r){try{return Promise.resolve(t.request("/app/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},slots:function(e,r){try{return Promise.resolve(t.request("/app/slots"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getAppSlots:function(e,r){try{return Promise.resolve(t.request("/app/slots"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getAppSlotIds:function(e,n){try{return Promise.resolve(t.request("/app/slots"+h(r({},e,{idOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},listings:function(e,r){try{return Promise.resolve(t.request("/app/listings"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getAppsWithListings:function(e){try{return Promise.resolve(t.request("/app/listings",{headers:e}))}catch(e){return Promise.reject(e)}},getAppIdsWithListings:function(e){try{return Promise.resolve(t.request("/app/listings"+h({idOnly:!0}),{headers:e}))}catch(e){return Promise.reject(e)}}},t.safe={info:function(e,r){try{return Promise.resolve(d(function(){return Promise.resolve(t.info(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getApp:function(e,r){try{return Promise.resolve(d(function(){return Promise.resolve(t.getApp(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getApps:function(e,r){try{return Promise.resolve(d(function(){return Promise.resolve(t.getApps(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},slots:function(e,r){try{return Promise.resolve(d(function(){return Promise.resolve(t.slots(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppSlots:function(e,r){try{return Promise.resolve(d(function(){return Promise.resolve(t.getAppSlots(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppSlotIds:function(e,r){try{return Promise.resolve(d(function(){return Promise.resolve(t.getAppSlotIds(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},listings:function(e,r){try{return Promise.resolve(d(function(){return Promise.resolve(t.listings(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppsWithListings:function(e){try{return Promise.resolve(d(function(){return Promise.resolve(t.getAppsWithListings(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppIdsWithListings:function(e){try{return Promise.resolve(d(function(){return Promise.resolve(t.getAppIdsWithListings(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},t}t(n,e);var o=n.prototype;return o.info=function(e,r){try{return Promise.resolve(this.raw.info(e,r)).then(function(e){return e.body.app})}catch(e){return Promise.reject(e)}},o.slots=function(e,r){try{return Promise.resolve(this.raw.slots(e,r)).then(function(e){return e.body.app.slots})}catch(e){return Promise.reject(e)}},o.listings=function(e,r){try{return Promise.resolve(this.raw.listings(e,r)).then(function(e){return e.body.apps})}catch(e){return Promise.reject(e)}},n}(f);function p(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var y=/*#__PURE__*/function(e){function n(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).info=function(e,r){try{return Promise.resolve(t.raw.info(e,r)).then(function(r){return e.assetIds?r.body.assets:r.body.assets[0]})}catch(e){return Promise.reject(e)}},t.getAsset=function(e,r){try{return Promise.resolve(t.raw.getAsset(e,r)).then(function(e){return e.body.assets[0]})}catch(e){return Promise.reject(e)}},t.getAssets=function(e,r){try{return Promise.resolve(t.raw.getAssets(e,r)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},t.user=function(e,r){try{return Promise.resolve(t.raw.user(e,r)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},t.getUserAssets=function(e,r){try{return Promise.resolve(t.raw.getUserAssets(e,r)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},t.getUserAssetIds=function(e,r){try{return Promise.resolve(t.raw.getUserAssetIds(e,r)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},t.getUserAssetsCounts=function(e,r){try{return Promise.resolve(t.raw.getUserAssetsCounts(e,r)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},t.getUserCollectionAssets=function(e,r){try{return Promise.resolve(t.raw.getUserCollectionAssets(e,r)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},t.getUserCollectionsAssets=function(e,r){try{return Promise.resolve(t.raw.getUserCollectionsAssets(e,r)).then(function(e){return e.body.collections})}catch(e){return Promise.reject(e)}},t.getUserSlotAssets=function(e,r){try{return Promise.resolve(t.raw.getUserSlotAssets(e,r)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},t.getUserSlotsAssets=function(e,r){try{return Promise.resolve(t.raw.getUserSlotsAssets(e,r)).then(function(e){return e.body.assets})}catch(e){return Promise.reject(e)}},t.getAssetHistory=function(e,r){try{return Promise.resolve(t.raw.getAssetHistory(e,r)).then(function(e){return e.body.history})}catch(e){return Promise.reject(e)}},t.getAssetMarketHistory=function(e,r){try{return Promise.resolve(t.raw.getAssetMarketHistory(e,r)).then(function(e){return e.body.history})}catch(e){return Promise.reject(e)}},t.getAssetOwnershipHistory=function(e,r){try{return Promise.resolve(t.raw.getAssetOwnershipHistory(e,r)).then(function(e){return e.body.history})}catch(e){return Promise.reject(e)}},t.send=function(e,r){try{return Promise.resolve(t.raw.send(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.sendAsset=function(e,r){try{return Promise.resolve(t.raw.sendAsset(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.sendAssets=function(e,r){try{return Promise.resolve(t.raw.sendAssets(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.sendCollectionAssets=function(e,r){try{return Promise.resolve(t.raw.sendCollectionAssets(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.sendLowestAsset=function(e,r){try{return Promise.resolve(t.raw.sendLowestAsset(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.sendRandomAsset=function(e,r){try{return Promise.resolve(t.raw.sendRandomAsset(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.update=function(e,r){try{return Promise.resolve(t.raw.update(e,r)).then(function(r){return e.collectionId?r.body.collectionId:e.assetIds?r.body.assetIds:r.body.assetId})}catch(e){return Promise.reject(e)}},t.updateAsset=function(e,r){try{return Promise.resolve(t.raw.updateAsset(e,r)).then(function(e){return e.body.assetId})}catch(e){return Promise.reject(e)}},t.updateAssets=function(e,r){try{return Promise.resolve(t.raw.updateAssets(e,r)).then(function(e){return e.body.assetIds})}catch(e){return Promise.reject(e)}},t.updateCollectionAssets=function(e,r){try{return Promise.resolve(t.raw.updateCollectionAssets(e,r)).then(function(e){return e.body.collectionId})}catch(e){return Promise.reject(e)}},t.expressionValues=function(e,r){try{return Promise.resolve(t.raw.expressionValues(e,r)).then(function(r){return e.collectionId?r.success:e.assetIds?r.body.assetIds:r.body.expressionValueId})}catch(e){return Promise.reject(e)}},t.updateAssetExpressionValue=function(e,r){try{return Promise.resolve(t.raw.updateAssetExpressionValue(e,r)).then(function(e){return e.body.expressionValueId})}catch(e){return Promise.reject(e)}},t.updateAssetsExpressionValue=function(e,r){try{return Promise.resolve(t.raw.updateAssetsExpressionValue(e,r)).then(function(e){return e.body.assetIds})}catch(e){return Promise.reject(e)}},t.updateCollectionAssetsExpressionValue=function(e,r){try{return Promise.resolve(t.raw.updateCollectionAssetsExpressionValue(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.updateBulkExpressionValues=function(e,r){try{return Promise.resolve(t.raw.updateBulkExpressionValues(e,r)).then(function(e){return e.body.log})}catch(e){return Promise.reject(e)}},t.raw={info:function(e,r){try{return Promise.resolve(t.request("/asset/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getAsset:function(e,r){try{return Promise.resolve(t.request("/asset/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getAssets:function(e,r){try{return Promise.resolve(t.request("/asset/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},user:function(e,r){try{return Promise.resolve(t.request("/asset/user"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getUserAssets:function(e,r){try{return Promise.resolve(t.request("/asset/user"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getUserAssetIds:function(e,n){try{return Promise.resolve(t.request("/asset/user"+h(r({},e,{idOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserAssetsCounts:function(e,n){try{return Promise.resolve(t.request("/asset/user"+h(r({},e,{countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserCollectionAssets:function(e,r){try{return Promise.resolve(t.request("/asset/collection"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getUserCollectionsAssets:function(e,r){try{return Promise.resolve(t.request("/asset/collections"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getUserSlotAssets:function(e,r){try{return Promise.resolve(t.request("/asset/slot"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getUserSlotsAssets:function(e,r){try{return Promise.resolve(t.request("/asset/slots"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getAssetHistory:function(e,r){try{return Promise.resolve(t.request("/asset/history"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getAssetMarketHistory:function(e,r){try{return Promise.resolve(t.request("/asset/marketHistory"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getAssetOwnershipHistory:function(e,r){try{return Promise.resolve(t.request("/asset/ownershipHistory"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},mint:function(e,r){try{return Promise.resolve(t.request("/asset/mint",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},send:function(e,r){try{return Promise.resolve(t.request("/asset/send",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},sendAsset:function(e,r){try{return Promise.resolve(t.request("/asset/send",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},sendAssets:function(e,r){try{return Promise.resolve(t.request("/asset/send",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},sendCollectionAssets:function(e,r){try{return Promise.resolve(t.request("/asset/send",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},sendLowestAsset:function(e,r){try{return Promise.resolve(t.request("/asset/sendLowest",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},sendRandomAsset:function(e,r){try{return Promise.resolve(t.request("/asset/sendRandom",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},update:function(e,r){try{return Promise.resolve(t.request("/asset/update",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateAsset:function(e,r){try{return Promise.resolve(t.request("/asset/update",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateAssets:function(e,r){try{return Promise.resolve(t.request("/asset/update",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateCollectionAssets:function(e,r){try{return Promise.resolve(t.request("/asset/update",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},expressionValues:function(e,r){try{return Promise.resolve(t.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateAssetExpressionValue:function(e,r){return t.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:r})},updateAssetsExpressionValue:function(e,r){return t.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:r})},updateCollectionAssetsExpressionValue:function(e,r){return t.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:r})},updateBulkExpressionValues:function(e,r){return t.request("/asset/expressionValuesBulk",{method:"POST",body:JSON.stringify(e),headers:r})}},t.safe={info:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.info(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAsset:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getAsset(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAssets:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},user:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.user(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserAssets:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getUserAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserAssetIds:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getUserAssetIds(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserAssetsCounts:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getUserAssetsCounts(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserCollectionAssets:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getUserCollectionAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserCollectionsAssets:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getUserCollectionsAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserSlotAssets:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getUserSlotAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserSlotsAssets:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getUserSlotsAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAssetHistory:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getAssetHistory(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAssetMarketHistory:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getAssetMarketHistory(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAssetOwnershipHistory:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.getAssetOwnershipHistory(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},mint:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.mint(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},send:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.send(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},sendAsset:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.sendAsset(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},sendAssets:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.sendAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},sendCollectionAssets:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.sendCollectionAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},sendLowestAsset:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.sendLowestAsset(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},sendRandomAsset:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.sendRandomAsset(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},update:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.update(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAsset:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.updateAsset(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAssets:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.updateAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateCollectionAssets:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.updateCollectionAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},expressionValues:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.expressionValues(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAssetExpressionValue:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.updateAssetExpressionValue(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAssetsExpressionValue:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.updateAssetsExpressionValue(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateCollectionAssetsExpressionValue:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.updateCollectionAssetsExpressionValue(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateBulkExpressionValues:function(e,r){try{return Promise.resolve(p(function(){return Promise.resolve(t.updateBulkExpressionValues(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},t}return t(n,e),n.prototype.mint=function(e,r){try{return Promise.resolve(this.raw.mint(e,r)).then(function(r){return e.includeAssetIds?r.body.assetIds:r.success})}catch(e){return Promise.reject(e)}},n}(f);function v(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var g=/*#__PURE__*/function(e){function n(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).info=function(e,r){try{return Promise.resolve(t.raw.info(e,r)).then(function(r){return e.collectionIds?r.body.collections:r.body.collections[0]})}catch(e){return Promise.reject(e)}},t.getCollection=function(e,r){try{return Promise.resolve(t.raw.getCollection(e,r)).then(function(e){return e.body.collections[0]})}catch(e){return Promise.reject(e)}},t.getCollections=function(e,r){try{return Promise.resolve(t.raw.getCollections(e,r)).then(function(e){return e.body.collections})}catch(e){return Promise.reject(e)}},t.assets=function(e,r){try{return Promise.resolve(t.raw.getCollectionAssets(e,r)).then(function(e){return e.body.collection.assets})}catch(e){return Promise.reject(e)}},t.getCollectionAssets=function(e,r){try{return Promise.resolve(t.raw.getCollectionAssets(e,r)).then(function(e){return e.body.collection.assets})}catch(e){return Promise.reject(e)}},t.getCollectionAssetIds=function(e,r){try{return Promise.resolve(t.raw.getCollectionAssetIds(e,r)).then(function(e){return e.body.collection.assets})}catch(e){return Promise.reject(e)}},t.createCollection=function(e,r){try{return Promise.resolve(t.raw.createCollection(e,r)).then(function(e){return e.body.collectionId})}catch(e){return Promise.reject(e)}},t.updateCollection=function(e,r){try{return Promise.resolve(t.raw.updateCollection(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.updateCollectionImage=function(e,r){try{return Promise.resolve(t.raw.updateCollectionImage(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.updateDefaultProperties=function(e,r){try{return Promise.resolve(t.raw.updateDefaultProperties(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.activateCollection=function(e,r){try{return Promise.resolve(t.raw.activateCollection(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.deactivateCollection=function(e,r){try{return Promise.resolve(t.raw.deactivateCollection(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.createCollectionSubmission=function(e,r){try{return Promise.resolve(t.raw.createCollectionSubmission(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.updateCollectionSubmission=function(e,r){try{return Promise.resolve(t.raw.updateCollectionSubmission(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.collectionSubmissionRequest=function(e,r){try{return Promise.resolve(t.raw.collectionSubmissionRequest(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.raw={info:function(e,r){try{return Promise.resolve(t.request("/collection/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getCollection:function(e,r){try{return Promise.resolve(t.request("/collection/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getCollections:function(e,r){try{return Promise.resolve(t.request("/collection/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},assets:function(e,r){try{return Promise.resolve(t.request("/collection/assets"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getCollectionAssets:function(e,r){try{return Promise.resolve(t.request("/collection/assets"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getCollectionAssetIds:function(e,n){try{return Promise.resolve(t.request("/collection/assets"+h(r({},e,{idOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},createCollection:function(e,r){try{return Promise.resolve(t.request("/collection/new",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateCollection:function(e,r){try{return Promise.resolve(t.request("/collection/update",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateCollectionImage:function(e,r){try{return Promise.resolve(t.request("/collection/image",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateDefaultProperties:function(e,r){try{return Promise.resolve(t.request("/collection/defaultProperties",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},activateCollection:function(e,r){try{return Promise.resolve(t.request("/collection/activate",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},deactivateCollection:function(e,r){try{return Promise.resolve(t.request("/collection/deactivate",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},createCollectionSubmission:function(e,r){try{return Promise.resolve(t.request("/collection/submission/new",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateCollectionSubmission:function(e,r){try{return Promise.resolve(t.request("/collection/submission/update",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},collectionSubmissionRequest:function(e,r){try{return Promise.resolve(t.request("/collection/submission/request",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}}},t.safe={info:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.info(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollection:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.getCollection(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollections:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.getCollections(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},assets:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.assets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionAssets:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.getCollectionAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionAssetIds:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.getCollectionAssetIds(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},createCollection:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.createCollection(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateCollection:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.updateCollection(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateCollectionImage:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.updateCollectionImage(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateDefaultProperties:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.updateDefaultProperties(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},activateCollection:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.activateCollection(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},deactivateCollection:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.deactivateCollection(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},createCollectionSubmission:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.createCollectionSubmission(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateCollectionSubmission:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.updateCollectionSubmission(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},collectionSubmissionRequest:function(e,r){try{return Promise.resolve(v(function(){return Promise.resolve(t.collectionSubmissionRequest(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},t}return t(n,e),n}(f);function P(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var b=/*#__PURE__*/function(e){function r(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=e.call.apply(e,[this].concat(n))||this).getEquips=function(e,t){try{return Promise.resolve(r.raw.getEquips(e,t)).then(function(e){return e.body.equip})}catch(e){return Promise.reject(e)}},r.setEquip=function(e,t){try{return Promise.resolve(r.raw.setEquip(e,t)).then(function(e){return e.body.equipId})}catch(e){return Promise.reject(e)}},r.removeEquip=function(e,t){try{return Promise.resolve(r.raw.removeEquip(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.raw={getEquips:function(e,t){try{return Promise.resolve(r.request("/equip/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},setEquip:function(e,t){try{return Promise.resolve(r.request("/equip/new",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},removeEquip:function(e,t){try{return Promise.resolve(r.request("/equip",{method:"DELETE",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}}},r.safe={getEquips:function(e,t){try{return Promise.resolve(P(function(){return Promise.resolve(r.getEquips(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},setEquip:function(e,t){try{return Promise.resolve(P(function(){return Promise.resolve(r.setEquip(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},removeEquip:function(e,t){try{return Promise.resolve(P(function(){return Promise.resolve(r.removeEquip(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},r}return t(r,e),r}(f);function A(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var E=/*#__PURE__*/function(e){function r(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=e.call.apply(e,[this].concat(n))||this).getExpressionTypes=function(){try{return Promise.resolve(r.raw.getExpressionTypes()).then(function(e){return e.body.expressionTypes})}catch(e){return Promise.reject(e)}},r.getSlotExpressions=function(e,t){try{return Promise.resolve(r.raw.getSlotExpressions(e,t)).then(function(e){return e.body.expressions})}catch(e){return Promise.reject(e)}},r.createExpression=function(e,t){try{return Promise.resolve(r.raw.createExpression(e,t)).then(function(e){return e.body.expressionId})}catch(e){return Promise.reject(e)}},r.updateExpression=function(e,t){try{return Promise.resolve(r.raw.updateExpression(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.updateExpressionValues=function(e,t){try{return Promise.resolve(r.raw.updateExpressionValues(e,t)).then(function(r){return e.collectionId?r.success:e.assetIds?r.body.assetIds:r.body.expressionValueId})}catch(e){return Promise.reject(e)}},r.updateAssetExpressionValue=function(e,t){try{return Promise.resolve(r.raw.updateAssetExpressionValue(e,t)).then(function(e){return e.body.expressionValueId})}catch(e){return Promise.reject(e)}},r.updateAssetsExpressionValue=function(e,t){try{return Promise.resolve(r.raw.updateAssetsExpressionValue(e,t)).then(function(e){return e.body.assetIds})}catch(e){return Promise.reject(e)}},r.updateCollectionAssetsExpressionValue=function(e,t){try{return Promise.resolve(r.raw.updateCollectionAssetsExpressionValue(e,t)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},r.updateBulkExpressionValues=function(e,t){try{return Promise.resolve(r.raw.updateBulkExpressionValues(e,t)).then(function(e){return e.body.log})}catch(e){return Promise.reject(e)}},r.raw={getExpressionTypes:function(){try{return Promise.resolve(r.request("/slot/expressions/types"))}catch(e){return Promise.reject(e)}},getSlotExpressions:function(e,t){try{return Promise.resolve(r.request("/slot/expressions"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},createExpression:function(e,t){try{return Promise.resolve(r.request("/slot/expressions/new",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateExpression:function(e,t){try{return Promise.resolve(r.request("/slot/expressions/update",{method:"PUT",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateExpressionValues:function(e,t){try{return Promise.resolve(r.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateAssetExpressionValue:function(e,t){try{return Promise.resolve(r.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateAssetsExpressionValue:function(e,t){try{return Promise.resolve(r.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateCollectionAssetsExpressionValue:function(e,t){try{return Promise.resolve(r.request("/asset/expressionValues",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},updateBulkExpressionValues:function(e,t){try{return Promise.resolve(r.request("/asset/expressionValuesBulk",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}}},r.safe={getExpressionTypes:function(){try{return Promise.resolve(A(function(){return Promise.resolve(r.getExpressionTypes()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getSlotExpressions:function(e,t){try{return Promise.resolve(A(function(){return Promise.resolve(r.getSlotExpressions(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},createExpression:function(e,t){try{return Promise.resolve(A(function(){return Promise.resolve(r.createExpression(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateExpression:function(e,t){try{return Promise.resolve(A(function(){return Promise.resolve(r.updateExpression(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateExpressionValues:function(e,t){try{return Promise.resolve(A(function(){return Promise.resolve(r.updateExpressionValues(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAssetExpressionValue:function(e,t){try{return Promise.resolve(A(function(){return Promise.resolve(r.updateAssetExpressionValue(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateAssetsExpressionValue:function(e,t){try{return Promise.resolve(A(function(){return Promise.resolve(r.updateAssetsExpressionValue(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateCollectionAssetsExpressionValue:function(e,t){try{return Promise.resolve(A(function(){return Promise.resolve(r.updateCollectionAssetsExpressionValue(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateBulkExpressionValues:function(e,t){try{return Promise.resolve(A(function(){return Promise.resolve(r.updateBulkExpressionValues(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},r}return t(r,e),r}(f);function w(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var I=/*#__PURE__*/function(e){function n(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).getListing=function(e,r){try{return Promise.resolve(t.raw.getListing(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.user=function(e,r){try{return Promise.resolve(t.raw.user(e,r)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},t.getUserListings=function(e,r){try{return Promise.resolve(t.raw.getUserListings(e,r)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},t.getUserListingsCounts=function(e,r){try{return Promise.resolve(t.raw.getUserListingsCounts(e,r)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},t.getUserCollectionListings=function(e,r){try{return Promise.resolve(t.raw.getUserCollectionListings(e,r)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},t.getUserCollectionListingsCounts=function(e,r){try{return Promise.resolve(t.raw.getUserCollectionListingsCounts(e,r)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},t.getUserSales=function(e,r){try{return Promise.resolve(t.raw.getUserSales(e,r)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},t.getUserSalesCounts=function(e,r){try{return Promise.resolve(t.raw.getUserSalesCounts(e,r)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},t.getUserPurchases=function(e,r){try{return Promise.resolve(t.raw.getUserPurchases(e,r)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},t.getUserPurchasesCounts=function(e,r){try{return Promise.resolve(t.raw.getUserPurchasesCounts(e,r)).then(function(e){return e.body.listings})}catch(e){return Promise.reject(e)}},t.collection=function(e,r){try{return Promise.resolve(t.raw.collection(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.getCollectionListings=function(e,r){try{return Promise.resolve(t.raw.getCollectionListings(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.getCollectionsListings=function(e,r){try{return Promise.resolve(t.raw.getCollectionsListings(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.getCollectionListingsCounts=function(e,r){try{return Promise.resolve(t.raw.getCollectionListingsCounts(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.getCollectionsListingsCounts=function(e,r){try{return Promise.resolve(t.raw.getCollectionsListingsCounts(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.getCollectionListingsStats=function(e,r){try{return Promise.resolve(t.raw.getCollectionListingsStats(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.getCollectionsListingsStats=function(e,r){try{return Promise.resolve(t.raw.getCollectionsListingsStats(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.app=function(e,r){try{return Promise.resolve(t.raw.app(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.getAppListings=function(e,r){try{return Promise.resolve(t.raw.getAppListings(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.getAppListingsCounts=function(e,r){try{return Promise.resolve(t.raw.getAppListingsCounts(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.getAppListingsStats=function(e,r){try{return Promise.resolve(t.raw.getAppListingsStats(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.new=function(e,r){try{return Promise.resolve(t.raw.new(e,r)).then(function(r){return r.body[e.collectionId||e.assetIds?"assetIds":"listing"]})}catch(e){return Promise.reject(e)}},t.listAsset=function(e,r){try{return Promise.resolve(t.raw.listAsset(e,r)).then(function(e){return e.body.listing})}catch(e){return Promise.reject(e)}},t.listAssets=function(e,r){try{return Promise.resolve(t.raw.listAssets(e,r)).then(function(e){return e.body.assetIds})}catch(e){return Promise.reject(e)}},t.listCollectionAssets=function(e,r){try{return Promise.resolve(t.raw.listCollectionAssets(e,r)).then(function(e){return e.body.assetIds})}catch(e){return Promise.reject(e)}},t.updateListing=function(e,r){try{return Promise.resolve(t.raw.updateListing(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.buyListing=function(e,r){try{return Promise.resolve(t.raw.buyListing(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.removeListing=function(e,r){try{return Promise.resolve(t.raw.removeListing(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.raw={getListing:function(e,r){try{return Promise.resolve(t.request("/listing/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},user:function(e,r){try{return Promise.resolve(t.request("/listing/user"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getUserListings:function(e,n){try{return Promise.resolve(t.request("/listing/user"+h(r({status:"active"},e,{sellerOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserListingsCounts:function(e,n){try{return Promise.resolve(t.request("/listing/user"+h(r({status:"active"},e,{sellerOnly:!0,countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserCollectionListings:function(e,n){try{return Promise.resolve(t.request("/listing/user"+h(r({status:"active"},e,{sellerOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserCollectionListingsCounts:function(e,n){try{return Promise.resolve(t.request("/listing/user"+h(r({status:"active"},e,{sellerOnly:!0,countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserSales:function(e,n){try{return Promise.resolve(t.request("/listing/user"+h(r({},e,{sellerOnly:!0,status:"sold"})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserSalesCounts:function(e,n){try{return Promise.resolve(t.request("/listing/user"+h(r({},e,{sellerOnly:!0,status:"sold",countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserPurchases:function(e,n){try{return Promise.resolve(t.request("/listing/user"+h(r({},e,{buyerOnly:!0,status:"sold"})),{headers:n}))}catch(e){return Promise.reject(e)}},getUserPurchasesCounts:function(e,n){try{return Promise.resolve(t.request("/listing/user"+h(r({},e,{buyerOnly:!0,status:"sold",countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},collection:function(e,r){try{return Promise.resolve(t.request("/listing/collection"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getCollectionListings:function(e,r){try{return Promise.resolve(t.request("/listing/collection"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getCollectionsListings:function(e,r){try{return Promise.resolve(t.request("/listing/collection"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getCollectionListingsCounts:function(e,n){try{return Promise.resolve(t.request("/listing/collection"+h(r({},e,{countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getCollectionsListingsCounts:function(e,n){try{return Promise.resolve(t.request("/listing/collection"+h(r({},e,{countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getCollectionListingsStats:function(e,n){try{return Promise.resolve(t.request("/listing/collection"+h(r({},e,{countsOnly:!0,collectionStats:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getCollectionsListingsStats:function(e,n){try{return Promise.resolve(t.request("/listing/collection"+h(r({},e,{countsOnly:!0,collectionStats:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},app:function(e,r){try{return Promise.resolve(t.request("/listing/app"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getAppListings:function(e,r){try{return Promise.resolve(t.request("/listing/app"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getAppListingsCounts:function(e,n){try{return Promise.resolve(t.request("/listing/app"+h(r({},e,{countsOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getAppListingsStats:function(e,n){try{return Promise.resolve(t.request("/listing/app"+h(r({},e,{countsOnly:!0,collectionStats:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},new:function(e,r){try{return Promise.resolve(t.request("/listing/new",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},listAsset:function(e,r){try{return Promise.resolve(t.request("/listing/new",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},listAssets:function(e,r){try{return Promise.resolve(t.request("/listing/new",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},listCollectionAssets:function(e,r){try{return Promise.resolve(t.request("/listing/new",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateListing:function(e,r){try{return Promise.resolve(t.request("/listing/update",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},buyListing:function(e,r){try{return Promise.resolve(t.request("/listing/buy",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},removeListing:function(e,r){try{return Promise.resolve(t.request("/listing",{method:"DELETE",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}}},t.safe={getListing:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getListing(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},user:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.user(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserListings:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getUserListings(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserListingsCounts:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getUserListingsCounts(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserCollectionListings:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getUserCollectionListings(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserCollectionListingsCounts:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getUserCollectionListingsCounts(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserSales:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getUserSales(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserSalesCounts:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getUserSalesCounts(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserPurchases:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getUserPurchases(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserPurchasesCounts:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getUserPurchasesCounts(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},collection:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.collection(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionListings:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getCollectionListings(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionsListings:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getCollectionsListings(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionListingsCounts:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getCollectionListingsCounts(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionsListingsCounts:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getCollectionsListingsCounts(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionListingsStats:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getCollectionListingsStats(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCollectionsListingsStats:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getCollectionsListingsStats(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},app:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.app(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppListings:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getAppListings(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppListingsCounts:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getAppListingsCounts(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getAppListingsStats:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.getAppListingsStats(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},new:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.new(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},listAsset:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.listAsset(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},listAssets:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.listAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},listCollectionAssets:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.listCollectionAssets(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateListing:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.updateListing(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},buyListing:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.buyListing(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},removeListing:function(e,r){try{return Promise.resolve(w(function(){return Promise.resolve(t.removeListing(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},t}return t(n,e),n}(f);function j(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var _=/*#__PURE__*/function(e){function r(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=e.call.apply(e,[this].concat(n))||this).buyItem=function(e,t){try{return Promise.resolve(r.raw.buyItem(e,t)).then(function(e){return e.body.assetId})}catch(e){return Promise.reject(e)}},r.summary=function(e){try{return Promise.resolve(r.raw.summary(e)).then(function(e){return e.body.summary})}catch(e){return Promise.reject(e)}},r.raw={buyItem:function(e,t){try{return Promise.resolve(r.request("/shop/buy",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},summary:function(e){try{return Promise.resolve(r.request("/shop/summary",{headers:e}))}catch(e){return Promise.reject(e)}}},r.safe={buyItem:function(e,t){try{return Promise.resolve(j(function(){return Promise.resolve(r.buyItem(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},summary:function(e){try{return Promise.resolve(j(function(){return Promise.resolve(r.summary(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},r}return t(r,e),r}(f);function S(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var O=/*#__PURE__*/function(e){function n(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).getSlot=function(e,r){try{return Promise.resolve(t.raw.getSlot(e,r)).then(function(e){return e.body.slot})}catch(e){return Promise.reject(e)}},t.collections=function(e,r){try{return Promise.resolve(t.raw.collections(e,r)).then(function(e){return e.body.slot.collections})}catch(e){return Promise.reject(e)}},t.getSlotCollections=function(e,r){try{return Promise.resolve(t.raw.getSlotCollections(e,r)).then(function(e){return e.body.slot.collections})}catch(e){return Promise.reject(e)}},t.getSlotCollectionIds=function(e,r){try{return Promise.resolve(t.raw.getSlotCollectionIds(e,r)).then(function(e){return e.body.slot.collections})}catch(e){return Promise.reject(e)}},t.getExpressionTypes=function(){try{return Promise.resolve(t.raw.getExpressionTypes()).then(function(e){return e.body.expressionTypes})}catch(e){return Promise.reject(e)}},t.getSlotExpressions=function(e,r){try{return Promise.resolve(t.raw.getSlotExpressions(e,r)).then(function(e){return e.body.expressions})}catch(e){return Promise.reject(e)}},t.createExpression=function(e,r){try{return Promise.resolve(t.raw.createExpression(e,r)).then(function(e){return e.body.expressionId})}catch(e){return Promise.reject(e)}},t.updateExpression=function(e,r){try{return Promise.resolve(t.raw.updateExpression(e,r)).then(function(e){return e.success})}catch(e){return Promise.reject(e)}},t.raw={getSlot:function(e,r){try{return Promise.resolve(t.request("/slot/info"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},collections:function(e,r){try{return Promise.resolve(t.request("/slot/collections"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getSlotCollections:function(e,r){try{return Promise.resolve(t.request("/slot/collections"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getSlotCollectionIds:function(e,n){try{return Promise.resolve(t.request("/slot/collections"+h(r({},e,{idOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},getExpressionTypes:function(){try{return Promise.resolve(t.request("/slot/expressions/types"))}catch(e){return Promise.reject(e)}},getSlotExpressions:function(e,r){try{return Promise.resolve(t.request("/slot/expressions"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},createExpression:function(e,r){try{return Promise.resolve(t.request("/slot/expressions/new",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},updateExpression:function(e,r){try{return Promise.resolve(t.request("/slot/expressions/update",{method:"PUT",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}}},t.safe={getSlot:function(e,r){try{return Promise.resolve(S(function(){return Promise.resolve(t.getSlot(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},collections:function(e,r){try{return Promise.resolve(S(function(){return Promise.resolve(t.collections(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getSlotCollections:function(e,r){try{return Promise.resolve(S(function(){return Promise.resolve(t.getSlotCollections(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getSlotCollectionIds:function(e,r){try{return Promise.resolve(S(function(){return Promise.resolve(t.getSlotCollectionIds(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getExpressionTypes:function(){try{return Promise.resolve(S(function(){return Promise.resolve(t.getExpressionTypes()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getSlotExpressions:function(e,r){try{return Promise.resolve(S(function(){return Promise.resolve(t.getSlotExpressions(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},createExpression:function(e,r){try{return Promise.resolve(S(function(){return Promise.resolve(t.createExpression(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},updateExpression:function(e,r){try{return Promise.resolve(S(function(){return Promise.resolve(t.updateExpression(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},t}return t(n,e),n}(f);function C(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var T,N,L,R,x,k,M,U=/*#__PURE__*/function(e){function n(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).getUser=function(e){try{return Promise.resolve(t.raw.getUser(e)).then(function(e){return e.body.user})}catch(e){return Promise.reject(e)}},t.collections=function(e,r){try{return Promise.resolve(t.raw.collections(e,r)).then(function(e){return e.body.collections})}catch(e){return Promise.reject(e)}},t.getUserCollections=function(e,r){try{return Promise.resolve(t.raw.getUserCollections(e,r)).then(function(e){return e.body.collections})}catch(e){return Promise.reject(e)}},t.getUserCollectionIds=function(e,r){try{return Promise.resolve(t.raw.getUserCollectionIds(e,r)).then(function(e){return e.body.collections})}catch(e){return Promise.reject(e)}},t.register=function(e,r){try{return Promise.resolve(t.raw.register(e,r)).then(function(r){return null!=e&&e.otp?r.body.otp:r.body})}catch(e){return Promise.reject(e)}},t.getOTP=function(e){try{return Promise.resolve(t.raw.getOTP(e)).then(function(e){return e.body.otp})}catch(e){return Promise.reject(e)}},t.registerDid=function(e,r){try{return Promise.resolve(t.raw.registerDid(e,r)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},t.raw={getUser:function(e){try{return Promise.resolve(t.request("/user/info",{headers:e}))}catch(e){return Promise.reject(e)}},collections:function(e,r){try{return Promise.resolve(t.request("/user/collections"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getUserCollections:function(e,r){try{return Promise.resolve(t.request("/user/collections"+h(e),{headers:r}))}catch(e){return Promise.reject(e)}},getUserCollectionIds:function(e,n){try{return Promise.resolve(t.request("/user/collections"+h(r({},e,{idOnly:!0})),{headers:n}))}catch(e){return Promise.reject(e)}},register:function(e,r){try{return Promise.resolve(t.request("/user/register",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}},getOTP:function(e){try{return Promise.resolve(t.request("/user/register",{method:"POST",headers:e}))}catch(e){return Promise.reject(e)}},registerDid:function(e,r){try{return Promise.resolve(t.request("/user/register",{method:"POST",body:JSON.stringify(e),headers:r}))}catch(e){return Promise.reject(e)}}},t.safe={getUser:function(e){try{return Promise.resolve(C(function(){return Promise.resolve(t.getUser(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},collections:function(e,r){try{return Promise.resolve(C(function(){return Promise.resolve(t.collections(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserCollections:function(e,r){try{return Promise.resolve(C(function(){return Promise.resolve(t.getUserCollections(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserCollectionIds:function(e,r){try{return Promise.resolve(C(function(){return Promise.resolve(t.getUserCollectionIds(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},register:function(e,r){try{return Promise.resolve(C(function(){return Promise.resolve(t.register(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getOTP:function(e){try{return Promise.resolve(C(function(){return Promise.resolve(t.getOTP(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},registerDid:function(e,r){try{return Promise.resolve(C(function(){return Promise.resolve(t.registerDid(e,r)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},t}return t(n,e),n}(f),q=((L=q||{}).MissingApiKey="MISSING_API_KEY",L.ModalNotReady="MODAL_NOT_READY",L.MalformedResponse="MALFORMED_RESPONSE",L.InvalidArgument="INVALID_ARGUMENT",L.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",L.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",L),D=((N=D||{}).SyncWeb3Method="SYNC_WEB3_METHOD",N.DuplicateIframe="DUPLICATE_IFRAME",N.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",N.DeprecationNotice="DEPRECATION_NOTICE",N),$=((T=$||{})[T.ParseError=-32700]="ParseError",T[T.InvalidRequest=-32600]="InvalidRequest",T[T.MethodNotFound=-32601]="MethodNotFound",T[T.InvalidParams=-32602]="InvalidParams",T[T.InternalError=-32603]="InternalError",T[T.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",T[T.MagicLinkExpired=-10001]="MagicLinkExpired",T[T.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",T[T.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",T[T.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",T[T.UpdateEmailFailed=-10004]="UpdateEmailFailed",T[T.UserRequestEditEmail=-10005]="UserRequestEditEmail",T[T.InactiveRecipient=-10010]="InactiveRecipient",T[T.AccessDeniedToUser=-10011]="AccessDeniedToUser",T[T.RedirectLoginComplete=-10015]="RedirectLoginComplete",T),B=((k=B||{}).MetaMask="metamask",k.CoinbaseWallet="coinbase_wallet",k),F=((x=F||{}).WalletSelected="wallet_selected",x.WalletConnected="wallet_connected",x.WalletRejected="wallet_rejected",x),W=((R=W||{}).LoginWithSms="magic_auth_login_with_sms",R.LoginWithEmailOTP="magic_auth_login_with_email_otp",R.LoginWithMagicLink="magic_auth_login_with_magic_link",R.LoginWithCredential="magic_auth_login_with_credential",R.SetAuthorizationToken="magic_auth_set_authorization_token",R.GetIdToken="magic_auth_get_id_token",R.GenerateIdToken="magic_auth_generate_id_token",R.GetMetadata="magic_auth_get_metadata",R.IsLoggedIn="magic_is_logged_in",R.Logout="magic_auth_logout",R.UpdateEmail="magic_auth_update_email",R.UserSettings="magic_auth_settings",R.UserSettingsTestMode="magic_auth_settings_testing_mode",R.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",R.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",R.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",R.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",R.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",R.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",R.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",R.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",R.LogoutTestMode="magic_auth_logout_testing_mode",R.UpdateEmailTestMode="magic_auth_update_email_testing_mode",R.IntermediaryEvent="magic_intermediary_event",R.RequestAccounts="eth_requestAccounts",R.GetInfo="magic_get_info",R.ShowUI="magic_wallet",R.NFTPurchase="magic_nft_purchase",R.NFTCheckout="magic_nft_checkout",R.NFTTransfer="magic_nft_transfer",R.RequestUserInfoWithUI="mc_request_user_info",R.Disconnect="mc_disconnect",R.UpdatePhoneNumber="magic_auth_update_phone_number",R.UpdatePhoneNumberTestMode="magic_auth_update_phone_number_testing_mode",R.RecoverAccount="magic_auth_recover_account",R.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",R.MagicBoxHeartBeat="magic_box_heart_beat",R.AutoConnect="mc_auto_connect",R.Login="mc_login",R.EncryptV1="magic_auth_encrypt_v1",R.DecryptV1="magic_auth_decrypt_v1",R.ShowNFTs="magic_show_nfts",R.ShowOnRamp="magic_show_fiat_onramp",R.ShowSendTokensUI="magic_show_send_tokens_ui",R.ShowAddress="magic_show_address",R.ShowBalances="magic_show_balances",R.SendGaslessTransaction="eth_sendGaslessTransaction",R),V=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e.MAGIC_MG_BOX_SEND_RECEIPT="MAGIC_MG_BOX_SEND_RECEIPT",e))(V||{}),G=((M=G||{}).MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",M),z=(e=>(e.UpdateEmail="update-email",e.MFA="mfa",e.Recovery="recovery",e))(z||{}),H=(e=>(e.Retry="retry",e))(H||{}),J=(e=>(e.EmailSent="email-sent",e.EmailNotDeliverable="email-not-deliverable",e))(J||{}),X=(e=>(e.VerifyEmailOtp="verify-email-otp",e.Cancel="cancel",e))(X||{}),K=(e=>(e.EmailOTPSent="email-otp-sent",e.InvalidEmailOtp="invalid-email-otp",e))(K||{}),Y=(e=>(e.Retry="device-retry",e))(Y||{}),Q=(e=>(e.DeviceApproved="device-approved",e.DeviceNeedsApproval="device-needs-approval",e.DeviceVerificationLinkExpired="device-verification-link-expired",e.DeviceVerificationEmailSent="device-verification-email-sent",e))(Q||{}),Z=(e=>(e.Harmony="HARMONY",e))(Z||{}),ee=(e=>(e.PhoneNumber="phone_number",e))(ee||{}),re=Object.create,te=Object.defineProperty,ne=Object.defineProperties,oe=Object.getOwnPropertyDescriptor,se=Object.getOwnPropertyDescriptors,ie=Object.getOwnPropertyNames,ue=Object.getOwnPropertySymbols,ce=Object.getPrototypeOf,ae=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,fe=(e,r,t)=>r in e?te(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,he=(e,r)=>{for(var t in r||(r={}))ae.call(r,t)&&fe(e,t,r[t]);if(ue)for(var t of ue(r))le.call(r,t)&&fe(e,t,r[t]);return e},de=(e,r)=>ne(e,se(r)),me=(e,r,t)=>new Promise((n,o)=>{var s=e=>{try{u(t.next(e))}catch(e){o(e)}},i=e=>{try{u(t.throw(e))}catch(e){o(e)}},u=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,i);u((t=t.apply(e,r)).next())}),pe=((e,r)=>()=>(r||e(r={exports:{}},r),r.exports))((e,r)=>{var t=Object.prototype.hasOwnProperty,n="~";function o(){}function s(e,r,t){this.fn=e,this.context=r,this.once=t||!1}function i(e,r,t,o,i){if("function"!=typeof t)throw new TypeError("The listener must be a function");var u=new s(t,o||e,i),c=n?n+r:r;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],u]:e._events[c].push(u):(e._events[c]=u,e._eventsCount++),e}function u(e,r){0==--e._eventsCount?e._events=new o:delete e._events[r]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),c.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},c.prototype.listeners=function(e){var r=this._events[n?n+e:e];if(!r)return[];if(r.fn)return[r.fn];for(var t=0,o=r.length,s=new Array(o);t<o;t++)s[t]=r[t].fn;return s},c.prototype.listenerCount=function(e){var r=this._events[n?n+e:e];return r?r.fn?1:r.length:0},c.prototype.emit=function(e,r,t,o,s,i){var u=n?n+e:e;if(!this._events[u])return!1;var c,a,l=this._events[u],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,r),!0;case 3:return l.fn.call(l.context,r,t),!0;case 4:return l.fn.call(l.context,r,t,o),!0;case 5:return l.fn.call(l.context,r,t,o,s),!0;case 6:return l.fn.call(l.context,r,t,o,s,i),!0}for(a=1,c=new Array(f-1);a<f;a++)c[a-1]=arguments[a];l.fn.apply(l.context,c)}else{var h,d=l.length;for(a=0;a<d;a++)switch(l[a].once&&this.removeListener(e,l[a].fn,void 0,!0),f){case 1:l[a].fn.call(l[a].context);break;case 2:l[a].fn.call(l[a].context,r);break;case 3:l[a].fn.call(l[a].context,r,t);break;case 4:l[a].fn.call(l[a].context,r,t,o);break;default:if(!c)for(h=1,c=new Array(f-1);h<f;h++)c[h-1]=arguments[h];l[a].fn.apply(l[a].context,c)}}return!0},c.prototype.on=function(e,r,t){return i(this,e,r,t,!1)},c.prototype.once=function(e,r,t){return i(this,e,r,t,!0)},c.prototype.removeListener=function(e,r,t,o){var s=n?n+e:e;if(!this._events[s])return this;if(!r)return u(this,s),this;var i=this._events[s];if(i.fn)i.fn===r&&(!o||i.once)&&(!t||i.context===t)&&u(this,s);else{for(var c=0,a=[],l=i.length;c<l;c++)(i[c].fn!==r||o&&!i[c].once||t&&i[c].context!==t)&&a.push(i[c]);a.length?this._events[s]=1===a.length?a[0]:a:u(this,s)}return this},c.prototype.removeAllListeners=function(e){var r;return e?this._events[r=n?n+e:e]&&u(this,r):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)}),ye={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},ve="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},ge=ve,Pe=function(e){let r={exports:{}};return function(e,r){let{MAX_SAFE_COMPONENT_LENGTH:t}=ye,n=(r=e.exports={}).re=[],o=r.src=[],s=r.t={},i=0,u=(e,r,t)=>{let u=i++;ge(u,r),s[e]=u,o[u]=r,n[u]=new RegExp(r,t?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),u("FULL",`^${o[s.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),u("LOOSE",`^${o[s.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),u("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),u("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`),u("COERCERTL",o[s.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",u("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",u("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0.0.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(r,r.exports),r.exports}(),be=/^[0-9]+$/,Ae=(e,r)=>{let t=be.test(e),n=be.test(r);return t&&n&&(e=+e,r=+r),e===r?0:t&&!n?-1:n&&!t?1:e<r?-1:1},Ee={compareIdentifiers:Ae,rcompareIdentifiers:(e,r)=>Ae(r,e)},{MAX_LENGTH:we,MAX_SAFE_INTEGER:Ie}=ye,{re:je,t:_e}=Pe,{compareIdentifiers:Se}=Ee,Oe=class{constructor(e,r){if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof Oe){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>we)throw new TypeError(`version is longer than ${we} characters`);ge("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let t=e.trim().match(r.loose?je[_e.LOOSE]:je[_e.FULL]);if(!t)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>Ie||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ie||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ie||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=t[4]?t[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let r=+e;if(r>=0&&r<Ie)return r}return e}):[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ge("SemVer.compare",this.version,this.options,e),!(e instanceof Oe)){if("string"==typeof e&&e===this.version)return 0;e=new Oe(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Oe||(e=new Oe(e,this.options)),Se(this.major,e.major)||Se(this.minor,e.minor)||Se(this.patch,e.patch)}comparePre(e){if(e instanceof Oe||(e=new Oe(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let t=this.prerelease[r],n=e.prerelease[r];if(ge("prerelease compare",r,t,n),void 0===t&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===t)return-1;if(t!==n)return Se(t,n)}while(++r)}compareBuild(e){e instanceof Oe||(e=new Oe(e,this.options));let r=0;do{let t=this.build[r],n=e.build[r];if(ge("prerelease compare",r,t,n),void 0===t&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===t)return-1;if(t!==n)return Se(t,n)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",r),this.inc("pre",r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},Ce=(e,r,t)=>new Oe(e,t).compare(new Oe(r,t)),Te=(e,r,t,n)=>{switch(r){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof t&&(t=t.version),e===t;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof t&&(t=t.version),e!==t;case"":case"=":case"==":return((e,r,t)=>0===Ce(e,r,t))(e,t,n);case"!=":return((e,r,t)=>0!==Ce(e,r,t))(e,t,n);case">":return((e,r,t)=>Ce(e,r,t)>0)(e,t,n);case">=":return((e,r,t)=>Ce(e,r,t)>=0)(e,t,n);case"<":return((e,r,t)=>Ce(e,r,t)<0)(e,t,n);case"<=":return((e,r,t)=>Ce(e,r,t)<=0)(e,t,n);default:throw new TypeError(`Invalid operator: ${r}`)}},Ne=Symbol("SemVer ANY"),Le=class{static get ANY(){return Ne}constructor(e,r){if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof Le){if(e.loose===!!r.loose)return e;e=e.value}ge("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.value=this.semver===Ne?"":this.operator+this.semver.version,ge("comp",this)}parse(e){let r=e.match(this.options.loose?Re[xe.COMPARATORLOOSE]:Re[xe.COMPARATOR]);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),this.semver=r[2]?new Oe(r[2],this.options.loose):Ne}toString(){return this.value}test(e){if(ge("Comparator.test",e,this.options.loose),this.semver===Ne||e===Ne)return!0;if("string"==typeof e)try{e=new Oe(e,this.options)}catch(e){return!1}return Te(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Le))throw new TypeError("a Comparator is required");if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),""===this.operator)return""===this.value||new ke(e.value,r).test(this.value);if(""===e.operator)return""===e.value||new ke(this.value,r).test(e.semver);let t=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),n=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),i=Te(this.semver,"<",e.semver,r)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=Te(this.semver,">",e.semver,r)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return t||n||o&&s||i||u}},{re:Re,t:xe}=Pe,ke=class{constructor(e,r){if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof ke)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new ke(e.raw,r);if(e instanceof Le)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:r}=this.options;e=(e=e.trim()).replace(r?Me[Ue.HYPHENRANGELOOSE]:Me[Ue.HYPHENRANGE],Qe(this.options.includePrerelease)),ge("hyphen replace",e),e=e.replace(Me[Ue.COMPARATORTRIM],qe),ge("comparator trim",e,Me[Ue.COMPARATORTRIM]),e=(e=(e=e.replace(Me[Ue.TILDETRIM],De)).replace(Me[Ue.CARETTRIM],$e)).split(/\s+/).join(" ");let t=r?Me[Ue.COMPARATORLOOSE]:Me[Ue.COMPARATOR];return e.split(" ").map(e=>Fe(e,this.options)).join(" ").split(/\s+/).map(e=>Ye(e,this.options)).filter(this.options.loose?e=>!!e.match(t):()=>!0).map(e=>new Le(e,this.options))}intersects(e,r){if(!(e instanceof ke))throw new TypeError("a Range is required");return this.set.some(t=>Be(t,r)&&e.set.some(e=>Be(e,r)&&t.every(t=>e.every(e=>t.intersects(e,r)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new Oe(e,this.options)}catch(e){return!1}for(let r=0;r<this.set.length;r++)if(Ze(this.set[r],e,this.options))return!0;return!1}},{re:Me,t:Ue,comparatorTrimReplace:qe,tildeTrimReplace:De,caretTrimReplace:$e}=Pe,Be=(e,r)=>{let t=!0,n=e.slice(),o=n.pop();for(;t&&n.length;)t=n.every(e=>o.intersects(e,r)),o=n.pop();return t},Fe=(e,r)=>(ge("comp",e,r),e=ze(e,r),ge("caret",e),e=Ve(e,r),ge("tildes",e),e=Je(e,r),ge("xrange",e),e=Ke(e,r),ge("stars",e),e),We=e=>!e||"x"===e.toLowerCase()||"*"===e,Ve=(e,r)=>e.trim().split(/\s+/).map(e=>Ge(e,r)).join(" "),Ge=(e,r)=>e.replace(r.loose?Me[Ue.TILDELOOSE]:Me[Ue.TILDE],(r,t,n,o,s)=>{let i;return ge("tilde",e,r,t,n,o,s),We(t)?i="":We(n)?i=`>=${t}.0.0 <${+t+1}.0.0-0`:We(o)?i=`>=${t}.${n}.0 <${t}.${+n+1}.0-0`:s?(ge("replaceTilde pr",s),i=`>=${t}.${n}.${o}-${s} <${t}.${+n+1}.0-0`):i=`>=${t}.${n}.${o} <${t}.${+n+1}.0-0`,ge("tilde return",i),i}),ze=(e,r)=>e.trim().split(/\s+/).map(e=>He(e,r)).join(" "),He=(e,r)=>{ge("caret",e,r);let t=r.includePrerelease?"-0":"";return e.replace(r.loose?Me[Ue.CARETLOOSE]:Me[Ue.CARET],(r,n,o,s,i)=>{let u;return ge("caret",e,r,n,o,s,i),We(n)?u="":We(o)?u=`>=${n}.0.0${t} <${+n+1}.0.0-0`:We(s)?u="0"===n?`>=${n}.${o}.0${t} <${n}.${+o+1}.0-0`:`>=${n}.${o}.0${t} <${+n+1}.0.0-0`:i?(ge("replaceCaret pr",i),u="0"===n?"0"===o?`>=${n}.${o}.${s}-${i} <${n}.${o}.${+s+1}-0`:`>=${n}.${o}.${s}-${i} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${s}-${i} <${+n+1}.0.0-0`):(ge("no pr"),u="0"===n?"0"===o?`>=${n}.${o}.${s}${t} <${n}.${o}.${+s+1}-0`:`>=${n}.${o}.${s}${t} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${s} <${+n+1}.0.0-0`),ge("caret return",u),u})},Je=(e,r)=>(ge("replaceXRanges",e,r),e.split(/\s+/).map(e=>Xe(e,r)).join(" ")),Xe=(e,r)=>(e=e.trim()).replace(r.loose?Me[Ue.XRANGELOOSE]:Me[Ue.XRANGE],(t,n,o,s,i,u)=>{ge("xRange",e,t,n,o,s,i,u);let c=We(o),a=c||We(s),l=a||We(i);return"="===n&&l&&(n=""),u=r.includePrerelease?"-0":"",c?t=">"===n||"<"===n?"<0.0.0-0":"*":n&&l?(a&&(s=0),i=0,">"===n?(n=">=",a?(o=+o+1,s=0,i=0):(s=+s+1,i=0)):"<="===n&&(n="<",a?o=+o+1:s=+s+1),"<"===n&&(u="-0"),t=`${n+o}.${s}.${i}${u}`):a?t=`>=${o}.0.0${u} <${+o+1}.0.0-0`:l&&(t=`>=${o}.${s}.0${u} <${o}.${+s+1}.0-0`),ge("xRange return",t),t}),Ke=(e,r)=>(ge("replaceStars",e,r),e.trim().replace(Me[Ue.STAR],"")),Ye=(e,r)=>(ge("replaceGTE0",e,r),e.trim().replace(Me[r.includePrerelease?Ue.GTE0PRE:Ue.GTE0],"")),Qe=e=>(r,t,n,o,s,i,u,c,a,l,f,h,d)=>`${t=We(n)?"":We(o)?`>=${n}.0.0${e?"-0":""}`:We(s)?`>=${n}.${o}.0${e?"-0":""}`:i?`>=${t}`:`>=${t}${e?"-0":""}`} ${c=We(a)?"":We(l)?`<${+a+1}.0.0-0`:We(f)?`<${a}.${+l+1}.0-0`:h?`<=${a}.${l}.${f}-${h}`:e?`<${a}.${l}.${+f+1}-0`:`<=${c}`}`.trim(),Ze=(e,r,t)=>{for(let t=0;t<e.length;t++)if(!e[t].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let t=0;t<e.length;t++)if(ge(e[t].semver),e[t].semver!==Le.ANY&&e[t].semver.prerelease.length>0){let n=e[t].semver;if(n.major===r.major&&n.minor===r.minor&&n.patch===r.patch)return!0}return!1}return!0},er=(e,r,t)=>{try{r=new ke(r,t)}catch(e){return!1}return r.test(e)},{MAX_LENGTH:rr}=ye,{re:tr,t:nr}=Pe,{re:or,t:sr}=Pe,ir=(e,r)=>{if(e instanceof Oe)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let t=null;if((r=r||{}).rtl){let r;for(;(r=or[sr.COERCERTL].exec(e))&&(!t||t.index+t[0].length!==e.length);)t&&r.index+r[0].length===t.index+t[0].length||(t=r),or[sr.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;or[sr.COERCERTL].lastIndex=-1}else t=e.match(or[sr.COERCE]);return null===t?null:((e,r)=>{if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof Oe)return e;if("string"!=typeof e||e.length>rr||!(r.loose?tr[nr.LOOSE]:tr[nr.FULL]).test(e))return null;try{return new Oe(e,r)}catch(e){return null}})(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,r)};function ur(e){return String.fromCharCode(parseInt(e.slice(1),16))}function cr(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function ar(e){return function(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,ur))}(JSON.stringify(e))}function lr(e){return JSON.parse(function(e){return decodeURIComponent(Array.from(atob(e),cr).join(""))}(e))}function fr(e){return void 0===e}function hr(e){return function(e){return null===e}(e)||fr(e)}function dr(e){if(!e)return!0;for(let r in e)if(Object.hasOwnProperty.call(e,r))return!1;return!0}var mr={},pr={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},yr=class extends Error{constructor(e,r){super(`Magic SDK Error: [${e}] ${r}`),this.code=e,this.rawMessage=r,this.__proto__=Error,Object.setPrototypeOf(this,yr.prototype)}},vr=class extends Error{constructor(e){super(),this.__proto__=Error;let r=Number(null==e?void 0:e.code);this.rawMessage=(null==e?void 0:e.message)||"Internal error",this.code=function(e){return!hr(e)&&"number"==typeof e&&Object.values($).includes(e)}(r)?r:$.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(null==e?void 0:e.data)||void 0,Object.setPrototypeOf(this,vr.prototype)}},gr=class{constructor(e,r){this.code=e,this.rawMessage=r,this.message=`Magic SDK Warning: [${e}] ${r}`}log(){console.warn(this.message)}},Pr=class extends Error{constructor(e,r,t,n){super(`Magic Extension Error (${e.name}): [${r}] ${t}`),this.code=r,this.rawMessage=t,this.data=n,this.__proto__=Error,Object.setPrototypeOf(this,Pr.prototype)}},br=class{constructor(e,r,t){this.code=r,this.rawMessage=t,this.message=`Magic Extension Warning (${e.name}): [${r}] ${t}`}log(){console.warn(this.message)}};function Ar(){return new yr(q.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function Er(){return new yr(q.MalformedResponse,"Response from the Magic iframe is malformed.")}function wr(e){return new yr(q.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function Ir(e){let r=`Some extensions are incompatible with \`${mr.sdkName}@${mr.version}\`:`;return e.filter(e=>null!=e.compat).forEach(e=>{let t=e.compat[mr.sdkName];"string"==typeof t?r+=`\n  - Extension \`${e.name}\` supports version(s) \`${t}\``:t||(r+=`\n  - Extension \`${e.name}\` does not support ${mr.platform} environments.`)}),new yr(q.IncompatibleExtensions,r)}function jr(e){let{method:r,removalVersions:t,useInstead:n}=e;return new gr(D.DeprecationNotice,`\`${r}\` will be removed from \`${mr.sdkName}\` in version \`${t[mr.sdkName]}\`.${n?` Use \`${n}\` instead.`:""}`)}var _r=function*(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}();function Sr(){return _r.next().value}var Or=Symbol("Payload pre-processed by Magic SDK");function Cr(e){return Object.defineProperty(e,Or,{value:!0,enumerable:!1}),e}function Tr(e){var r,t,n;return function(e){return!!e[Or]}(e)||(e.jsonrpc=null!=(r=e.jsonrpc)?r:"2.0",e.id=Sr(),e.method=null!=(t=e.method)?t:"noop",e.params=null!=(n=e.params)?n:[],Cr(e)),e}function Nr(e,r=[]){return Cr({params:r,method:e,jsonrpc:"2.0",id:Sr()})}var Lr=class{constructor(e){e instanceof Lr?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):function(e){return!hr(e)&&!(fr(e.jsonrpc)||fr(e.id)||fr(e.result)&&fr(e.error))}(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return null!=this._error}get hasResult(){return void 0!==this._result}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},Rr=((e,r,t)=>(t=null!=e?re(ce(e)):{},((e,r,t,n)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let t of ie(r))!ae.call(e,t)&&void 0!==t&&te(e,t,{get:()=>r[t],enumerable:!(n=oe(r,t))||n.enumerable});return e})(e&&e.__esModule?t:te(t,"default",{value:e,enumerable:!0}),e)))(pe()),xr=class extends Rr.default{};function kr(){let e=new xr;return{emitter:e,createChainingEmitterMethod:(r,t)=>(...n)=>(e[r].apply(e,n),t),createBoundEmitterMethod:r=>(...t)=>e[r].apply(e,t)}}var Mr=Symbol("isPromiEvent");function Ur(e){return!!e[Mr]}function qr(e){let r=Dr(e),{createBoundEmitterMethod:t,createChainingEmitterMethod:n}=kr(),o=Symbol("Promise.then"),s=Symbol("Promise.catch"),i=Symbol("Promise.finally"),u=(e,r)=>(...t)=>{let n=r[e].apply(r,t);return c(n)},c=e=>Object.assign(e,{[Mr]:!0,[o]:e[o]||e.then,[s]:e[s]||e.catch,[i]:e[i]||e.finally,then:u(o,e),catch:u(s,e),finally:u(i,e),on:n("on",e),once:n("once",e),addListener:n("addListener",e),off:n("off",e),removeListener:n("removeListener",e),removeAllListeners:n("removeAllListeners",e),emit:t("emit"),eventNames:t("eventNames"),listeners:t("listeners"),listenerCount:t("listenerCount")}),a=c(r.then(e=>(a.emit("done",e),a.emit("settled"),e),e=>{throw a.emit("error",e),a.emit("settled"),e}));return a}function Dr(e){return new Promise((r,t)=>{let n=e(r,t);Promise.resolve(n).catch(t)})}var $r,Br=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let r=this.overlay.post(G.MAGIC_HANDLE_REQUEST,Tr(e)),t=qr((e,t)=>{r.then(r=>{if(n(),r.hasError)t(new vr(r.payload.error));else{if(!r.hasResult)throw Er();e(r.payload.result)}}).catch(e=>{n(),t(e)})}),n=this.overlay.on(V.MAGIC_HANDLE_EVENT,r=>{var n;let{response:o}=r.data;if(o.id===e.id&&(null==(n=o.result)?void 0:n.event)){let{event:e,params:r=[]}=o.result;t.emit(e,...r)}});return t}createIntermediaryEvent(e,r){return t=>{let n=Nr(W.IntermediaryEvent,[{payloadId:r,eventType:e,args:t}]);this.request(n)}}},Fr={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},Wr=class extends Br{loginWithMagicLink(e){let r="@magic-sdk/react-native"===mr.sdkName||"@magic-sdk/react-native-bare"===mr.sdkName||"@magic-sdk/react-native-expo"===mr.sdkName;if(r&&function(e,r){let[t]=e.split(".").map(Number);return t>=19}(mr.version))throw new Error("loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.");jr({method:"auth.loginWithMagicLink()",removalVersions:Fr,useInstead:r?"@magic-ext/auth auth.loginWithEmailOTP()":"@magic-ext/auth auth.loginWithMagicLink()"}).log();let{email:t,showUI:n=!0,redirectURI:o}=e,s=Nr(this.sdk.testMode?W.LoginWithMagicLinkTestMode:W.LoginWithMagicLink,[{email:t,showUI:n,redirectURI:o}]);return this.request(s)}loginWithSMS(e){jr({method:"auth.loginWithSMS()",removalVersions:Fr,useInstead:"@magic-ext/auth auth.loginWithSMS()"}).log();let{phoneNumber:r}=e,t=Nr(this.sdk.testMode?W.LoginWithSmsTestMode:W.LoginWithSms,[{phoneNumber:r,showUI:!0}]);return this.request(t)}loginWithEmailOTP(e){let{email:r,showUI:t,deviceCheckUI:n}=e,o=Nr(this.sdk.testMode?W.LoginWithEmailOTPTestMode:W.LoginWithEmailOTP,[{email:r,showUI:t,deviceCheckUI:n}]),s=this.request(o);return!n&&s&&s.on(Y.Retry,()=>{this.createIntermediaryEvent(Y.Retry,o.id)()}),!t&&s&&(s.on(X.VerifyEmailOtp,e=>{this.createIntermediaryEvent(X.VerifyEmailOtp,o.id)(e)}),s.on(X.Cancel,()=>{this.createIntermediaryEvent(X.Cancel,o.id)()})),s}loginWithCredential(e){jr({method:"auth.loginWithCredential()",removalVersions:Fr,useInstead:"@magic-ext/auth auth.loginWithCredential()"}).log();let r=null!=e?e:"";if(!e&&"web"===mr.platform){r=window.location.search;let e=window.location.origin+window.location.pathname;window.history.replaceState(null,"",e)}let t=Nr(this.sdk.testMode?W.LoginWithCredentialTestMode:W.LoginWithCredential,[r]);return this.request(t)}setAuthorizationToken(e){jr({method:"auth.setAuthorizationToken()",removalVersions:Fr,useInstead:"@magic-ext/auth auth.setAuthorizationToken()"}).log();let r=Nr(W.SetAuthorizationToken,[{jwt:e}]);return this.request(r)}updateEmailWithUI(e){jr({method:"auth.updateEmailWithUI()",removalVersions:Fr,useInstead:"@magic-ext/auth auth.updateEmailWithUI()"}).log();let{email:r,showUI:t=!0}=e,n=Nr(this.sdk.testMode?W.UpdateEmailTestMode:W.UpdateEmail,[{email:r,showUI:t}]);return this.request(n)}updatePhoneNumberWithUI(){jr({method:"auth.updatePhoneNumberWithUI()",removalVersions:Fr,useInstead:"@magic-ext/auth auth.updatePhoneNumberWithUI()"}).log();let e=Nr(this.sdk.testMode?W.UpdatePhoneNumberTestMode:W.UpdatePhoneNumber);return this.request(e)}},Vr={};function Gr(e){return(...r)=>me(this,null,function*(){return $r||($r=yield mr.configureStorage()),yield $r.ready(),$r[e](...r)})}((e,r)=>{for(var t in r)te(e,t,{get:r[t],enumerable:!0})})(Vr,{clear:()=>Xr,getItem:()=>zr,iterate:()=>Zr,key:()=>Yr,keys:()=>Qr,length:()=>Kr,removeItem:()=>Jr,setItem:()=>Hr});var zr=Gr("getItem"),Hr=Gr("setItem"),Jr=Gr("removeItem"),Xr=Gr("clear"),Kr=Gr("length"),Yr=Gr("key"),Qr=Gr("keys"),Zr=Gr("iterate"),et=class extends Br{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}getIdToken(e){let r=Nr(this.sdk.testMode?W.GetIdTokenTestMode:W.GetIdToken,[e]);return this.request(r)}generateIdToken(e){let r=Nr(this.sdk.testMode?W.GenerateIdTokenTestMode:W.GenerateIdToken,[e]);return this.request(r)}getInfo(){return me(this,null,function*(){let e=yield zr(this.localForageKey),r=Nr(W.GetInfo,[{walletType:e}]);return this.request(r)})}isLoggedIn(){let e=Nr(this.sdk.testMode?W.IsLoggedInTestMode:W.IsLoggedIn);return this.request(e)}logout(){Jr(this.localForageKey);let e=Nr(this.sdk.testMode?W.LogoutTestMode:W.Logout);return this.request(e)}requestInfoWithUI(e){let r=Nr(W.RequestUserInfoWithUI,e?[e]:[]);return this.request(r)}showSettings(e){let r=Nr(this.sdk.testMode?W.UserSettingsTestMode:W.UserSettings,[e]);return this.request(r)}recoverAccount(e){let r=Nr(this.sdk.testMode?W.RecoverAccountTestMode:W.RecoverAccount,[e]);return this.request(r)}getMetadata(){jr({method:"user.getMetadata()",removalVersions:Fr,useInstead:"user.getInfo()"}).log();let e=Nr(this.sdk.testMode?W.GetMetadataTestMode:W.GetMetadata);return this.request(e)}updateEmail(e){jr({method:"user.updateEmail()",removalVersions:Fr,useInstead:"auth.updateEmailWithUI()"}).log();let{email:r,showUI:t=!0}=e,n=Nr(this.sdk.testMode?W.UpdateEmailTestMode:W.UpdateEmail,[{email:r,showUI:t}]);return this.request(n)}updatePhoneNumber(){jr({method:"user.updatePhoneNumber()",removalVersions:Fr,useInstead:"auth.updatePhoneNumberWithUI()"}).log();let e=Nr(this.sdk.testMode?W.UpdatePhoneNumberTestMode:W.UpdatePhoneNumber);return this.request(e)}};function rt(e,r){return r?new URL(e,r):new URL(e)}function tt(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=15&e[6]|64,e[8]=191&e[8]|128;let r="";return r+=e[0].toString(16),r+=e[1].toString(16),r+=e[2].toString(16),r+=e[3].toString(16),r+="-",r+=e[4].toString(16),r+=e[5].toString(16),r+="-",r+=e[6].toString(16),r+=e[7].toString(16),r+="-",r+=e[8].toString(16),r+=e[9].toString(16),r+="-",r+=e[10].toString(16),r+=e[11].toString(16),r+=e[12].toString(16),r+=e[13].toString(16),r+=e[14].toString(16),r+=e[15].toString(16),r}var nt="STORE_KEY_PRIVATE_KEY",ot="STORE_KEY_PUBLIC_JWK",st="ECDSA",it="P-256",ut={name:st,namedCurve:it},ct={name:st,namedCurve:it};function at(e){return lt(function(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,r)=>String.fromCharCode(parseInt(r,16)))}(e))}function lt(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}var ft=class extends Br{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}connectWithUI(){let e=qr((r,t)=>me(this,null,function*(){try{if(this.isMetaMaskBrowser()&&(yield this.isWalletEnabled(B.MetaMask))){let e=yield this.autoConnectIfWalletBrowser(B.MetaMask);return void r(e)}if(this.isCoinbaseWalletBrowser()&&(yield this.isWalletEnabled(B.CoinbaseWallet))){let e=yield this.autoConnectIfWalletBrowser(B.CoinbaseWallet);return void r(e)}let n=this.getUserEnv(),o=Nr(W.Login,[n]),s=this.request(o);s.on(F.WalletSelected,e=>this.handleWalletSelected(de(he({},e),{payloadId:o.id}))),s.on("id-token-created",r=>{e.emit("id-token-created",r)});let i=yield s;i.error&&t(i),r(i)}catch(e){t(e)}}));return e}showUI(){return this.request(Nr(W.ShowUI))}showAddress(){return this.request(Nr(W.ShowAddress))}showSendTokensUI(){return this.request(Nr(W.ShowSendTokensUI))}showOnRamp(){return this.request(Nr(W.ShowOnRamp))}showNFTs(){return this.request(Nr(W.ShowNFTs))}showBalances(){return this.request(Nr(W.ShowBalances))}sendGaslessTransaction(e,r){return this.request(Nr(W.SendGaslessTransaction,[[e,r]]))}getInfo(){return me(this,null,function*(){jr({method:"wallet.getInfo()",removalVersions:Fr,useInstead:"user.getInfo()"}).log();let e=yield zr(this.localForageKey),r=Nr(W.GetInfo,[{walletType:e}]);return this.request(r)})}disconnect(){jr({method:"wallet.disconnect()",removalVersions:Fr,useInstead:"user.logout()"}).log(),Jr(this.localForageKey);let e=Nr(W.Disconnect);return this.request(e)}requestUserInfoWithUI(e){jr({method:"wallet.requestUserInfoWithUI()",removalVersions:Fr,useInstead:"user.requestUserInfoWithUI()"}).log();let r=Nr(W.RequestUserInfoWithUI,e?[e]:[]);return this.request(r)}getProvider(){return me(this,null,function*(){switch(yield zr(this.localForageKey)){case B.MetaMask:return this.getMetaMaskProvider();case B.CoinbaseWallet:return this.getCoinbaseProvider();default:return this.sdk.rpcProvider}})}isMetaMaskInstalled(){var e,r,t;return(null==(e=window.ethereum)?void 0:e.isMetaMask)||!(null==(t=null==(r=window.ethereum)?void 0:r.providers)||!t.find(e=>null==e?void 0:e.isMetaMask))}isMetaMaskBrowser(){return this.isMobile()&&this.isMetaMaskInstalled()}getMetaMaskProvider(){var e,r;return(null==(r=null==(e=window.ethereum)?void 0:e.providers)?void 0:r.find(e=>null==e?void 0:e.isMetaMask))||window.ethereum}connectToMetaMask(){if(this.isMobile()&&!this.isMetaMaskInstalled()){let e=`https://metamask.app.link/dapp/${window.location.href.replace(/(^\w+:|^)\/\//,"")}`;window.location.href=e}return this.getMetaMaskProvider().request({method:"eth_requestAccounts"})}isCoinbaseWalletInstalled(){var e,r,t;return(null==(e=window.ethereum)?void 0:e.isCoinbaseWallet)||!(null==(t=null==(r=window.ethereum)?void 0:r.providers)||!t.find(e=>null==e?void 0:e.isCoinbaseWallet))}isCoinbaseWalletBrowser(){var e;return!(null==(e=window.ethereum)||!e.isCoinbaseBrowser)}getCoinbaseProvider(){var e,r;return(null==(r=null==(e=window.ethereum)?void 0:e.providers)?void 0:r.find(e=>null==e?void 0:e.isCoinbaseWallet))||window.ethereum}connectToCoinbaseWallet(){if(this.isMobile()&&!this.isCoinbaseWalletBrowser()){let e=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(window.location.href)}`;window.location.href=e}return this.getCoinbaseProvider().request({method:"eth_requestAccounts"})}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Silk|Opera Mini/i.test(navigator.userAgent)}getUserEnv(){return{env:{isMetaMaskInstalled:this.isMetaMaskInstalled(),isCoinbaseWalletInstalled:this.isCoinbaseWalletInstalled()}}}connectToThirdPartyWallet(e){switch(e){case B.MetaMask:return this.connectToMetaMask();case B.CoinbaseWallet:return this.connectToCoinbaseWallet();default:throw new Error(`Invalid provider: ${e}. Must be one of "metamask" or "coinbase_wallet".`)}}isWalletEnabled(e){let r=Nr("mc_is_wallet_enabled",[{wallet:e}]);return this.request(r)}handleWalletSelected(e){return me(this,null,function*(){try{let r=yield this.connectToThirdPartyWallet(e.wallet);yield Hr(this.localForageKey,e.wallet),this.createIntermediaryEvent(F.WalletConnected,e.payloadId)(r)}catch(r){console.error(r),this.createIntermediaryEvent(F.WalletRejected,e.payloadId)()}})}autoConnectIfWalletBrowser(e){return me(this,null,function*(){let r;e===B.MetaMask&&(r=yield this.getMetaMaskProvider().request({method:"eth_requestAccounts"})),e===B.CoinbaseWallet&&(r=yield this.getCoinbaseProvider().request({method:"eth_requestAccounts"})),yield Hr(this.localForageKey,e);let t=Nr(W.AutoConnect,[{wallet:e,address:r}]);return this.request(t)})}},{createBoundEmitterMethod:ht,createChainingEmitterMethod:dt}=kr(),mt=class extends Br{constructor(){super(...arguments),this.isMagic=!0,this.on=dt("on",this),this.once=dt("once",this),this.addListener=dt("addListener",this),this.off=dt("off",this),this.removeListener=dt("removeListener",this),this.removeAllListeners=dt("removeAllListeners",this),this.emit=ht("emit"),this.eventNames=ht("eventNames"),this.listeners=ht("listeners"),this.listenerCount=ht("listenerCount")}sendAsync(e,r){if(!r)throw function(e){return new yr(q.InvalidArgument,`Invalid ${(e=>{let r=e+1,t=r%10,n=r%100;return 1===t&&11!==n?`${r}st`:2===t&&12!==n?`${r}nd`:3===t&&13!==n?`${r}rd`:`${r}th`})(e.argument)} argument given to \`${e.procedure}\`.\n  Expected: \`${e.expected}\`\n  Received: \`${e.received}\``)}({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:null===r?"null":typeof r});if(Array.isArray(e))this.overlay.post(G.MAGIC_HANDLE_REQUEST,e.map(e=>{let r=Tr(e);return this.prefixPayloadMethodForTestMode(r),r})).then(e=>{r(null,e.map(e=>de(he({},e.payload),{error:e.hasError?new vr(e.payload.error):null})))});else{let t=Tr(e);this.prefixPayloadMethodForTestMode(t),this.overlay.post(G.MAGIC_HANDLE_REQUEST,t).then(e=>{r(e.hasError?new vr(e.payload.error):null,e.payload)})}}send(e,r){if("string"==typeof e){let t=Nr(e,Array.isArray(r)?r:[]);return this.request(t)}if(Array.isArray(e)||r)return void this.sendAsync(e,r);let t=new gr(D.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.");return t.log(),new Lr(e).applyError({code:-32603,message:t.rawMessage}).payload}enable(){let e=Nr(W.Login);return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){this.sdk.testMode&&(e.method=`testMode/eth/${e.method}`)}},pt=["request","overlay","sdk"];function yt(e){let r=Object.getPrototypeOf(e),t=[r];for(;r!==Br.prototype;)r=Object.getPrototypeOf(r),t.push(r);return t}var vt=class extends Br{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:qr,isPromiEvent:Ur,encodeJSON:ar,decodeJSON:lr,createJsonRpcRequestPayload:Nr,standardizeJsonRpcRequestPayload:Tr,storage:Vr};let e=[this,...yt(this)];pt.forEach(r=>{let t=e.map(e=>Object.getOwnPropertyDescriptor(e,r)),n=t.findIndex(e=>!!e),o=t[n];o&&(this.__sdk_access_field_descriptors__.set(r,{descriptor:o,isPrototypeField:n>0}),Object.defineProperty(this,r,{configurable:!0,get:()=>{throw wr(r)}}))})}init(e){this.__is_initialized__||(pt.forEach(e=>{if(this.__sdk_access_field_descriptors__.has(e)){let{descriptor:r,isPrototypeField:t}=this.__sdk_access_field_descriptors__.get(e);t?delete this[e]:Object.defineProperty(this,e,r)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:r,removalVersion:t,useInstead:n}=e;return new br(this,"DEPRECATION_NOTICE",`\`${r}\` will be removed from this Extension in version \`${t}\`.${n?` Use \`${n}\` instead.`:""}`)}createWarning(e,r){return new br(this,e,r)}createError(e,r,t){return new Pr(this,e,r,t)}},gt=class extends vt{};gt.Internal=class extends vt{},gt.Anonymous="anonymous extension";var Pt=class extends Br{purchase(e){let r=Nr(W.NFTPurchase,[e]);return this.request(r)}checkout(e){let r=Nr(W.NFTCheckout,[e]);return this.request(r)}transfer(e){let r=Nr(W.NFTTransfer,[e]);return this.request(r)}};function bt(e){return!e.compat||null==e.compat[mr.sdkName]||("string"==typeof e.compat[mr.sdkName]?er(ir(mr.version),e.compat[mr.sdkName]):!!e.compat[mr.sdkName])}function At(e){var r;let t=null!=(r=null==e?void 0:e.extensions)?r:[],n={},o=[];if(Array.isArray(t)?t.forEach(e=>{bt(e)?(e.init(this),(e.name||e.name!==gt.Anonymous)&&(this[e.name]=e),e instanceof gt.Internal&&(dr(e.config)||(n[e.name]=e.config))):o.push(e)}):Object.keys(t).forEach(e=>{if(bt(t[e])){t[e].init(this);let r=t[e];this[e]=r,r instanceof gt.Internal&&(dr(r.config)||(n[t[e].name]=r.config))}else o.push(t[e])}),o.length)throw Ir(o);return n}var Et=class{constructor(e,r){var t;if(this.apiKey=e,!e)throw Ar();"react-native"===mr.platform&&(null==r?void 0:r.endpoint)&&new gr(D.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${mr.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`).log();let{defaultEndpoint:n,version:o}=mr;this.testMode=!(null==r||!r.testMode),this.endpoint=rt(null!=(t=null==r?void 0:r.endpoint)?t:n).origin,this.auth=new Wr(this),this.user=new et(this),this.wallet=new ft(this),this.nft=new Pt(this),this.rpcProvider=new mt(this);let s=At.call(this,r);this.parameters=ar(he({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:null==r?void 0:r.network,host:rt(this.endpoint).host,sdk:pr[mr.sdkName],version:o,ext:dr(s)?void 0:s,locale:(null==r?void 0:r.locale)||"en_US"},mr.bundleId?{bundleId:mr.bundleId}:{}))}get overlay(){if(!Et.__overlays__.has(this.parameters)){let e=new mr.ViewController(this.endpoint,this.parameters);e.init(),Et.__overlays__.set(this.parameters,e)}return Et.__overlays__.get(this.parameters)}preload(){return me(this,null,function*(){yield this.overlay.ready})}},wt=Et;wt.__overlays__=new Map;var It,jt=class{constructor(e,r){this.endpoint=e,this.parameters=r,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,r){return me(this,null,function*(){return Dr(t=>me(this,null,function*(){yield this.ready;let n=[],o=Array.isArray(r)?r.map(e=>e.id):[],s=yield function(e,r){return me(this,null,function*(){let t,n=yield zr("rt");if("web"===mr.platform)try{t=yield function(){return me(this,null,function*(){let e=yield function(){return me(this,null,function*(){if(function(){let e="undefined"!=typeof window&&!!window.crypto,r=e&&!!window.crypto.subtle;return e&&r}())return(yield zr(ot))||(yield function(){return me(this,null,function*(){let e=null,{subtle:r}=window.crypto,t=yield r.generateKey(ut,!0,["sign"]),n=yield r.exportKey("jwk",t.privateKey);e=yield r.exportKey("jwk",t.publicKey);let o=yield r.importKey("jwk",n,ct,!1,["sign"]);yield Hr(nt,o),yield Hr(ot,e)})}()),zr(ot);console.info("webcrypto is not supported")})}();if(!e)return void console.info("unable to create public key or webcrypto is unsupported");let{subtle:r}=window.crypto,t=yield zr(nt);if(!t||!r)return void console.info("unable to find private key or webcrypto unsupported");let n={iat:Math.floor((new Date).getTime()/1e3),jti:tt()},o=at(JSON.stringify({typ:"dpop+jwt",alg:"ES256",jwk:e})),s=at(JSON.stringify(n)),i=function(e){return(new TextEncoder).encode(e)}(`${o}.${s}`),u={name:st,hash:{name:"SHA-256"}},c=function(e){let r="";return e.forEach(e=>{r+=String.fromCharCode(e)}),lt(r)}(new Uint8Array(yield r.sign(u,t,i)));return`${o}.${s}.${c}`})}()}catch(e){console.error("webcrypto error",e)}return t?n?{msgType:e,payload:r,jwt:t,rt:n}:{msgType:e,payload:r,jwt:t}:{msgType:e,payload:r}})}(`${e}-${this.parameters}`,r);yield this._post(s);let i=this.on(V.MAGIC_HANDLE_RESPONSE,(e=>s=>{let{id:i,response:u}=function(e,r){var t;let n=null==(t=r.data.response)?void 0:t.id,o=function(e,r){return r&&Array.isArray(e)?e.find(e=>e.id===r):e}(e,n);return n&&o?{id:n,response:new Lr(o).applyResult(r.data.response.result).applyError(r.data.response.error)}:{}}(r,s);(function(e){me(this,null,function*(){!e.data.rt||(yield Hr("rt",e.data.rt))})})(s),i&&u&&Array.isArray(r)&&o.includes(i)?(n.push(u),n.length===r.length&&(e(),t(n))):i&&u&&!Array.isArray(r)&&i===r.id&&(e(),t(u))})(()=>i()))}))})}on(e,r){let t=r.bind(window),n=r=>{r.data.msgType===`${e}-${this.parameters}`&&t(r)};return this.messageHandlers.add(n),()=>this.messageHandlers.delete(n)}waitForReady(){return new Promise(e=>{this.on(V.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(V.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(V.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}},_t=Object.create,St=Object.defineProperty,Ot=Object.getOwnPropertyDescriptor,Ct=Object.getOwnPropertyNames,Tt=Object.getPrototypeOf,Nt=Object.prototype.hasOwnProperty,Lt=(It=function(e){if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')},"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(It,{get:(e,r)=>("undefined"!=typeof require?require:e)[r]}):It),Rt=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),xt=(e,r,t)=>(t=null!=e?_t(Tt(e)):{},((e,r,t,n)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let t of Ct(r))!Nt.call(e,t)&&void 0!==t&&St(e,t,{get:()=>r[t],enumerable:!(n=Ot(r,t))||n.enumerable});return e})(!r&&e&&e.__esModule?t:St(t,"default",{value:e,enumerable:!0}),e)),kt=(e,r,t)=>new Promise((n,o)=>{var s=e=>{try{u(t.next(e))}catch(e){o(e)}},i=e=>{try{u(t.throw(e))}catch(e){o(e)}},u=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,i);u((t=t.apply(e,r)).next())}),Mt=Rt((e,r)=>{!function(t){"object"==typeof e&&typeof r<"u"?r.exports=t():"function"==typeof define&&define.amd?define([],t):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).localforage=t()}(function(){return function e(r,t,n){function o(i,u){if(!t[i]){if(!r[i]){var c="function"==typeof Lt&&Lt;if(!u&&c)return c(i,!0);if(s)return s(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var l=t[i]={exports:{}};r[i][0].call(l.exports,function(e){return o(r[i][1][e]||e)},l,l.exports,e,r,t,n)}return t[i].exports}for(var s="function"==typeof Lt&&Lt,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,r,t){(function(e){var t,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var o=0,s=new n(l),i=e.document.createTextNode("");s.observe(i,{characterData:!0}),t=function(){i.data=o=++o%2}}else if(!e.setImmediate&&typeof e.MessageChannel<"u"){var u=new e.MessageChannel;u.port1.onmessage=l,t=function(){u.port2.postMessage(0)}}else t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var r=e.document.createElement("script");r.onreadystatechange=function(){l(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},e.document.documentElement.appendChild(r)}:function(){setTimeout(l,0)};var c,a=[];function l(){c=!0;for(var e,r,t=a.length;t;){for(r=a,a=[],e=-1;++e<t;)r[e]();t=a.length}c=!1}r.exports=function(e){1===a.push(e)&&!c&&t()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,r,t){var n=e(1);function o(){}var s={},i=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function a(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&d(this,e)}function l(e,r,t){this.promise=e,"function"==typeof r&&(this.onFulfilled=r,this.callFulfilled=this.otherCallFulfilled),"function"==typeof t&&(this.onRejected=t,this.callRejected=this.otherCallRejected)}function f(e,r,t){n(function(){var n;try{n=r(t)}catch(r){return s.reject(e,r)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)})}function h(e){var r=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof r)return function(){r.apply(e,arguments)}}function d(e,r){var t=!1;function n(r){t||(t=!0,s.reject(e,r))}function o(r){t||(t=!0,s.resolve(e,r))}var i=m(function(){r(o,n)});"error"===i.status&&n(i.value)}function m(e,r){var t={};try{t.value=e(r),t.status="success"}catch(e){t.status="error",t.value=e}return t}r.exports=a,a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,r){if("function"!=typeof e&&this.state===u||"function"!=typeof r&&this.state===i)return this;var t=new this.constructor(o);return this.state!==c?f(t,this.state===u?e:r,this.outcome):this.queue.push(new l(t,e,r)),t},l.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){s.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},s.resolve=function(e,r){var t=m(h,r);if("error"===t.status)return s.reject(e,t.value);var n=t.value;if(n)d(e,n);else{e.state=u,e.outcome=r;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(r)}return e},s.reject=function(e,r){e.state=i,e.outcome=r;for(var t=-1,n=e.queue.length;++t<n;)e.queue[t].callRejected(r);return e},a.resolve=function(e){return e instanceof this?e:s.resolve(new this(o),e)},a.reject=function(e){var r=new this(o);return s.reject(r,e)},a.all=function(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var i=new Array(t),u=0,c=-1,a=new this(o);++c<t;)l(e[c],c);return a;function l(e,o){r.resolve(e).then(function(e){i[o]=e,++u===t&&!n&&(n=!0,s.resolve(a,i))},function(e){n||(n=!0,s.reject(a,e))})}},a.race=function(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var i=-1,u=new this(o);++i<t;)c(e[i]);return u;function c(e){r.resolve(e).then(function(e){n||(n=!0,s.resolve(u,e))},function(e){n||(n=!0,s.reject(u,e))})}}},{1:1}],3:[function(e,r,t){(function(r){"function"!=typeof r.Promise&&(r.Promise=e(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,r,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function s(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(o){if("TypeError"!==o.name)throw o;for(var t=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)t.append(e[n]);return t.getBlob(r.type)}}typeof Promise>"u"&&e(3);var i=Promise;function u(e,r){r&&e.then(function(e){r(null,e)},function(e){r(e)})}function c(e,r,t){"function"==typeof r&&e.then(r),"function"==typeof t&&e.catch(t)}function a(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",h=void 0,d={},m=Object.prototype.toString,p="readonly",y="readwrite";function v(e){var r=d[e.name],t={};t.promise=new i(function(e,r){t.resolve=e,t.reject=r}),r.deferredOperations.push(t),r.dbReady=r.dbReady?r.dbReady.then(function(){return t.promise}):t.promise}function g(e){var r=d[e.name].deferredOperations.pop();if(r)return r.resolve(),r.promise}function P(e,r){var t=d[e.name].deferredOperations.pop();if(t)return t.reject(r),t.promise}function b(e,r){return new i(function(t,n){if(d[e.name]=d[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!r)return t(e.db);v(e),e.db.close()}var s=[e.name];r&&s.push(e.version);var i=o.open.apply(o,s);r&&(i.onupgradeneeded=function(r){var t=i.result;try{t.createObjectStore(e.storeName),r.oldVersion<=1&&t.createObjectStore(f)}catch(t){if("ConstraintError"!==t.name)throw t;console.warn('The database "'+e.name+'" has been upgraded from version '+r.oldVersion+" to version "+r.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),n(i.error)},i.onsuccess=function(){var r=i.result;r.onversionchange=function(e){e.target.close()},t(r),g(e)}})}function A(e){return b(e,!1)}function E(e){return b(e,!0)}function w(e,r){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),n=e.version>e.db.version;if(e.version<e.db.version&&(e.version!==r&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),n||t){if(t){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function I(e){var r=function(e){for(var r=e.length,t=new ArrayBuffer(r),n=new Uint8Array(t),o=0;o<r;o++)n[o]=e.charCodeAt(o);return t}(atob(e.data));return s([r],{type:e.type})}function j(e){return e&&e.__local_forage_encoded_blob}function _(e){var r=this,t=r._initReady().then(function(){var e=d[r._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(t,e,e),t}function S(e,r,t,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,r);t(null,o)}catch(o){if(n>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return i.resolve().then(function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),E(e)}).then(function(){return function(e){v(e);for(var r=d[e.name],t=r.forages,n=0;n<t.length;n++){var o=t[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,A(e).then(function(r){return e.db=r,w(e)?E(e):r}).then(function(n){e.db=r.db=n;for(var o=0;o<t.length;o++)t[o]._dbInfo.db=n}).catch(function(r){throw P(e,r),r})}(e).then(function(){S(e,r,t,n-1)})}).catch(t);t(o)}}var O={_driver:"asyncStorage",_initStorage:function(e){var r=this,t={db:null};if(e)for(var n in e)t[n]=e[n];var o=d[t.name];o||(d[t.name]=o={forages:[],db:null,dbReady:null,deferredOperations:[]}),o.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=_);var s=[];function u(){return i.resolve()}for(var c=0;c<o.forages.length;c++){var a=o.forages[c];a!==r&&s.push(a._initReady().catch(u))}var l=o.forages.slice(0);return i.all(s).then(function(){return t.db=o.db,A(t)}).then(function(e){return t.db=e,w(t,r._defaultConfig.version)?E(t):e}).then(function(e){t.db=o.db=e,r._dbInfo=t;for(var n=0;n<l.length;n++){var s=l[n];s!==r&&(s._dbInfo.db=t.db,s._dbInfo.version=t.version)}})},_support:function(){try{if(!o||!o.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function(e,r){var t=this,n=new i(function(r,n){t.ready().then(function(){S(t._dbInfo,p,function(o,s){if(o)return n(o);try{var i=s.objectStore(t._dbInfo.storeName).openCursor(),u=1;i.onsuccess=function(){var t=i.result;if(t){var n=t.value;j(n)&&(n=I(n));var o=e(n,t.key,u++);void 0!==o?r(o):t.continue()}else r()},i.onerror=function(){n(i.error)}}catch(e){n(e)}})}).catch(n)});return u(n,r),n},getItem:function(e,r){var t=this;e=a(e);var n=new i(function(r,n){t.ready().then(function(){S(t._dbInfo,p,function(o,s){if(o)return n(o);try{var i=s.objectStore(t._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),j(e)&&(e=I(e)),r(e)},i.onerror=function(){n(i.error)}}catch(e){n(e)}})}).catch(n)});return u(n,r),n},setItem:function(e,r,t){var n=this;e=a(e);var o=new i(function(t,o){var u;n.ready().then(function(){return u=n._dbInfo,"[object Blob]"===m.call(r)?function(e){return"boolean"==typeof h?i.resolve(h):function(e){return new i(function(r){var t=e.transaction(f,y),n=s([""]);t.objectStore(f).put(n,"key"),t.onabort=function(e){e.preventDefault(),e.stopPropagation(),r(!1)},t.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);r(t||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(e){return h=e})}(u.db).then(function(e){return e?r:function(e){return new i(function(r,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");r({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)})}(r)}):r}).then(function(r){S(n._dbInfo,y,function(s,i){if(s)return o(s);try{var u=i.objectStore(n._dbInfo.storeName);null===r&&(r=void 0);var c=u.put(r,e);i.oncomplete=function(){void 0===r&&(r=null),t(r)},i.onabort=i.onerror=function(){o(c.error?c.error:c.transaction.error)}}catch(e){o(e)}})}).catch(o)});return u(o,t),o},removeItem:function(e,r){var t=this;e=a(e);var n=new i(function(r,n){t.ready().then(function(){S(t._dbInfo,y,function(o,s){if(o)return n(o);try{var i=s.objectStore(t._dbInfo.storeName).delete(e);s.oncomplete=function(){r()},s.onerror=function(){n(i.error)},s.onabort=function(){n(i.error?i.error:i.transaction.error)}}catch(e){n(e)}})}).catch(n)});return u(n,r),n},clear:function(e){var r=this,t=new i(function(e,t){r.ready().then(function(){S(r._dbInfo,y,function(n,o){if(n)return t(n);try{var s=o.objectStore(r._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){t(s.error?s.error:s.transaction.error)}}catch(e){t(e)}})}).catch(t)});return u(t,e),t},length:function(e){var r=this,t=new i(function(e,t){r.ready().then(function(){S(r._dbInfo,p,function(n,o){if(n)return t(n);try{var s=o.objectStore(r._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){t(s.error)}}catch(e){t(e)}})}).catch(t)});return u(t,e),t},key:function(e,r){var t=this,n=new i(function(r,n){e<0?r(null):t.ready().then(function(){S(t._dbInfo,p,function(o,s){if(o)return n(o);try{var i=s.objectStore(t._dbInfo.storeName),u=!1,c=i.openKeyCursor();c.onsuccess=function(){var t=c.result;t?0===e||u?r(t.key):(u=!0,t.advance(e)):r(null)},c.onerror=function(){n(c.error)}}catch(e){n(e)}})}).catch(n)});return u(n,r),n},keys:function(e){var r=this,t=new i(function(e,t){r.ready().then(function(){S(r._dbInfo,p,function(n,o){if(n)return t(n);try{var s=o.objectStore(r._dbInfo.storeName).openKeyCursor(),i=[];s.onsuccess=function(){var r=s.result;r?(i.push(r.key),r.continue()):e(i)},s.onerror=function(){t(s.error)}}catch(e){t(e)}})}).catch(t)});return u(t,e),t},dropInstance:function(e,r){r=l.apply(this,arguments);var t,n=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName),e.name){var s=e.name===n.name&&this._dbInfo.db?i.resolve(this._dbInfo.db):A(e).then(function(r){var t=d[e.name],n=t.forages;t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r;return r});t=s.then(e.storeName?function(r){if(r.objectStoreNames.contains(e.storeName)){var t=r.version+1;v(e);var n=d[e.name],s=n.forages;r.close();for(var u=0;u<s.length;u++){var c=s[u];c._dbInfo.db=null,c._dbInfo.version=t}var a=new i(function(r,n){var s=o.open(e.name,t);s.onerror=function(e){s.result.close(),n(e)},s.onupgradeneeded=function(){s.result.deleteObjectStore(e.storeName)},s.onsuccess=function(){var e=s.result;e.close(),r(e)}});return a.then(function(e){n.db=e;for(var r=0;r<s.length;r++){var t=s[r];t._dbInfo.db=e,g(t._dbInfo)}}).catch(function(r){throw(P(e,r)||i.resolve()).catch(function(){}),r})}}:function(r){v(e);var t=d[e.name],n=t.forages;r.close();for(var s=0;s<n.length;s++)n[s]._dbInfo.db=null;var u=new i(function(r,t){var n=o.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),t(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),r(e)}});return u.then(function(e){t.db=e;for(var r=0;r<n.length;r++)g(n[r]._dbInfo)}).catch(function(r){throw(P(e,r)||i.resolve()).catch(function(){}),r})})}else t=i.reject("Invalid arguments");return u(t,r),t}},C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=/^~~local_forage_type~([^~]+)~/,N="__lfsc__:",L="arbf",R="blob",x="si08",k="ui08",M="uic8",U="si16",q="si32",D="ur16",$="ui32",B="fl32",F="fl64",W=Object.prototype.toString;function V(e){var r,t,n,o,s,i=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var a=new ArrayBuffer(i),l=new Uint8Array(a);for(r=0;r<u;r+=4)t=C.indexOf(e[r]),n=C.indexOf(e[r+1]),o=C.indexOf(e[r+2]),s=C.indexOf(e[r+3]),l[c++]=t<<2|n>>4,l[c++]=(15&n)<<4|o>>2,l[c++]=(3&o)<<6|63&s;return a}function G(e){var r,t=new Uint8Array(e),n="";for(r=0;r<t.length;r+=3)n+=C[t[r]>>2],n+=C[(3&t[r])<<4|t[r+1]>>4],n+=C[(15&t[r+1])<<2|t[r+2]>>6],n+=C[63&t[r+2]];return t.length%3==2?n=n.substring(0,n.length-1)+"=":t.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var z={serialize:function(e,r){var t="";if(e&&(t=W.call(e)),e&&("[object ArrayBuffer]"===t||e.buffer&&"[object ArrayBuffer]"===W.call(e.buffer))){var n,o=N;e instanceof ArrayBuffer?(n=e,o+=L):(n=e.buffer,"[object Int8Array]"===t?o+=x:"[object Uint8Array]"===t?o+=k:"[object Uint8ClampedArray]"===t?o+=M:"[object Int16Array]"===t?o+=U:"[object Uint16Array]"===t?o+=D:"[object Int32Array]"===t?o+=q:"[object Uint32Array]"===t?o+=$:"[object Float32Array]"===t?o+=B:"[object Float64Array]"===t?o+=F:r(new Error("Failed to get type for BinaryArray"))),r(o+G(n))}else if("[object Blob]"===t){var s=new FileReader;s.onload=function(){var t="~~local_forage_type~"+e.type+"~"+G(this.result);r(N+R+t)},s.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(t){console.error("Couldn't convert value into a JSON string: ",e),r(null,t)}},deserialize:function(e){if(e.substring(0,9)!==N)return JSON.parse(e);var r,t=e.substring(13),n=e.substring(9,13);if(n===R&&T.test(t)){var o=t.match(T);r=o[1],t=t.substring(o[0].length)}var i=V(t);switch(n){case L:return i;case R:return s([i],{type:r});case x:return new Int8Array(i);case k:return new Uint8Array(i);case M:return new Uint8ClampedArray(i);case U:return new Int16Array(i);case D:return new Uint16Array(i);case q:return new Int32Array(i);case $:return new Uint32Array(i);case B:return new Float32Array(i);case F:return new Float64Array(i);default:throw new Error("Unkown type: "+n)}},stringToBuffer:V,bufferToString:G};function H(e,r,t,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,n)}function J(e,r,t,n,o,s){e.executeSql(t,n,o,function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(e,u){u.rows.length?s(e,i):H(e,r,function(){e.executeSql(t,n,o,s)},s)},s):s(e,i)},s)}function X(e,r,t,n){var o=this;e=a(e);var s=new i(function(s,i){o.ready().then(function(){void 0===r&&(r=null);var u=r,c=o._dbInfo;c.serializer.serialize(r,function(r,a){a?i(a):c.db.transaction(function(t){J(t,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,r],function(){s(u)},function(e,r){i(r)})},function(r){if(r.code===r.QUOTA_ERR){if(n>0)return void s(X.apply(o,[e,u,t,n-1]));i(r)}})})}).catch(i)});return u(s,t),s}var K={_driver:"webSQLStorage",_initStorage:function(e){var r=this,t={db:null};if(e)for(var n in e)t[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new i(function(e,n){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(e){return n(e)}t.db.transaction(function(o){H(o,t,function(){r._dbInfo=t,e()},function(e,r){n(r)})},n)});return t.serializer=z,o},_support:"function"==typeof openDatabase,iterate:function(e,r){var t=this,n=new i(function(r,n){t.ready().then(function(){var o=t._dbInfo;o.db.transaction(function(t){J(t,o,"SELECT * FROM "+o.storeName,[],function(t,n){for(var s=n.rows,i=s.length,u=0;u<i;u++){var c=s.item(u),a=c.value;if(a&&(a=o.serializer.deserialize(a)),void 0!==(a=e(a,c.key,u+1)))return void r(a)}r()},function(e,r){n(r)})})}).catch(n)});return u(n,r),n},getItem:function(e,r){var t=this;e=a(e);var n=new i(function(r,n){t.ready().then(function(){var o=t._dbInfo;o.db.transaction(function(t){J(t,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,t){var n=t.rows.length?t.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),r(n)},function(e,r){n(r)})})}).catch(n)});return u(n,r),n},setItem:function(e,r,t){return X.apply(this,[e,r,t,1])},removeItem:function(e,r){var t=this;e=a(e);var n=new i(function(r,n){t.ready().then(function(){var o=t._dbInfo;o.db.transaction(function(t){J(t,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){r()},function(e,r){n(r)})})}).catch(n)});return u(n,r),n},clear:function(e){var r=this,t=new i(function(e,t){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(r){J(r,n,"DELETE FROM "+n.storeName,[],function(){e()},function(e,r){t(r)})})}).catch(t)});return u(t,e),t},length:function(e){var r=this,t=new i(function(e,t){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(r){J(r,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(r,t){var n=t.rows.item(0).c;e(n)},function(e,r){t(r)})})}).catch(t)});return u(t,e),t},key:function(e,r){var t=this,n=new i(function(r,n){t.ready().then(function(){var o=t._dbInfo;o.db.transaction(function(t){J(t,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,t){var n=t.rows.length?t.rows.item(0).key:null;r(n)},function(e,r){n(r)})})}).catch(n)});return u(n,r),n},keys:function(e){var r=this,t=new i(function(e,t){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(r){J(r,n,"SELECT key FROM "+n.storeName,[],function(r,t){for(var n=[],o=0;o<t.rows.length;o++)n.push(t.rows.item(o).key);e(n)},function(e,r){t(r)})})}).catch(t)});return u(t,e),t},dropInstance:function(e,r){r=l.apply(this,arguments);var t=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var n,o=this;return n=e.name?new i(function(r){var n;n=e.name===t.name?o._dbInfo.db:openDatabase(e.name,"","",0),r(e.storeName?{db:n,storeNames:[e.storeName]}:function(e){return new i(function(r,t){e.transaction(function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,n){for(var o=[],s=0;s<n.rows.length;s++)o.push(n.rows.item(s).name);r({db:e,storeNames:o})},function(e,r){t(r)})},function(e){t(e)})})}(n))}).then(function(e){return new i(function(r,t){e.db.transaction(function(n){function o(e){return new i(function(r,t){n.executeSql("DROP TABLE IF EXISTS "+e,[],function(){r()},function(e,r){t(r)})})}for(var s=[],u=0,c=e.storeNames.length;u<c;u++)s.push(o(e.storeNames[u]));i.all(s).then(function(){r()}).catch(function(e){t(e)})},function(e){t(e)})})}):i.reject("Invalid arguments"),u(n,r),n}};function Y(e,r){var t=e.name+"/";return e.storeName!==r.storeName&&(t+=e.storeName+"/"),t}var Q={_driver:"localStorageWrapper",_initStorage:function(e){var r={};if(e)for(var t in e)r[t]=e[t];return r.keyPrefix=Y(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}()||localStorage.length>0?(this._dbInfo=r,r.serializer=z,i.resolve()):i.reject()},_support:function(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(e,r){var t=this,n=t.ready().then(function(){for(var r=t._dbInfo,n=r.keyPrefix,o=n.length,s=localStorage.length,i=1,u=0;u<s;u++){var c=localStorage.key(u);if(0===c.indexOf(n)){var a=localStorage.getItem(c);if(a&&(a=r.serializer.deserialize(a)),void 0!==(a=e(a,c.substring(o),i++)))return a}}});return u(n,r),n},getItem:function(e,r){var t=this;e=a(e);var n=t.ready().then(function(){var r=t._dbInfo,n=localStorage.getItem(r.keyPrefix+e);return n&&(n=r.serializer.deserialize(n)),n});return u(n,r),n},setItem:function(e,r,t){var n=this;e=a(e);var o=n.ready().then(function(){void 0===r&&(r=null);var t=r;return new i(function(o,s){var i=n._dbInfo;i.serializer.serialize(r,function(r,n){if(n)s(n);else try{localStorage.setItem(i.keyPrefix+e,r),o(t)}catch(e){("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&s(e),s(e)}})})});return u(o,t),o},removeItem:function(e,r){var t=this;e=a(e);var n=t.ready().then(function(){localStorage.removeItem(t._dbInfo.keyPrefix+e)});return u(n,r),n},clear:function(e){var r=this,t=r.ready().then(function(){for(var e=r._dbInfo.keyPrefix,t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}});return u(t,e),t},length:function(e){var r=this.keys().then(function(e){return e.length});return u(r,e),r},key:function(e,r){var t=this,n=t.ready().then(function(){var r,n=t._dbInfo;try{r=localStorage.key(e)}catch{r=null}return r&&(r=r.substring(n.keyPrefix.length)),r});return u(n,r),n},keys:function(e){var r=this,t=r.ready().then(function(){for(var e=r._dbInfo,t=localStorage.length,n=[],o=0;o<t;o++){var s=localStorage.key(o);0===s.indexOf(e.keyPrefix)&&n.push(s.substring(e.keyPrefix.length))}return n});return u(t,e),t},dropInstance:function(e,r){if(r=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var n,o=this;return n=e.name?new i(function(r){r(e.storeName?Y(e,o._defaultConfig):e.name+"/")}).then(function(e){for(var r=localStorage.length-1;r>=0;r--){var t=localStorage.key(r);0===t.indexOf(e)&&localStorage.removeItem(t)}}):i.reject("Invalid arguments"),u(n,r),n}},Z=function(e,r){return e===r||"number"==typeof e&&"number"==typeof r&&isNaN(e)&&isNaN(r)},ee=function(e,r){for(var t=e.length,n=0;n<t;){if(Z(e[n],r))return!0;n++}return!1},re=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},te={},ne={},oe={INDEXEDDB:O,WEBSQL:K,LOCALSTORAGE:Q},se=[oe.INDEXEDDB._driver,oe.WEBSQL._driver,oe.LOCALSTORAGE._driver],ie=["dropInstance"],ue=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ie),ce={description:"",driver:se.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ae(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function le(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(arguments[0][t]=re(r[t])?r[t].slice():r[t])}return arguments[0]}var fe=function(){function e(r){for(var t in function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),oe)if(oe.hasOwnProperty(t)){var n=oe[t],o=n._driver;this[t]=o,te[o]||this.defineDriver(n)}this._defaultConfig=le({},ce),this._config=le({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(typeof e>"u"?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var r in e){if("storeName"===r&&(e[r]=e[r].replace(/\W/g,"_")),"version"===r&&"number"!=typeof e[r])return new Error("Database version must be a number.");this._config[r]=e[r]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,r,t){var n=new i(function(r,t){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void t(o);for(var s=ue.concat("_initStorage"),c=0,a=s.length;c<a;c++){var l=s[c];if((!ee(ie,l)||e[l])&&"function"!=typeof e[l])return void t(o)}!function(){for(var r=function(e){return function(){var r=new Error("Method "+e+" is not implemented by the current driver"),t=i.reject(r);return u(t,arguments[arguments.length-1]),t}},t=0,n=ie.length;t<n;t++){var o=ie[t];e[o]||(e[o]=r(o))}}();var f=function(t){te[n]&&console.info("Redefining LocalForage driver: "+n),te[n]=e,ne[n]=t,r()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,t):f(!!e._support):f(!0)}catch(e){t(e)}});return c(n,r,t),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,r,t){var n=te[e]?i.resolve(te[e]):i.reject(new Error("Driver not found."));return c(n,r,t),n},e.prototype.getSerializer=function(e){var r=i.resolve(z);return c(r,e),r},e.prototype.ready=function(e){var r=this,t=r._driverSet.then(function(){return null===r._ready&&(r._ready=r._initDriver()),r._ready});return c(t,e,e),t},e.prototype.setDriver=function(e,r,t){var n=this;re(e)||(e=[e]);var o=this._getSupportedDrivers(e);function s(){n._config.driver=n.driver()}function u(e){return n._extend(e),s(),n._ready=n._initStorage(n._config),n._ready}var a=null!==this._driverSet?this._driverSet.catch(function(){return i.resolve()}):i.resolve();return this._driverSet=a.then(function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then(function(e){n._driver=e._driver,s(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){var r=0;return function t(){for(;r<e.length;){var o=e[r];return r++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(u).catch(t)}s();var c=new Error("No available storage method found.");return n._driverSet=i.reject(c),n._driverSet}()}}(o)})}).catch(function(){s();var e=new Error("No available storage method found.");return n._driverSet=i.reject(e),n._driverSet}),c(this._driverSet,r,t),this._driverSet},e.prototype.supports=function(e){return!!ne[e]},e.prototype._extend=function(e){le(this,e)},e.prototype._getSupportedDrivers=function(e){for(var r=[],t=0,n=e.length;t<n;t++){var o=e[t];this.supports(o)&&r.push(o)}return r},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,r=ue.length;e<r;e++)ae(this,ue[e])},e.prototype.createInstance=function(r){return new e(r)},e}(),he=new fe;r.exports=he},{3:3}]},{},[4])(4)})}),Ut=Rt((e,r)=>{!function(t,n){"object"==typeof e&&typeof r<"u"?n(e):"function"==typeof define&&define.amd?define("localforage-driver-memory",["exports"],n):n(t.LocalforageDriverMemory={})}(typeof self<"u"?self:e,function(e){var r=/^~~local_forage_type~([^~]+)~/,t=Object.prototype.toString;function n(e){var r=.75*e.length,t=e.length;"="===e[e.length-1]&&(r--,"="===e[e.length-2]&&r--);for(var n=new ArrayBuffer(r),o=new Uint8Array(n),s=0,i=0;s<t;s+=4){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[s]),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[s+1]),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[s+2]),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[s+3]);o[i++]=u<<2|c>>4,o[i++]=(15&c)<<4|a>>2,o[i++]=(3&a)<<6|63&l}return n}function o(e){for(var r=new Uint8Array(e),t="",n=0;n<r.length;n+=3)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[r[n]>>2],t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&r[n])<<4|r[n+1]>>4],t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&r[n+1])<<2|r[n+2]>>6],t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&r[n+2]];return r.length%3==2?t=t.substring(0,t.length-1)+"=":r.length%3==1&&(t=t.substring(0,t.length-2)+"=="),t}function s(e){var r,t;if(null===e||"object"!=typeof e||"isActiveClone"in e)return e;var n=e instanceof Date?new Date(e):e.constructor();try{for(var o=function(e){var r="function"==typeof Symbol&&e[Symbol.iterator],t=0;return r?r.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}(Object.keys(e)),i=o.next();!i.done;i=o.next()){var u=i.value;Object.prototype.hasOwnProperty.call(e,u)&&(e.isActiveClone=null,n[u]=s(e[u]),delete e.isActiveClone)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return n}function i(e,r){return(e.name||r.name)+"/"+(e.storeName||r.storeName)+"/"}function u(e,r){r&&e.then(function(e){r(null,e)},function(e){r(e)})}function c(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function a(e,r){var t,n=this;if(r=c.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var o=this.config();e.name=e.name||o.name,e.storeName=e.storeName||o.storeName}return t=e.name?new Promise(function(r){r(e.storeName?i(e,n._defaultConfig):e.name+"/")}):Promise.reject("Invalid arguments"),{promise:t,callback:r}}function l(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}var f={bufferToString:o,deserialize:function(e){if("__lfsc__:"!==e.substring(0,9))return JSON.parse(e);var t,o=e.substring(13),s=e.substring(9,13);if("blob"===s&&r.test(o)){var i=o.match(r);t=i[1],o=o.substring(i[0].length)}var u=n(o);switch(s){case"arbf":return u;case"blob":return function(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(o){if("TypeError"!==o.name)throw o;for(var t=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)t.append(e[n]);return t.getBlob(r.type)}}([u],{type:t});case"si08":return new Int8Array(u);case"ui08":return new Uint8Array(u);case"uic8":return new Uint8ClampedArray(u);case"si16":return new Int16Array(u);case"ur16":return new Uint16Array(u);case"si32":return new Int32Array(u);case"ui32":return new Uint32Array(u);case"fl32":return new Float32Array(u);case"fl64":return new Float64Array(u);default:throw new Error("Unkown type: "+s)}},serialize:function(e,r){var n="";if(e&&(n=t.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===t.call(e.buffer))){var s=void 0,i="__lfsc__:";e instanceof ArrayBuffer?(s=e,i+="arbf"):(s=e.buffer,"[object Int8Array]"===n?i+="si08":"[object Uint8Array]"===n?i+="ui08":"[object Uint8ClampedArray]"===n?i+="uic8":"[object Int16Array]"===n?i+="si16":"[object Uint16Array]"===n?i+="ur16":"[object Int32Array]"===n?i+="si32":"[object Uint32Array]"===n?i+="ui32":"[object Float32Array]"===n?i+="fl32":"[object Float64Array]"===n?i+="fl64":r(new Error("Failed to get type for BinaryArray"))),r(i+o(s))}else if("[object Blob]"===n){var u=new FileReader;u.onload=function(){var t="~~local_forage_type~"+e.type+"~"+o(this.result);r("__lfsc__:blob"+t)},u.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(t){console.error("Couldn't convert value into a JSON string: ",e),r(null,t)}},stringToBuffer:n},h={},d=function(){function e(e){this.kp=e,this.data={}}return e.resolve=function(r){return h[r]||(h[r]=new e(r)),h[r]},e.prototype.clear=function(){this.data={}},e.prototype.drop=function(){this.clear(),delete h[this.kp]},e.prototype.get=function(e){return this.data[e]},e.prototype.key=function(e){return this.keys()[e]},e.prototype.keys=function(){return Object.keys(this.data)},e.prototype.rm=function(e){delete this.data[e]},e.prototype.set=function(e,r){this.data[e]=r},e}();e._support=!0,e._driver="localforage-driver-memory",e._initStorage=function(e){var r=e?s(e):{},t=i(r,this._defaultConfig),n=d.resolve(t);return this._dbInfo=r,this._dbInfo.serializer=f,this._dbInfo.keyPrefix=t,this._dbInfo.mStore=n,Promise.resolve()},e.clear=function(e){var r=this,t=this.ready().then(function(){r._dbInfo.mStore.clear()});return u(t,e),t},e.dropInstance=function(e,r){var t=a.apply(this,arguments),n=t.promise,o=t.callback,s=n.then(function(e){d.resolve(e).drop()});return u(s,o),n},e.getItem=function(e,r){var t=this;e=l(e);var n=this.ready().then(function(){var r=t._dbInfo.mStore.get(e);return null==r?null:t._dbInfo.serializer.deserialize(r)});return u(n,r),n},e.iterate=function(e,r){var t=this,n=this.ready().then(function(){for(var r=t._dbInfo.mStore,n=r.keys(),o=0;o<n.length;o++){var s=r.get(n[o]);if(s&&(s=t._dbInfo.serializer.deserialize(s)),void 0!==(s=e(s,n[o],o+1)))return s}});return u(n,r),n},e.key=function(e,r){var t=this,n=this.ready().then(function(){var r;try{void 0===(r=t._dbInfo.mStore.key(e))&&(r=null)}catch{r=null}return r});return u(n,r),n},e.keys=function(e){var r=this,t=this.ready().then(function(){return r._dbInfo.mStore.keys()});return u(t,e),t},e.length=function(e){var r=this.keys().then(function(e){return e.length});return u(r,e),r},e.removeItem=function(e,r){var t=this;e=l(e);var n=this.ready().then(function(){t._dbInfo.mStore.rm(e)});return u(n,r),n},e.setItem=function(e,r,t){var n=this;e=l(e);var o=this.ready().then(function(){void 0===r&&(r=null);var t=r;return new Promise(function(o,s){n._dbInfo.serializer.serialize(r,function(r,i){if(i)s(i);else try{n._dbInfo.mStore.set(e,r),o(t)}catch(e){s(e)}})})});return u(o,t),o},Object.defineProperty(e,"__esModule",{value:!0})})}),qt=xt(Mt()),Dt=xt(Ut()),$t={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"},Bt=function(e,r){return Object.assign(mr,r),e}(wt,{platform:"web",sdkName:"magic-sdk",version:"19.4.0",defaultEndpoint:"https://auth.magic.link/",ViewController:class extends jt{constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(e=>{let r=()=>{if(function(e){let r=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(r.find(r=>r.src.includes(e)))}(encodeURIComponent(this.parameters)))new gr(D.DuplicateIframe,"Duplicate iframes found.").log();else{let r=document.createElement("iframe");r.classList.add("magic-iframe"),r.dataset.magicIframeLabel=rt(this.endpoint).host,r.title="Secure Modal",r.src=rt(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,function(e){for(let[r,t]of Object.entries($t))e.style[r]=t}(r),document.body.appendChild(r),e(r)}};["loaded","interactive","complete"].includes(document.readyState)?r():window.addEventListener("load",r,!1)}),window.addEventListener("message",e=>{var r;if(e.origin===this.endpoint&&e.data&&e.data.msgType&&this.messageHandlers.size){e.data.response=null!=(r=e.data.response)?r:{};for(let r of this.messageHandlers.values())r(e)}})}showOverlay(){return kt(this,null,function*(){let e=yield this.iframe;e.style.display="block",this.activeElement=document.activeElement,e.focus()})}hideOverlay(){return kt(this,null,function*(){var e;(yield this.iframe).style.display="none",null!=(e=this.activeElement)&&e.focus&&this.activeElement.focus(),this.activeElement=null})}_post(e){return kt(this,null,function*(){let r=yield this.iframe;if(!r||!r.contentWindow)throw new yr(q.ModalNotReady,"Modal is not ready.");r.contentWindow.postMessage(e,this.endpoint)})}},configureStorage:()=>kt(void 0,null,function*(){let e=qt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(Dt),yield e.setDriver([qt.default.INDEXEDDB,qt.default.LOCALSTORAGE,Dt._driver]),e})});function Ft(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}var Wt=/*#__PURE__*/function(e){function r(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=e.call.apply(e,[this].concat(n))||this).info=function(e,t){try{return Promise.resolve(r.raw.info(e,t)).then(function(e){return e.body.currency})}catch(e){return Promise.reject(e)}},r.getCurrency=function(e,t){try{return Promise.resolve(r.raw.getCurrency(e,t)).then(function(e){return e.body.currency})}catch(e){return Promise.reject(e)}},r.balance=function(e,t){try{return Promise.resolve(r.raw.balance(e,t)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},r.getCurrencyBalance=function(e,t){try{return Promise.resolve(r.raw.getCurrencyBalance(e,t)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},r.getCurrencySummary=function(e,t){try{return Promise.resolve(r.raw.getCurrencySummary(e,t)).then(function(e){return e.body})}catch(e){return Promise.reject(e)}},r.increaseCurrencyBalance=function(e,t){try{return Promise.resolve(r.raw.increaseCurrencyBalance(e,t)).then(function(e){return e.body.balance})}catch(e){return Promise.reject(e)}},r.decreaseCurrencyBalance=function(e,t){try{return Promise.resolve(r.raw.decreaseCurrencyBalance(e,t)).then(function(e){return e.body.balance})}catch(e){return Promise.reject(e)}},r.transferCurrency=function(e,t){try{return Promise.resolve(r.raw.transferCurrency(e,t)).then(function(e){return e.body.balance})}catch(e){return Promise.reject(e)}},r.raw={info:function(e,t){try{return Promise.resolve(r.request("/currency/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getCurrency:function(e,t){try{return Promise.resolve(r.request("/currency/info"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},balance:function(e,t){try{return Promise.resolve(r.request("/currency/balance"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getCurrencyBalance:function(e,t){try{return Promise.resolve(r.request("/currency/balance"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},getCurrencySummary:function(e,t){try{return Promise.resolve(r.request("/currency/summary"+h(e),{headers:t}))}catch(e){return Promise.reject(e)}},increaseCurrencyBalance:function(e,t){try{return Promise.resolve(r.request("/currency/increaseBalance",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},decreaseCurrencyBalance:function(e,t){try{return Promise.resolve(r.request("/currency/decreaseBalance",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}},transferCurrency:function(e,t){try{return Promise.resolve(r.request("/currency/transfer",{method:"POST",body:JSON.stringify(e),headers:t}))}catch(e){return Promise.reject(e)}}},r.safe={info:function(e,t){try{return Promise.resolve(Ft(function(){return Promise.resolve(r.info(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCurrency:function(e,t){try{return Promise.resolve(Ft(function(){return Promise.resolve(r.getCurrency(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},balance:function(e,t){try{return Promise.resolve(Ft(function(){return Promise.resolve(r.balance(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCurrencyBalance:function(e,t){try{return Promise.resolve(Ft(function(){return Promise.resolve(r.getCurrencyBalance(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getCurrencySummary:function(e,t){try{return Promise.resolve(Ft(function(){return Promise.resolve(r.getCurrencySummary(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},increaseCurrencyBalance:function(e,t){try{return Promise.resolve(Ft(function(){return Promise.resolve(r.increaseCurrencyBalance(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},decreaseCurrencyBalance:function(e,t){try{return Promise.resolve(Ft(function(){return Promise.resolve(r.decreaseCurrencyBalance(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},transferCurrency:function(e,t){try{return Promise.resolve(Ft(function(){return Promise.resolve(r.transferCurrency(e,t)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},r}return t(r,e),r}(f),Vt="AssetLayerSessionToken",Gt="AssetLayerSessionTokenLastRefresh",zt=/*#__PURE__*/function(){function e(){}return e.initialize=function(){if(!this.initialized)try{var e="__test__";window.sessionStorage.setItem(e,e),window.sessionStorage.removeItem(e),this.available=!0}catch(e){this.available=!1}finally{this.initialized=!0}},e.set=function(e,r){return void 0===r&&(r=Date.now()),this.available?(window.sessionStorage.setItem(Vt,e),window.sessionStorage.setItem(Gt,""+r),!0):(console.warn("Session storage is not available. Token was not stored."),!1)},e.get=function(){if(this.available){var e=window.sessionStorage.getItem(Gt);return e?Date.now()-Number(e)>3e6?(console.warn("Session storage is expired. Token was not retrieved."),null):window.sessionStorage.getItem(Vt)||(console.warn("Session storage is empty. Token cannot be retrieved."),null):(console.warn("Session storage is empty. Timestamp cannot be retrieved."),null)}return console.warn("Session storage is not available. Token cannot be retrieved."),null},e.del=function(){return this.available?(window.sessionStorage.removeItem(Vt),window.sessionStorage.removeItem(Gt),!0):(console.warn("Session storage is not available. Token was not removed."),!1)},e}();function Ht(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}zt.initialized=!1,zt.available=!1,zt.initialize();var Jt="undefined"!=typeof window?new Bt("pk_live_8FB965353AF0A346"):void 0,Xt=0,Kt=/*#__PURE__*/function(){function e(e){var r=this,t=this,n=this,o=this,s=this,i=this;this.initialized=void 0,this.didToken=void 0,this.logs=void 0,this.sessionCache=void 0,this.refreshSessionTID=void 0,this.apps=void 0,this.assets=void 0,this.collections=void 0,this.currencies=void 0,this.equips=void 0,this.expressions=void 0,this.listings=void 0,this.shop=void 0,this.slots=void 0,this.users=void 0,this.safe={initialize:function(e){try{return Promise.resolve(Ht(function(){return Promise.resolve(r.initialize(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},isUserLoggedIn:function(){try{return Promise.resolve(Ht(function(){return Promise.resolve(t.isUserLoggedIn()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserDidToken:function(){try{return Promise.resolve(Ht(function(){return Promise.resolve(n.getUserDidToken()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},getUserMetadata:function(){try{return Promise.resolve(Ht(function(){return Promise.resolve(o.getUserMetadata()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},loginUser:function(e){try{return Promise.resolve(Ht(function(){return Promise.resolve(s.loginUser(e)).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}},logoutUser:function(){try{return Promise.resolve(Ht(function(){return Promise.resolve(i.logoutUser()).then(function(e){return{result:e}})},function(e){return{error:l(e)}}))}catch(e){return Promise.reject(e)}}},this.initialized=!1,this.didToken=(null==e?void 0:e.didToken)||"",this.logs=(null==e?void 0:e.logs)||!1,this.sessionCache="boolean"!=typeof(null==e?void 0:e.sessionCache)||e.sessionCache;var u=this;this.apps=new m(u,e),this.assets=new y(u,e),this.collections=new g(u,e),this.currencies=new Wt(u,e),this.equips=new b(u,e),this.expressions=new E(u,e),this.listings=new I(u,e),this.shop=new _(u,e),this.slots=new O(u,e),this.users=new U(u,e),null!=e&&e.initialize&&this.initialize()}var t=e.prototype;return t.initialize=function(e){try{var r=function(){function r(){return t.initialized=!0,e&&e(n),n}var o=function(){if(!n)return Promise.resolve(t.getUserDidToken()).then(function(e){var r=function(){if(e)return Promise.resolve(t.loginUser({didToken:e})).then(function(e){n=!!e})}();if(r&&r.then)return r.then(function(){})})}();return o&&o.then?o.then(r):r()},t=this,n=!1,o=t.sessionCache?zt.get():void 0,s=function(){if(o)return Promise.resolve(t.loginUser({registeredDidToken:o})).then(function(e){n=!!e})}();return Promise.resolve(s&&s.then?s.then(r):r())}catch(e){return Promise.reject(e)}},t.isUserLoggedIn=function(){try{return Promise.resolve(Jt?Jt.user.isLoggedIn():void 0)}catch(e){return Promise.reject(e)}},t.getUserDidToken=function(){try{return Promise.resolve(this.isUserLoggedIn()).then(function(e){if(e)return Promise.resolve(Jt.user.getIdToken())})}catch(e){return Promise.reject(e)}},t.getUserMetadata=function(){try{return Jt?Promise.resolve(this.isUserLoggedIn()).then(function(e){if(e)return Promise.resolve(Jt.user.getMetadata())}):Promise.resolve(void 0)}catch(e){return Promise.reject(e)}},t.loginUser=function(e){try{var r,t,n,o=function(){var r=function r(n){try{var o,s=function(r){var t;if(o)return r;var s=(null==(t=e)?void 0:t.email)||n.data.email,u=Jt.auth.loginWithEmailOTP({email:s});u.on("email-otp-sent",function(){var e=window.prompt("Enter Email OTP");e?u.emit("verify-email-otp",e):console.warn("Invalid OTP")}).on("invalid-email-otp",function(){}).on("done",function(e){try{var r=e;if(!r)throw new Error("Invalid DID Token");return Promise.resolve(i(r)).then(function(){})}catch(e){return Promise.reject(e)}}).on("error",function(e){console.error(e)}).on("settled",function(){}).catch(function(r){var t,n,o=l(r);console.warn("login aborted:",o.message),null!=(t=e)&&t.onError&&e.onError(o.message),null!=(n=e)&&n.onComplete&&e.onComplete(!1)})},i=function(r){try{return Promise.resolve(t.users.safe.getOTP({didtoken:r})).then(function(r){var n=r.result,o=r.error;if(t.logs&&console.log("pre-registered did:",n),!n){var s,i,u="Login Failed [OTP]: "+l(o).message;return null!=(s=e)&&s.onError&&e.onError(u),null!=(i=e)&&i.onComplete&&e.onComplete(!1),!1}return Promise.resolve(Jt.user.generateIdToken({lifespan:86400,attachment:n})).then(function(r){t.logs&&console.log("registered did:",r);var o=Date.now();return Promise.resolve(t.users.safe.registerDid({otp:n},{didtoken:r})).then(function(n){var s,i;if(!n.result){var u,c,a="Login Failed [Reg]: "+l(n.error).message;return null!=(u=e)&&u.onError&&e.onError(a),null!=(c=e)&&c.onComplete&&e.onComplete(!1),!1}return t.sessionCache&&zt.set(r,o),Xt=o,t.didToken=r,t.initialized||(t.initialized=!0),null!=(s=e)&&s.onSuccess&&e.onSuccess(),null!=(i=e)&&i.onComplete&&e.onComplete(!0),t.refreshSessionTID||(t.refreshSessionTID=setTimeout(function e(){try{return t.logs&&console.log("login refresh time elapsed",Date.now()-Xt),Date.now()-Xt<828e5?(t.refreshSessionTID=setTimeout(e,9e5),Promise.resolve()):Promise.resolve(t.safe.getUserDidToken()).then(function(r){var n=r.result;t.logs&&console.log("refreshed did:",n);var o=n?Promise.resolve(t.safe.loginUser({didToken:n})).then(function(){t.refreshSessionTID=setTimeout(e,3e5)}):Promise.resolve(t.safe.isUserLoggedIn()).then(function(e){e.result||t.logoutUser()});if(o&&o.then)return o.then(function(){})})}catch(e){return Promise.reject(e)}},36e5)),!0})})})}catch(e){return Promise.reject(e)}},u=function(){if(!n)return e?e.didToken?Promise.resolve(i(e.didToken)).then(function(e){return o=1,e}):e.email?void 0:(null!=(s=e)&&s.onComplete&&e.onComplete(!1),o=1,!1):(o=1,!1);if(n.origin!==window.location.origin||"assetlayer-login-popup"!==n.data.source)return o=1,!1;window.removeEventListener("message",r);var t,s,u=document.getElementById("assetlayer-login-iframe");return u&&document.body.removeChild(u),"submit"!==n.data.type?(null!=(t=e)&&t.onComplete&&e.onComplete(!1),o=1,!1):void 0}();return Promise.resolve(u&&u.then?u.then(s):s(u))}catch(e){return Promise.reject(e)}},t=s;return function(){if(e&&(e.email||e.didToken))return Promise.resolve(r(void 0));var t=document.createElement("iframe");t.id="assetlayer-login-iframe",t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.width="100vw",t.style.height="100vh",document.body.appendChild(t);try{var n,o=(null==(n=t.contentWindow)?void 0:n.document)||t.contentDocument;if(!o)throw new Error("err");o.open(),o.write('\n<!DOCTYPE html>\n<html lang="en-us">\n  <head>\n    <meta charset="utf-8">\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Asset Layer Login</title>\n  </head>\n  <body style="position: absolute; left: 0px; top: 0px; margin: 0px; padding: 0px; background-color: rgba(255,255,255,0.5)">\n    <div id="login-email-container" style="position: absolute; left: 0px; top: 0px; display: flex; justify-content: center; align-items: center; width: 100vw; height: 100vh;">\n      <div style="position: absolute; display: flex; flex-direction: column; justify-content: center; align-items: center; width: 360px; height: 380px; \n          background-color: white; border: 1px solid black; border-radius: 24px; box-shadow: 5px 5px 5px rgba(0,0,0,0.25);">\n        <button id="assetlayer-close-email-popup" \n          onmouseover="this.style.backgroundColor=\'darkgray\';" \n          onmouseout="this.style.backgroundColor=\'\';" \n          style="position: absolute; top: 24px; right: 24px; width: 38px; height: 38px; cursor: pointer; \n            border: 1px solid black; border-radius: 12px;"\n        >\n          X\n        </button>\n        <img src=" data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAMLklEQVR4Ae3d0W8Uxx0H8N/s7tkOBnM0bUpUIZxUqtKosn1tVIknzGtfQt6q1inOX1DzVKV58OUvAP6CmMbQvmH+ApyXpDRRz5gqiloFLkrSkALBwNnYvtmbzu/ODra5uz3bs7szu9+PdLrWXIRtvjf3m9/MzhIBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIDzBIETBn5bGa4HNOZ5wXEK1ZgSoqiEGuM/E4qGd75eCaoKpZb0ny7pP6+SLxZUQ94IAqquzpSqlFEItKWKk5XiciM40wyvR6dJUZEMETrsSokF4Yk536t/kKWAI9AW4RDXpDdF5J3UY+w4JUbpcHszvievuh5uBNoCwcTNcf00nWyIO5pXFF4IZ0tz5CAEOkWFNxcn9dO0alMDp43LEhJeuf6XX1wkhyDQKeibqJxWwj9nY5B3ci3YCHSCCpOVMSWDc5aUFrskFoJAvmF7je0RJCKYuFFW0q+4GWamxqT0bwcTlTJZDCN0zAYmK8Oh9K4oEmOUEVyG+H54ysbRGiN0jAq/vzElQ7+SpTAzrv31aF3hn48sgxE6Jv7EjfOCxB8p88J35WypTJZAoA3jxZHH0uMwn6H8mJNB+BbNlJYoZQi0Qc3lauldy1qJ0Ru1IIPGqbRDjUAbku8wb0o/1Ai0AQjzVumGGl0OA2qh/x7CvEmM+XX/HKUEgd4nXjAhRacJvqf71JPBm4uphBolxz5wH1YJkdpoZDuh1Nn6pdHzlCAEeo94BZAXTUxuvM+gpSAIS0muKKLk2KMw9K8hzJGKUi/7k540U0IQ6D1objRyYOunHcRYIL3EVkxRcuxSs9SQ/m2CXRGNsFS/XFqgmGGE3iUpgysEu6a8ZFp5CPQutC6ZUug37824P1GJvb2JQO/ONMGeeSL+URqB7hGPzpgI7g///gp/+FesuxBzOykcmFbD9TqNe4pGlaBhRdQ6hYi2h1Z/vaq/tkRrT4Zp9WGRlu8T1VeIVh8/fZEQrf9S+K2Hx88Bkd9HsB1f7VJ/f+QlikluAl2cUsXaII3pH/iMDun+TyKqrxKtPCCq3dWPe51f5xV0n2+g9cxhBy08JWdL8xSDzAc6eEeNiwa9rjyajG0hZDPc92+3/ncnzXA/p0fufsq5eTk7copikNlAc5CJJ3GKxilJD7+JDrbQU5fCoA72AOWVDMIjcWwxDShjBv6khkO/eRrRJKXh8IutR7dgqwbRuq7BxTJRfzGXpQivHkqid8mwTHU5Cu+oKRlQRdfIk5Q2DvXxXxMdOdb5NRzs1e906GuUP2KcYpCJkmNjwncl8fKiV4/1xPHuf6LLkJyN1nGUHc6P0IU/q7HlA1SxNszs0I+Ijv1Sf7NdamYerdf0xDJcp7woyMB4T9rpQPe9rU7rHvI1RQ4seHCYuQQ5+MPOr9GFP60/1CP5MuWCMr+NwNlA65F5siGaZYY7e5J9PQf/yQjR0NHur5MruQi1HoyM7+1wMtAcZj2WvUeuevFVhLqlOPC7T4+TQc4Fmmtm/c52/zq+F36mJ4EHu7+GQx2uUpbVSRotO5wKNPeY9ZNbZUYnm+VHIWJxhVt6KqSs8jwxTAY5FWi9YHLFiQlgrzjMR3/e/TU8UVxbaj1nkeGJoTOBDt5W5c0dcZly4Ej3xRfGLT2ZzXpal49GP22dCHSz1BAZ3lz//EvRpYd8QtSoU9boD578jdDSz8AksBuup6NKD5aX/vQ+WB9obtER5eCoLS49DkR8+vIInbFRWgizcyIXRuj8XMf3fA8XcmCU7srqQPOe5kx1NaLkdJQ2yepAC0V5uq1DC0bpfbE20NzZsGJfc9J4lPYirrvgETqrfel9sjbQehFlnPKKLw6IkpElcf2+rJJB1gZaN9zzV25s6rbFdFO4RlkgSOVkg7/NG/bj1n8ouuxQMhtlhxDZD/TGFdv5xQstAxE78TjMHGrHiTyUHLrZPkp5x6N0lIb7gdb/2EaP2LUy0DhDjqL3SrMMBFoJZTTQqZ7LUayo4uN1Gvc8Osk76TjI286WW9GP5QbRd+tEd/T/+VY/r6un58fxSUR8fhyfRCQydmZOoYdDaDKwT1rWwy/IoFRSEHysxvVf/PrGYTC72z546wnR4mO+OeD2rxeeI+o7lJ1jAPjIg1sfdn8N/6wDPyBXKaWq4aVRowc3JjpCD3ykhqVH5/i+fnuen7/8XOuxM9j1J61HVoLt9fJP0yCXCcP1M0ushi78XU1Jnypk6kpfDvVvdL/2lQPbv86hXrnn/vKw30OgHW/b6RF6jgxLZIT2/6HO61+9+Tsh9en342uH9bPfGq03NQ9tedR67uuhWwCpCMPGB2RY7CO0f13NiDjCvNWI7gicaFOKr9da1+OBfZTubvzN/A05Yw10cF2VRVJL2D/VJchrQ89+nUsQHq1dE/bQknO4syOEN0MxiC3QXDMnfh3gK4PP1tSM62nXauqeeszunuRWl/IqxSCW3wh3M5SX0pUmI7pmPtimw7Hu2PkW/MkSRTgb6Pk4yg0Wy2+EDxwnSukwGJ4o/qpN6bE5UXTFag9nRjvamtT/FOcpJsYD3Ryd096Yf0yvsv24zR2o5Ko7x9XKHvY7e6ku9O5JczHl8kgs5QYzHuiN0Tl9xzrcmEc6sjF+623jOnEw0FqZYmQ20BVVtOayqZf15LCvTReAD2xxYUHiSQ/tRt7L4pCNpe6LFCOjgfZDizblcy39Qpuyg2tp28sOvkVcFMfCvKFMMTMaaKHoJNnkaIc7udp++RLfQStK4Not4dRC3KMzM11D23WY4pEOgbb9XIueyg23brssZeMNSoDRQFu3MX+wQ1vL5n40j871iIlr8zbLLvWgVTmuvvNORqfJwrZTjg52CHTD8kBH4dsrO2JjImj8BpudOH9bt0zh1cGocoMXUxy5V7juJS2FYSOWe3p3gkDb5N7t6NcUDpArvARLjad/p0H6HVklm9Q6lBaehUvGfLfZR3e6v6Y5OrvS3VDl+uzoBUqY2badbYFe7rBjzcY9EHzr5Cj9btwrSQ9sc3I2ubp5K7MlhyDj14jty4MO7TnbFiXu3YrubPBE0IXOhtL95lr4FqXEbMkhyPglNftyp8OKoE2TKt6zcb/a/TX8iVLo4ZyOtOkwy2U9CZwrpXaZkNFAhz7N6yd7rnn6X6dAW7IowV2N/97s/hq+KsWFUsOCMDOzn2ElsaTLjhmywecrrUNpduJjDmy4dImvSOEwR5UahSHrSw39yTxjQ5iZ+f2Hkq6ST1OUtsUOG+RtuQr8239Hb+IvDNrzadKJoPPh+yNnyRLG3/ryhJjX01zj5y3sCo/Oy21ads3R2YIOxzefRrfoOMyBvT1nXjQRpKakRWFmsXyWyQbxD5nOxw+XGe1GZy4z0h6ducz4etH5MDc7GTIspdFnjhJPcXZCVEWDUulD0uKj9qNz31C6ozNPAL/8p17sudf5Nc033ZDdYdYLJvLSaCnpFcBexTo7Cj5WfI5dcvU0n57UbnTmkbkvxbYXb9j/+mb3own4zcbdDHsngPOyEZ6lyyW71hp2iH263zw5KYnDZm7puvnDh89+nUe7gcOUCg4wL5o8+Kr763jRJBi08uAY3i1HjcbZ8K+ldOdFPUrkNxhcV9P6bypTXD7To/InbS4q5Vq0f4hSwdtA79/u3pbjFUv+Hi28nKoZZKJyEleZmJTYkMAnKW0cPmNulaA5AdQ182cr27++WYumsTONywveNddtG6jFQSY+BEYPPrp7Ydeqb4+S/Yz7SA37Pk0LE1eGf6lHvk/aTAADvazdfzjZCSCXFkt6RK7ddTXI83pMnpe1xgUbFkf2I52iba/B5hH582Wir9Zat6fYxCMy18p84WhSCxEcYt7yyaXFWq39hI+/LxFs3DbDkhVKavWQPb1WEAqx0KjJi66HeKt0f8MVVfQlndTfxLj+LY/xjeo732NFt73u6CDXE77Hitx44zRPMdWP1YetsqK+pcxp/t2i9X1t/d44zCmFWC9HV5vfmqIF/Vji8ApPVQsyWFi9/OoXBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZ8n8HtzqX8OMEngAAAABJRU5ErkJggg==" alt="" crossorigin="anonymous" style="width: 45px; height: 45px;"/>\n        <input id="assetlayer-enter-email-input" type="text" placeholder="Email" style="margin: 80px 0px; padding: 0px 16px; width: 280px; height: 50px; \n          border: 1px solid darkgray; border-radius: 12px"/>\n        <button id="assetlayer-submit-email-button" \n          onmouseover="this.style.backgroundColor=\'darkgray\';" \n          onmouseout="this.style.backgroundColor=\'\';" \n          style="padding: 16px 24px; cursor: pointer; border: 1px solid black; border-radius: 12px;"\n        >\n          Login with Email\n        </button>\n      </div>\n    </div>\n    <script>\n        const closePopupBtn = document.getElementById(\'assetlayer-close-email-popup\');\n        const submitEmailBtn = document.getElementById(\'assetlayer-submit-email-button\');\n\n        closePopupBtn.addEventListener(\'click\', function() {\n          // Send the close command to the parent window\n          window.parent.postMessage({ source: \'assetlayer-login-popup\', type: \'close\' }, \n            (window.location.href.slice(0,7) === \'file://\') ? \'*\' : window.location.origin);\n        });\n        submitEmailBtn.addEventListener(\'click\', function() {\n            const email = document.getElementById(\'assetlayer-enter-email-input\').value;\n            // Send the email to the parent window\n            window.parent.postMessage({ source: \'assetlayer-login-popup\', type: \'submit\', email }, \n                (window.location.href.slice(0,7) === \'file://\') ? \'*\' : window.location.origin);\n        });\n    <\/script>\n  </body>\n</html>\n'),o.close(),window.addEventListener("message",r)}catch(r){var s,i,u="iFrame error";console.warn(u),null!=(s=e)&&s.onError&&e.onError(u),null!=(i=e)&&i.onComplete&&e.onComplete(!1)}}()},s=this;if(s.logs&&console.log("login props:",e),null!=(r=e)&&r.registeredDidToken)return s.didToken=e.registeredDidToken,s.initialized=!0,null!=(t=e)&&t.onSuccess&&e.onSuccess(),null!=(n=e)&&n.onComplete&&e.onComplete(!0),Promise.resolve(!0);if(!Jt)return Promise.resolve(!1);var i=function(){if(!e||!e.email&&!e.didToken)return Promise.resolve(s.getUserDidToken()).then(function(r){r&&(e?e.didToken=r:e={didToken:r})})}();return Promise.resolve(i&&i.then?i.then(o):o())}catch(e){return Promise.reject(e)}},t.logoutUser=function(){try{var e=this;if(!Jt)return Promise.resolve();var r=Ht(function(){return Promise.resolve(Jt.user.logout()).then(function(){e.didToken="",zt.del(),e.refreshSessionTID&&(clearTimeout(e.refreshSessionTID),e.refreshSessionTID=void 0)})},function(){console.warn("logout err")});return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},t.newRegisteredDidToken=function(e){try{var t=this;return Promise.resolve(t.getUserDidToken()).then(function(n){if(n){var o=e?r({},e,{didtoken:n}):{didtoken:n};return Promise.resolve(t.users.safe.getOTP(o)).then(function(n){var o=n.result,s=n.error;if(o)return Promise.resolve(Jt.user.generateIdToken({lifespan:86400,attachment:o})).then(function(n){var s=e?r({},e,{didtoken:n}):{didtoken:n};return Promise.resolve(t.users.safe.registerDid({otp:o},s)).then(function(e){if(e.result)return n;var r="Register Failed [Reg]: "+l(e.error).message;console.warn(r)})});var i="Register Failed [OTP]: "+l(s).message;console.warn(i)})}})}catch(e){return Promise.reject(e)}},e}();e.AssetLayer=Kt,e.BasicError=a});
